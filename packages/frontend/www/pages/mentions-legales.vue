<template>
    <Container>
        <div class="mt-10 max-w-screen-lg mx-auto pb-16">
            <h2 class="text-display-lg font-bold">
                Mentions légales
            </h2>
            <h3 class="text-display-md font-bold mt-8">
                &Eacute;diteurs
            </h3>
            <div class=" mt-4">
                <p>
                    <Link to="/">Résorption bidonvilles</Link>
                    est édité par la Fabrique numérique du ministère de la
                    transition écologique et solidaire et du ministère de la
                    cohésion des territoires et des relations avec les
                    collectivités territoriales, sise 1 place Carpeaux,
                    92800 Puteaux, avec l’appui de l’incubateur de services
                    numériques (beta.gouv.fr) de la direction
                    interministérielle du numérique (DINUM).
                </p>
            </div>
            <h3 class="text-display-md font-bold mt-8">
                Nous joindre
            </h3>
            <div class=" mt-4">
                <ul>
                    <li>Par téléphone : +33 (0) 1 40 81 95 39</li>
                    <li>
                        Par mail :
                        <p>
                            <Link class="underline" to="mailto:contact@resorption-bidonvilles.beta.gouv.fr">
                            contact@resorption-bidonvilles.beta.gouv.fr</Link>
                        </p>
                    </li>
                </ul>
            </div>
            <h3 class="text-display-md font-bold mt-8">
                Directeurs de la publication
            </h3>
            <div class=" mt-4">
                <ul>
                    <li>
                        Délégué interministériel à l’hébergement et l’accès
                        au logement
                    </li>
                    <li>La Grande Arche - 92055 La Défense Cedex</li>
                </ul>
            </div>
            <h3 class="text-display-md font-bold mt-8">
                Prestataire d’hébergement
            </h3>
            <div class="mt-4">
                <p>
                    Le site
                    <Link to="/">resorption-bidonvilles.beta.gouv.fr</Link>
                    est hébergé par la société OVH<br />Code APE 6202A<br />N°
                    TVA : FR 22 424 761 419<br />Inscrite au RCS Roubaix –
                    Tourcoing 424 761 419 00045
                </p>
                <p>
                    Siège social : 2 rue Kellermann, 59100 Roubaix, France
                </p>
            </div>
            <h3 class="text-display-md font-bold mt-8">
                Partage des données
            </h3>
            <div class="mt-4">
                <p>
                    Si vous disposez d’un accès à la plateforme, des données anonymisées sont stockées pour mieux comprendre
                    comment vous naviguez et utilisez les dernières fonctionnalités mises à votre disposition.</p>

                <p class="mt-3">Ces données sont utilisées exclusivement à des fins d’amélioration de l’impact et de
                    l’utilité de la
                    plateforme et ne sont en aucun cas communiquées à des tiers.</p>

                <p class="mt-3">Vous pouvez néanmoins désactiver ce partage des données ci-dessous.</p>

                <p v-if="isOptedOut === null">
                    <Spinner />
                </p>
                <p v-else-if="isOptedOut"><Button @click="forgetOptOut" type="button">Autoriser le partage de mes
                        données</Button></p>
                <p v-else><Button @click="optOut" type="button">Ne pas autoriser le partage de mes données</Button></p>
            </div>
        </div>
    </Container>
</template>

<script setup>
import { ref } from "vue";
import Container from "~/components/Layout/Container/Container.vue";
import { Button, Link, Spinner } from "@resorptionbidonvilles/ui";

const piwik = ref(null);
const isOptedOut = ref(null);

useHead({
    title: "Mentions légales - Résorption-bidonvilles"
});

definePageMeta({
    layout: "default"
});

onMounted(() => {
    piwik.value = window.Piwik?.getTracker();
    refreshIsOptedOut();
});

function optOut() {
    piwik.value.optUserOut();
    refreshIsOptedOut();
}

function forgetOptOut() {
    piwik.value.forgetUserOptOut();
    refreshIsOptedOut();
}

function refreshIsOptedOut() {
    isOptedOut.value = piwik.value.isUserOptedOut();
}
</script> 