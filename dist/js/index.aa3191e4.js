(function(e){function t(t){for(var s,o,r=t[0],l=t[1],c=t[2],u=0,p=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);d&&d(t);while(p.length)p.shift()();return n.push.apply(n,c||[]),i()}function i(){for(var e,t=0;t<n.length;t++){for(var i=n[t],s=!0,r=1;r<i.length;r++){var l=i[r];0!==a[l]&&(s=!1)}s&&(n.splice(t--,1),e=o(o.s=i[0]))}return e}var s={},a={index:0},n=[];function o(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=s,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(i,s,function(t){return e[t]}.bind(null,s));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var d=l;n.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("7ba5")},"0045":function(e,t,i){"use strict";var s=i("7028"),a=i.n(s);a.a},"01b4":function(e,t,i){},"0514":function(e,t,i){},"0a93":function(e,t,i){},"0c81":function(e,t,i){},"0eac":function(e,t,i){e.exports=i.p+"img/water-null.48ff87a6.png"},"0ead":function(e,t,i){},"0f88":function(e,t,i){e.exports=i.p+"img/logo-fabrique-numerique.ad82b7e5.png"},"0fea":function(e,t,i){},"0ff0":function(e,t,i){"use strict";var s=i("0a93"),a=i.n(s);a.a},1210:function(e,t,i){"use strict";var s=i("7fa8"),a=i.n(s);a.a},1239:function(e,t,i){e.exports=i.p+"img/map-en.454a1e25.jpg"},"12a5":function(e,t,i){"use strict";var s=i("7c9e"),a=i.n(s);a.a},1676:function(e,t,i){e.exports=i.p+"img/resorption-bidonvilles-4.0d429297.jpg"},"17d9":function(e,t,i){"use strict";var s=i("9cfe"),a=i.n(s);a.a},"18f7":function(e,t,i){"use strict";var s=i("e17b"),a=i.n(s);a.a},"1a28":function(e,t,i){},"1a64":function(e,t,i){"use strict";var s=i("bafd"),a=i.n(s);a.a},"1c7c":function(e,t,i){"use strict";var s=i("0ead"),a=i.n(s);a.a},2207:function(e,t,i){"use strict";var s=i("85f4"),a=i.n(s);a.a},"227c":function(e){e.exports=JSON.parse('"0.10.1"')},2283:function(e,t,i){"use strict";var s=i("9f1c"),a=i.n(s);a.a},2361:function(e,t,i){e.exports=i.p+"img/UK.951da937.svg"},2504:function(e){e.exports=JSON.parse('{"contact":"Contactați echipa de proiect","statistics":"Statistici","legal":"Informații legale","userAccessGuide":"Ghid de acces utilizator","userAgreement":"Acordul Utilizatorului"}')},"273c":function(e,t,i){},"27a3":function(e,t,i){},"2a38":function(e,t,i){"use strict";var s=i("8922"),a=i.n(s);a.a},"2b2e":function(e,t,i){},"2cb4":function(e,t,i){},"2d21":function(e,t,i){"use strict";var s=i("2cb4"),a=i.n(s);a.a},"2eea":function(e,t,i){e.exports=i.p+"img/after.21f24db8.jpg"},"30c2":function(e,t,i){"use strict";var s=i("3ffc"),a=i.n(s);a.a},"30ce":function(e,t,i){"use strict";var s=i("75df"),a=i.n(s);a.a},3229:function(e,t,i){e.exports=i.p+"img/FR.3c609eda.svg"},"33a8":function(e,t,i){},3415:function(e,t,i){"use strict";var s=i("9cc2"),a=i.n(s);a.a},"373f":function(e,t,i){"use strict";var s=i("33a8"),a=i.n(s);a.a},"379b":function(e,t,i){"use strict";var s=i("aac4"),a=i.n(s);a.a},"37bc":function(e,t,i){e.exports=i.p+"img/Marianne.d37c6b1e.svg"},"3a02":function(e,t,i){"use strict";var s=i("8072"),a=i.n(s);a.a},"3b19":function(e){e.exports=JSON.parse('{"header":{"connect":"Se connecter","contact":"Nous contacter"},"hero":{"title":"Agir pour résorber les bidonvilles","subtitle":"Posez-nous une question ou demandez un accès"},"firstSection":{"features":{"position":"L\'information utile sur les sites en un clin d\'oeil","actions":"L’essentiel des actions accessible à tout moment","exchange":"Des échanges facilités entre les acteurs"},"before":"Avant","after":"Après","context":{"title":"Résorption-bidonvilles,","subtitle":"Une plateforme pour accélérer la résorption des bidonvilles","text":"Outil d’information, de partage et de pilotage, la plateforme offre une solution performante et efficace pour la résorption des bidonvilles. Elle permet de créer une véritable dynamique collaborative, au sein d’un territoire, entre les acteurs engagés vers l’objectif de résorption."},"feedback":{"1":{"text":"C’est super parce que vous avez l’info en ligne, vous n’êtes pas face à un tableau excel avec des codes que vous ne comprenez pas.","author":"Chargée de mission en Préfecture de Seine-Saint-Denis"},"2":{"text":"La plateforme a fiabilisé l’information, parce que le tableau Excel n’était pas partagé. Plus on aura des outils collaboratifs, mieux ça sera.","author":"Responsable hygiène publique à la ville de Poitiers"},"3":{"text":"J’ai pu orienter la famille d’une personne que j’accompagne vers une maison des solidarités à partir de la localisation de leur bidonville.","author":"Travailleur social au sein d\'une association à Toulouse"}}},"firstBanner":{"text":"Acteurs de la résorption des bidonvilles, partagez et faites connaître vos actions","cta":"Demander un accès"},"secondSection":{"title":"La résorption complète des bidonvilles,","subtitle":"un objectif national","data":{"1":{"line1":"Plus de","line2":"300 bidonvilles","line3":"en France métropolitaine"},"2":{"line1":"Plus de","line2":"16 000 personnes","line3":"dont 5 000 mineurs"},"3":{"line1":"Majoritairement","line2":"européens","line3":"Roumains et Bulgares"}},"firstParagraph":"Un bidonville est un terrain, une friche ou un immeuble bâti généralement dépourvu des services de base (eau, électricité, gestion des déchets) et occupé illégalement par plusieurs familles.","secondParagraph":{"bold":"Le gouvernement fixe un objectif clair de résorption des bidonvilles en dépassant l’approche centrée sur les évacuations au profit d’une approche globale","normal":"alliant insertion sociale, respect de l’ordre public et prévention des réinstallations. Dans tous les territoires concernés, des actions multi-partenariales efficaces, humaines et pragmatiques doivent être mises en place.","link":"En savoir plus sur la politique de résorption des bidonvilles"},"video":{"text":"Comprendre la résorption des bidonvilles en 2 minutes"}},"secondBanner":{"text":"Voisin, citoyen, habitant d’un bidonville… Une info ? Une question ? Une alerte ?","cta":"Nous contacter"},"thirdSection":{"title":"Les actions en chiffres","firstParagraph":{"bold":"Plus de 30 actions de résorption des bidonvilles menées en 2019 par 35 opérateurs.","normal":"Ces actions sont financées à 75 % par l’État, à 15 % par les collectivités territoriales et à 10 % par des fonds privés ou européens. \\nLes équipes de professionnels accompagnent les familles sur bidonville, en squat ou dans le logement sur tous les aspects : santé, logement, emploi, éducation, stabilisation et sécurisation du site."},"bilan":{"1":{"text":"8600 bénéficiaires"},"2":{"text":"17 sites résorbés","info":"+10 en 1 an"},"3":{"text":"1 000 personnes relogées"},"4":{"text":"1 350 enfants scolarisés"},"5":{"text":"2 040 bénéficiaires","info":"d\'un accompagnement santé"},"6":{"text":"615 contrats de travail signés"}},"cta":"Télécharger le dernier bilan","secondParagraph":{"title":"Un projet porté par la Délégation interministérielle à l’hébergement et l’accès au logement","body":{"text1":"La plateforme numérique Résorption-bidonvilles, portée et lancée en 2018 par la","link1":"Dihal","text2":"s’inscrit dans un objectif de transformation de l’action publique","text3":"Les développements de la plateforme se poursuivent en lien étroit avec ses usagers.","text4":"Vous souhaitez en savoir plus sur la génèse du projet ? Accédez à sa fiche sur","link2":"le site officiel des start-ups d’Etat"},"items":{"1":{"link":"Entrepreneur d’intérêt général","text":"du Programme d’investissement d’avenir en 2019"},"2":{"link":"Programme “rights, citizenship and equality”","text":"de la commission européenne au premier trimestre 2020"},"3":{"link":"Fonds d’accélération des Start-up d’État 3","text":"de la DINUM en avril 2020"},"4":{"link":"Fonds de transformation de l\'action publique","text":"de la DITP en octobre 2020"},"title":"Le projet a été lauréat de plusieurs appels à projet :"}}},"contactForm":{"email":"Votre email","cta":"Nous contacter"}}')},"3b5a":function(e,t,i){"use strict";var s=i("51a8"),a=i.n(s);a.a},"3b8a":function(e,t,i){e.exports=i.p+"img/logo_beta-gouv-fr.ced9be94.jpg"},"3cf0":function(e,t,i){},"3e3e":function(e){e.exports=JSON.parse('{"contact":"Свържете се с екипа на проекта","statistics":"Статистика","legal":"Правна информация","userAccessGuide":"Ръководство за достъп на потребителя","userAgreement":"Споразумение с потребителя"}')},"3ffc":function(e,t,i){},4115:function(e,t,i){},"42da":function(e,t,i){},4316:function(e,t,i){"use strict";var s=i("3cf0"),a=i.n(s);a.a},"49bc":function(e,t,i){},"4f16":function(e,t,i){"use strict";var s=i("be9a"),a=i.n(s);a.a},"4f37":function(e,t,i){"use strict";var s=i("b64b"),a=i.n(s);a.a},"51a8":function(e,t,i){},5362:function(e){e.exports=JSON.parse('{"title":"Дейци в политиката за закриването на бидонвилите,споделете и разпространете информация за вашата дейност","contactUs":"Свържете се с нас","email":"Вашият имейл","firstname":"Име","lastname":"Фамилия","requestType":"Желаете да...","help":"Помогнете","report":"Подадете сигнал","requestHelp":"Поискате помощ","requestInfo":"Поискате информация","requestAccess":"Поискате достъп до платформата","isActor":"Активен участник ли сте в закриването на бидонвили?","actorExample":"Например: държавна служба, неправителствен оператор, местна власт...","yes":"Да","no":"Не","whichEstablishment":"Коя е вашата организация?","public":"Държавна служба, публична институция или орган","territorialCollectivity":"Местна власт","association":"Сдружение","administration":"Централна администрация","message":"Вашето съобщение","legal":"Декларирам, че личните ми данни са въведени с мое съгласие.","send":"Изпрати","cancel":"Отмени","error":"Вашата заявка съдържа грешки","share":"Споделете тази страница"}')},5449:function(e,t,i){"use strict";var s=i("ff59"),a=i.n(s);a.a},"54a1":function(e,t,i){},5549:function(e,t,i){e.exports=i.p+"img/map-bg.d95207bf.png"},"597c":function(e,t,i){e.exports=i.p+"img/status.d076deee.svg"},"5a39":function(e,t,i){"use strict";var s=i("912c"),a=i.n(s);a.a},"5e31":function(e,t,i){"use strict";var s=i("c368"),a=i.n(s);a.a},"5ff8":function(e){e.exports=JSON.parse('{"contact":"Contact the team","statistics":"Statistics","legal":"Legal information","userAccessGuide":"User access guide","userAgreement":"User agreement"}')},"602b":function(e,t,i){},6382:function(e,t,i){},"63fe":function(e,t,i){},"64e1":function(e,t,i){e.exports=i.p+"img/water-no.1646343a.png"},6501:function(e,t,i){"use strict";var s=i("273c"),a=i.n(s);a.a},"65a2":function(e,t,i){"use strict";var s=i("0c81"),a=i.n(s);a.a},6613:function(e,t,i){"use strict";var s=i("a605"),a=i.n(s);a.a},"669e":function(e,t,i){"use strict";var s=i("54a1"),a=i.n(s);a.a},"67e3":function(e,t,i){e.exports=i.p+"img/water-yes.87235d21.png"},"687a":function(e){e.exports=JSON.parse('{"title":"Voisin, citoyen, habitant d’un bidonville… Une info ? Une question ? Une alerte ?","contactUs":"Contactez-nous","email":"Votre email","firstname":"Prénom","lastname":"Nom de famille","requestType":"Vous souhaitez...","help":"Aider","report":"Signaler","requestHelp":"Demander de l\'aide","requestInfo":"Demander des infos","requestAccess":"Demander un accès à la plateforme","isActor":"Êtes-vous acteur de la résorption des bidonvilles?","actorExample":"Par exemple : un service de l’État, un opérateur associatif, une collectivité locale","yes":"Oui","no":"Non","whichEstablishment":"Quelle structure?","public":"Service de l’Etat, établissement ou organisme public","territorialCollectivity":"Collectivité territoriale","association":"Association","administration":"Administration centrale","message":"Votre message","legal":"Je certifie que ces données personnelles ont été saisies avec mon accord","send":"Envoyer","cancel":"Annuler","error":"Votre demande comprend des erreurs:","share":"Partager cette page"}')},"6d7c":function(e,t,i){},"6ead":function(e,t,i){e.exports=i.p+"img/logo-gouvernement.c2eee174.jpg"},"6ecd":function(e,t,i){e.exports=i.p+"img/type.049e9884.svg"},7028:function(e,t,i){},"71ee":function(e,t,i){e.exports=i.p+"img/utensils.fe20af2e.png"},"74c2":function(e,t,i){},"75df":function(e,t,i){},"771a":function(e,t,i){"use strict";var s=i("4115"),a=i.n(s);a.a},"77c2":function(e,t,i){"use strict";var s=i("602b"),a=i.n(s);a.a},"77c5":function(e,t,i){e.exports=i.p+"img/logo-entrepreneur-interet-general.559c3e82.png"},"7b35":function(e,t,i){},"7ba5":function(e,t,i){"use strict";i.r(t);i("ea19"),i("f138"),i("e9cc"),i("2d26"),i("96cf");var s=i("2b0e"),a=i("a925"),n=i("8c4f"),o=i("4ddc"),r=i("ad3d"),l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("router-view"),i("NotificationsGroup")],1)},c=[],d=i("2877"),u={},p=Object(d["a"])(u,l,c,!1,null,null,null),m=p.exports,h=i("ecee"),v=i("f2d1"),f=i("c074");h["c"].add(f["y"]),h["c"].add(f["l"]),h["c"].add(f["I"]),h["c"].add(f["X"]),h["c"].add(f["Y"]),h["c"].add(f["Z"]),h["c"].add(f["cb"]),h["c"].add(f["c"]),h["c"].add(f["s"]),h["c"].add(f["t"]),h["c"].add(f["J"]),h["c"].add(f["T"]),h["c"].add(f["F"]),h["c"].add(f["k"]),h["c"].add(f["p"]),h["c"].add(f["q"]),h["c"].add(f["K"]),h["c"].add(f["v"]),h["c"].add(f["P"]),h["c"].add(f["h"]),h["c"].add(f["i"]),h["c"].add(f["j"]),h["c"].add(f["g"]),h["c"].add(f["o"]),h["c"].add(f["W"]),h["c"].add(f["A"]),h["c"].add(f["H"]),h["c"].add(f["w"]),h["c"].add(f["db"]),h["c"].add(f["bb"]),h["c"].add(f["u"]),h["c"].add(f["a"]),h["c"].add(f["R"]),h["c"].add(f["D"]),h["c"].add(f["E"]),h["c"].add(f["S"]),h["c"].add(f["e"]),h["c"].add(f["r"]),h["c"].add(f["L"]),h["c"].add(f["C"]),h["c"].add(f["ab"]),h["c"].add(f["f"]),h["c"].add(f["B"]),h["c"].add(f["O"]),h["c"].add(f["M"]),h["c"].add(f["U"]),h["c"].add(f["V"]),h["c"].add(f["z"]),h["c"].add(f["G"]),h["c"].add(f["d"]),h["c"].add(f["x"]),h["c"].add(f["m"]),h["c"].add(f["n"]),h["c"].add(f["b"]),h["c"].add(f["c"]),h["c"].add(f["Q"]),h["c"].add(v["b"]),h["c"].add(v["a"]),h["c"].add(f["N"]);var _=i("3b19"),g=i("687a"),b=i("af21"),y={landingPage:_,contactPage:g,footer:b},C=i("af3d"),w=i("983b"),k=i("5ff8"),x={landingPage:C,contactPage:w,footer:k},P=i("fd3d"),$=i("9ddb"),S=i("2504"),E={landingPage:P,contactPage:$,footer:S},T=i("cda2"),A=i("5362"),I=i("3e3e"),O={landingPage:T,contactPage:A,footer:I},q={fr:y,en:x,ro:E,bg:O},M=i("95bf"),D=i("7bb1"),j=i("4c93"),N=i("6fde"),F=i("2593"),L=i("eaf5"),z=i("3108"),B=i("0158"),R=i.n(B),V=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(e.isLink?"a":"button",{tag:"component",class:["btn inline-block relative",e.sizeClasses,e.variantClasses,this.disabled&&"opacity-50 cursor-not-allowed"],attrs:{disabled:e.disabled||e.loading,href:e.isLink?e.disabled?null:e.href:null,type:e.isLink?null:e.type},on:{click:e.onClick}},[i("div",{class:["flex","right"===e.iconPosition?"flex-row-reverse":"flex-row",e.loading&&"invisible"]},[e.icon||e.$slots.icon?i("div",[e._t("icon",[i("Icon",{attrs:{icon:e.icon}})])],2):e._e(),e.$slots.default?i("div",{class:e.iconPositionClasses},[e._t("default")],2):e._e()]),e.loading?i("div",{staticClass:"absolute inset-0 flex justify-center items-center"},[i("Icon",{attrs:{icon:"spinner",spin:""}})],1):e._e()])},U=[],H=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("font-awesome-icon",{attrs:{icon:e.icon,spin:e.spin}})},G=[],W={name:"Icon",props:{icon:{type:String,required:!0},spin:{type:Boolean}}},Y=W,J=Object(d["a"])(Y,H,G,!1,null,null,null),Q=J.exports,Z={name:"Button",props:{variant:{type:String,default:"primary"},type:String,href:String,size:{type:String,default:"md"},icon:String,iconPosition:{type:String,default:"right"},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},computed:{iconPositionClasses(){return this.icon?{left:"ml-2",right:"mr-2"}[this.iconPosition]:""},sizeClasses(){return{sm:"text-sm "+(this.isLink?"":"py-1 px-2"),md:"text-md "+(this.isLink?"":"py-2 px-4"),lg:"text-lg "+(this.isLink?"":"py-2 px-4")}[this.size]},variantClasses(){return{primary:"border-2 border-primary bg-primary text-white hover:bg-primaryDark",secondary:"border-2 border-secondary bg-secondary text-white hover:bg-secondaryDark",primaryOutline:"border-2 border-primary text-primary hover:bg-primary hover:text-white",secondaryOutline:"border-2  border-secondary text-secondary hover:bg-secondary hover:text-white",primaryText:"text-primary hover:text-primaryDark",secondaryText:"text-secondary hover:text-secondaryDark"}[this.variant]},isLink(){return void 0!==this.href}},methods:{onClick(e){this.$emit("click",e)}},components:{Icon:Q}},K=Z,X=Object(d["a"])(K,V,U,!1,null,null,null),ee=X.exports,te=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("InputWrapper",[i("InputLabel",{attrs:{label:e.label,info:e.info}}),i("ValidationProvider",{attrs:{rules:e.rules,name:e.validationName||e.label,vid:e.id},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[i("div",{staticClass:"relative"},[e.prefixIcon?i("InputIcon",{attrs:{position:"before",icon:e.prefixIcon}}):e._e(),i("input",e._b({class:e.classes,attrs:{id:e.id},on:{input:function(t){return e.$emit("input",t.target.value)}}},"input",e.filteredProps,!1)),e.suffixIcon?i("InputIcon",{attrs:{position:"after",icon:e.suffixIcon}}):e._e()],1),i("InputError",[e._v(e._s(s[0]))])]}}])})],1)},ie=[],se={computed:{filteredProps(){const e={...this.$props};return Object.keys(e).forEach(t=>{void 0===e[t]&&delete e[t]}),e}}},ae=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.label?i("div",{staticClass:"mb-2 text-sm"},[e._v(e._s(e.label))]):e._e(),e.info?i("div",{staticClass:"mb-3 text-xs"},[e._v(e._s(e.info))]):e._e()])},ne=[],oe={props:{label:{type:String},info:{type:String}}},re=oe,le=Object(d["a"])(re,ae,ne,!1,null,null,null),ce=le.exports,de=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mb-6"},[e._t("default")],2)},ue=[],pe={},me=Object(d["a"])(pe,de,ue,!1,null,null,null),he=me.exports,ve=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"text-error mt-2"},[e._t("default")],2)},fe=[],_e={},ge=Object(d["a"])(_e,ve,fe,!1,null,null,null),be=ge.exports,ye=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["absolute inset-y-0 flex items-center",e.positionClasses]},[e._t("default",[e.icon?i("Icon",{attrs:{icon:e.icon}}):e._e()])],2)},Ce=[],we={props:{icon:{type:String},position:{type:String}},computed:{positionClasses(){return"after"===this.position?"right-0 pr-3 ":"left-0 pl-3 "}}},ke=we,xe=Object(d["a"])(ke,ye,Ce,!1,null,null,null),Pe=xe.exports;function $e(e,t){const{error:i,prefixIcon:s,suffixIcon:a}=t;return{state:["bg-G200 border-b-2 border-black rounded rounded-b-none w-full py-2 ",i&&"border-error",s&&"pl-10",a&&"pr-10"],default:["border-2 border-G200 rounded-md w-full py-2 px-4 outline-none focus:border-primary",i&&"border-error",s&&"pl-10",a&&"pr-10"]}[e]}var Se={name:"TextInput",mixins:[se],props:{label:{type:String},info:{type:String},placeholder:{type:String},type:{type:String,default:"text"},validationName:{type:String},rules:{type:String},value:{type:String},id:{type:String},variant:{type:String,default:"default"},prefixIcon:{type:String},suffixIcon:{type:String}},computed:{classes(){const e={error:this.error,prefixIcon:this.prefixIcon,suffixIcon:this.suffixIcon};return{state:[...$e("state",e)],default:$e("default",e)}[this.variant]}},components:{InputLabel:ce,InputWrapper:he,InputError:be,InputIcon:Pe}},Ee=Se,Te=Object(d["a"])(Ee,te,ie,!1,null,null,null),Ae=Te.exports,Ie=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("InputWrapper",[i("InputLabel",{attrs:{label:e.label,info:e.info}}),i("ValidationProvider",{attrs:{rules:e.rules,name:e.validationName||e.label,vid:e.id},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[i("div",{staticClass:"relative"},[e.prefixIcon?i("InputIcon",{attrs:{position:"before",icon:e.prefixIcon}}):e._e(),i("textarea",e._b({class:e.classes,attrs:{id:e.id},on:{input:function(t){return e.$emit("input",t.target.value)}}},"textarea",e.filteredProps,!1)),e._v(" "),e.suffixIcon?i("InputIcon",{attrs:{position:"after",icon:e.suffixIcon}}):e._e()],1),i("InputError",[e._v(e._s(s[0]))])]}}])})],1)},Oe=[],qe={name:"TextArea",mixins:[se],props:{label:{type:String},info:{type:String},placeholder:{type:String},type:{type:String,default:"text"},value:{type:String},rules:{type:String},validationName:{type:String},id:{type:String},variant:{type:String,default:"default"},prefixIcon:{type:String},suffixIcon:{type:String}},computed:{classes(){const e={error:this.error,prefixIcon:this.prefixIcon,suffixIcon:this.suffixIcon};return{state:[...$e("state",e)],default:$e("default",e)}[this.variant]}},components:{InputLabel:ce,InputWrapper:he,InputError:be,InputIcon:Pe}},Me=qe,De=Object(d["a"])(Me,Ie,Oe,!1,null,null,null),je=De.exports,Ne=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:"checkbox-"+e.variant},["card"===e.variant?i("CheckableCard",{attrs:{isChecked:e.isChecked}},[i("input",e._b({staticClass:"appearance-none absolute invisible",attrs:{type:"checkbox"},domProps:{checked:e.isChecked},on:{change:e.onChange}},"input",e.filteredProps,!1)),i("div",[e._v(e._s(e.label))])]):i("label",{class:["inline-flex cursor-pointer",e.info?"items-start":"items-center"]},[i("input",e._b({staticClass:"form-checkbox h-5 w-5",attrs:{type:"checkbox"},domProps:{checked:e.isChecked},on:{change:e.onChange}},"input",e.filteredProps,!1)),i("div",{staticClass:"ml-2"},[i("div",[e._v(e._s(e.label))]),e.info?i("div",{staticClass:"text-xs"},[e._v(e._s(e.info))]):e._e()])])],1)},Fe=[],Le=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("label",{class:["inline-flex cursor-pointer border-2 rounded-md border-primary px-4 py-3 hover:bg-primary hover:text-white",e.isChecked?"bg-primary text-white":"text-primary"]},[e._t("default")],2)},ze=[],Be={props:{isChecked:{type:Boolean}}},Re=Be,Ve=Object(d["a"])(Re,Le,ze,!1,null,null,null),Ue=Ve.exports,He={name:"Checkbox",mixins:[se],components:{CheckableCard:Ue},props:{checkValue:{type:[String,Boolean,Number]},label:{type:String},value:{type:Array},info:{type:String},variant:{type:String,default:"default"}},methods:{onChange(e){let t=[...this.value];e.target.checked?t.push(this.checkValue):t=t.filter(e=>e!==this.checkValue),this.$emit("input",t)}},computed:{isChecked(){return this.value&&this.value.includes(this.checkValue)}}},Ge=He,We=Object(d["a"])(Ge,Ne,Fe,!1,null,null,null),Ye=We.exports,Je=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:"radio-"+e.variant},["card"===e.variant?i("CheckableCard",{attrs:{isChecked:e.isChecked}},[i("input",e._b({staticClass:"appearance-none absolute invisible",attrs:{type:"radio"},domProps:{checked:e.isChecked},on:{change:e.onChange}},"input",e.filteredProps,!1)),i("div",[e._v(e._s(e.label))])]):i("label",{class:["inline-flex cursor-pointer",e.info?"items-start":"items-center"]},[i("input",e._b({staticClass:"form-checkbox h-5 w-5",attrs:{type:"radio"},domProps:{checked:e.isChecked},on:{change:e.onChange}},"input",e.filteredProps,!1)),i("div",{staticClass:"ml-2"},[i("div",[e._v(e._s(e.label))]),e.info?i("div",{staticClass:"text-xs"},[e._v(e._s(e.info))]):e._e()])])],1)},Qe=[],Ze={name:"Radio",mixins:[se],components:{CheckableCard:Ue},props:{checkValue:{type:[String,Boolean,Number]},label:{type:String},value:{type:[String,Boolean,Number]},info:{type:String},variant:{type:String,default:"default"}},methods:{onChange(){this.$emit("input",this.checkValue)}},computed:{isChecked(){return this.value===this.checkValue}}},Ke=Ze,Xe=Object(d["a"])(Ke,Je,Qe,!1,null,null,null),et=Xe.exports,tt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("InputWrapper",[i("InputLabel",{attrs:{label:e.label,info:e.info}}),i("ValidationProvider",{attrs:{rules:e.rules,name:e.validationName||e.label,vid:e.id},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[i("div",{staticClass:"relative"},[i("InputIcon",{attrs:{position:"before",icon:e.icon}}),i("select",e._b({class:e.classes,attrs:{id:e.id},on:{change:function(t){return e.$emit("input",t.target.value)}}},"select",e.filteredProps,!1),[e._t("default")],2),i("InputIcon",{attrs:{position:"after",icon:"chevron-down"}})],1),i("InputError",[e._v(e._s(s[0]))])]}}],null,!0)})],1)},it=[],st={name:"Select",mixins:[se],props:{label:{type:String},info:{type:String},error:{type:String},value:{type:String},validationName:{type:String},rules:{type:String},id:{type:String},variant:{type:String,default:"default"},icon:{type:String}},computed:{classes(){const e={error:this.error,prefixIcon:this.icon,suffixIcon:!0};return{state:["appearance-none",...$e("state",e)],default:["appearance-none",...$e("default",e)]}[this.variant]}},components:{InputWrapper:he,InputLabel:ce,InputError:be,InputIcon:Pe}},at=st,nt=Object(d["a"])(at,tt,it,!1,null,null,null),ot=nt.exports,rt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("option",e._b({},"option",e.$props,!1),[e._t("default")],2)},lt=[],ct={name:"SelectOption",props:{}},dt=ct,ut=Object(d["a"])(dt,rt,lt,!1,null,null,null),pt=ut.exports,mt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"text-display-lg mb-8"},[e._v(e._s(e.title))]),e._t("default")],2)},ht=[],vt={props:{title:{type:String}}},ft=vt,_t=Object(d["a"])(ft,mt,ht,!1,null,null,null),gt=_t.exports,bt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mb-12"},[i("div",{staticClass:"text-display-xs mb-4"},[e._v(e._s(e.title))]),i("div",{staticClass:"text-xs mb-4"},[e._v(e._s(e.info))]),e._t("default")],2)},yt=[],Ct={props:{title:{type:String},info:{type:String}}},wt=Ct,kt=Object(d["a"])(wt,bt,yt,!1,null,null,null),xt=kt.exports,Pt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",{staticClass:"my-8"},[e._t("default")],2)},$t=[],St={},Et=Object(d["a"])(St,Pt,$t,!1,null,null,null),Tt=Et.exports,At=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",e._g(e._b({staticClass:"py-1 rounded-md bg-white shadow-xs",attrs:{role:"menu","aria-orientation":"vertical","aria-labelledby":"user-menu"}},"div",e.$attrs,!1),e.$listeners),[e._t("default")],2)},It=[],Ot={},qt=Object(d["a"])(Ot,At,It,!1,null,null,null),Mt=qt.exports,Dt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",e._g(e._b({staticClass:"block px-4 py-2 text-md hover:bg-gray-100 cursor-pointer",attrs:{role:"menuitem"}},"div",e.$attrs,!1),e.$listeners),[e._t("default")],2)},jt=[],Nt={},Ft=Object(d["a"])(Nt,Dt,jt,!1,null,null,null),Lt=Ft.exports,zt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"relative"},[i("div",{on:{click:e.toggleMenu}},[e._t("button")],2),i("div",{class:["origin-top-left-10 absolute z-10 left-0 mt-2 w-48 rounded-md shadow-lg transform transition ease-in-out duration-200",e.isOpen?"opacity-100":"opacity-0 hidden"]},[e._t("menu",null,{closeMenu:e.closeMenu})],2)])},Bt=[],Rt={data(){return{isOpen:!1}},methods:{checkOutsideClick(e){this.$el.contains(e.target)||this.closeMenu()},openMenu(){this.isOpen=!0},closeMenu(){this.isOpen=!1},toggleMenu(){this.isOpen=!this.isOpen}},mounted(){setTimeout(()=>{document.addEventListener("click",this.checkOutsideClick)},0)},destroyed(){document.removeEventListener("click",this.checkOutsideClick)}},Vt=Rt,Ut=Object(d["a"])(Vt,zt,Bt,!1,null,null,null),Ht=Ut.exports,Gt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("notifications",{staticClass:"fixed top-0 z-20 w-64",staticStyle:{width:"410px"},attrs:{group:"notifications",position:"top center"},scopedSlots:e._u([{key:"body",fn:function(t){return[i("div",{class:["text-white p-2 m-2","vue-notification",t.item.type],on:{click:t.close}},[i("div",{staticClass:"notification-icon"}),i("div",{staticClass:"text-white"},[i("div",{staticClass:"text-lg"},[e._v(e._s(t.item.title))]),i("div",{staticClass:"text-sm",domProps:{innerHTML:e._s(t.item.text)}})])])]}}])})},Wt=[],Yt=(i("efa2"),{}),Jt=Object(d["a"])(Yt,Gt,Wt,!1,null,"7743ec3e",null),Qt=Jt.exports,Zt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["fixed z-40 inset-0 transform transition ease-in-out duration-300",e.isOpen?"opacity-100":"opacity-0 pointer-events-none"]},[i("div",{staticClass:"absolute w-full h-full bg-gray-500 opacity-75"}),i("div",{staticClass:"flex items-center justify-center min-h-screen"},[i("div",{ref:"dialog",staticClass:"opacity-100 z-50 max-w-xl shadow-xl overflow-hidden rounded-lg",attrs:{role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"}},[i("div",{staticClass:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},[i("div",{staticClass:"flex justify-between"},[i("div",{staticClass:"text-display-md"},[e._t("header")],2),i("Button",{attrs:{variant:"text",icon:"times"},on:{click:e.closeModal}})],1),i("div",{staticClass:"mt-4"},[e._t("body")],2)]),e.$slots.footer?i("div",{staticClass:"bg-gray-200 px-4 py-3 sm:px-6 flex justify-end"},[e._t("footer")],2):e._e()])])])},Kt=[],Xt={props:{closeModal:{type:Function},isOpen:{type:Boolean},closeClickOutside:{type:Boolean,default:!1}},methods:{checkOutsideClick(e){this.isOpen&&this.closeModal&&!this.$refs.dialog.contains(e.target)&&this.closeModal()}},mounted(){this.closeClickOutside&&document.addEventListener("click",this.checkOutsideClick)},destroyed(){this.closeClickOutside&&document.removeEventListener("click",this.checkOutsideClick)}},ei=Xt,ti=Object(d["a"])(ei,Zt,Kt,!1,null,null,null),ii=ti.exports,si=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"bg-G200 py-8 px-8 border-l-4 border-primary"},[i("div",{staticClass:"text-display-md mb-4"},[e._v(e._s(e.title))]),i("div",[e._t("default")],2)])},ai=[],ni={props:{title:{type:String}}},oi=ni,ri=Object(d["a"])(oi,si,ai,!1,null,null,null),li=ri.exports,ci=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["fixed z-30 top-0 right-0 full-height transform transition ease-in-out duration-500",e.isOpen?"translate-x-0":"translate-x-full"]},[i("div",{class:["min-h-screen w-64 bg-primary text-white py-4 px-4 "]},[e._t("default")],2)])},di=[],ui={props:{closePanel:{type:Function},isOpen:{type:Boolean},closeClickOutside:{type:Boolean,default:!1}},methods:{checkOutsideClick(e){this.isOpen&&this.closeModal&&!this.$refs.dialog.contains(e.target)&&this.closeModal()}},mounted(){this.closeClickOutside&&document.addEventListener("click",this.checkOutsideClick)},destroyed(){this.closeClickOutside&&document.removeEventListener("click",this.checkOutsideClick)}},pi=ui,mi=Object(d["a"])(pi,ci,di,!1,null,null,null),hi=mi.exports,vi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("InputWrapper",[i("InputLabel",{attrs:{label:e.label,info:e.info}}),i("ValidationProvider",{ref:"provider",attrs:{rules:e.rules,name:e.validationName||e.label,vid:e.id},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[i("AutocompleteVue",{attrs:{search:e.search,"default-value":e.defaultValue,placeholder:e.placeholder,"aria-label":e.placeholder,getResultValue:e.getResultValue,debounceTime:e.debounceTime},on:{submit:e.onItemSelect},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.rootProps,a=t.inputProps,n=t.inputListeners,o=t.resultListProps,r=t.resultListListeners,l=t.results,c=t.resultProps;return[i("div",e._b({},"div",s,!1),[e.prefixIcon?i("InputIcon",{attrs:{position:"before",icon:e.prefixIcon}}):e._e(),"checkbox"===a.type?i("input",e._g(e._b({directives:[{name:"model",rawName:"v-model",value:e.searchInput,expression:"searchInput"}],ref:"searchInput",class:e.classes,attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.searchInput)?e._i(e.searchInput,null)>-1:e.searchInput},on:{focus:e.handleFocus,blur:e.handleBlur,change:function(t){var i=e.searchInput,s=t.target,a=!!s.checked;if(Array.isArray(i)){var n=null,o=e._i(i,n);s.checked?o<0&&(e.searchInput=i.concat([n])):o>-1&&(e.searchInput=i.slice(0,o).concat(i.slice(o+1)))}else e.searchInput=a}}},"input",a,!1),n)):"radio"===a.type?i("input",e._g(e._b({directives:[{name:"model",rawName:"v-model",value:e.searchInput,expression:"searchInput"}],ref:"searchInput",class:e.classes,attrs:{type:"radio"},domProps:{checked:e._q(e.searchInput,null)},on:{focus:e.handleFocus,blur:e.handleBlur,change:function(t){e.searchInput=null}}},"input",a,!1),n)):i("input",e._g(e._b({directives:[{name:"model",rawName:"v-model",value:e.searchInput,expression:"searchInput"}],ref:"searchInput",class:e.classes,attrs:{type:a.type},domProps:{value:e.searchInput},on:{focus:e.handleFocus,blur:e.handleBlur,input:function(t){t.target.composing||(e.searchInput=t.target.value)}}},"input",a,!1),n)),i("InputIcon",{attrs:{position:"after"}},[e.loading?i("Spinner"):e._e(),i("div",{staticClass:"cursor-pointer ",on:{click:e.removeItem}},[!e.loading&&e.value&&e.getResultValue(e.value)===e.searchInput?i("Icon",{attrs:{icon:"times"}}):e._e()],1)],1),i("transition",{attrs:{name:"fade"}},[e.focused&&e.searchInput?i("div",{class:["origin-top-left-10 absolute z-10 left-0 mt-2 w-full rounded-md shadow-lg"]},[e._t("default",[l.length?i("Menu",e._g(e._b({},"Menu",o,!1),r),e._l(l,(function(t,s){return i("MenuItem",e._b({key:c[s].id,class:["cursor-pointer",c[s]["aria-selected"]&&"bg-gray-100"]},"MenuItem",c[s],!1),[i("div",[e._v(" "+e._s(e.getResultValue(t))+" ")])])})),1):i("Menu",[i("MenuItem",[e._v(" Aucun résultats ")])],1)],{results:l,resultListProps:o,resultListListeners:r,resultProps:c,getResultValue:e.getResultValue})],2):e._e()])],1)]}}],null,!0)}),i("InputError",[e._v(e._s(s[0]))])]}}])})],1)},fi=[],_i={components:{InputLabel:ce,InputWrapper:he,InputError:be,InputIcon:Pe},props:{loading:{type:Boolean},label:{type:String},info:{type:String},validationName:{type:String},rules:{type:String},id:{type:String},search:{type:Function,required:!0},defaultValue:{type:String,required:!1,default:""},placeholder:{type:String},getResultValue:{type:Function,default:e=>e},debounceTime:{type:Number,default:0},variant:{type:String,default:"default"},prefixIcon:{type:String}},computed:{classes(){const e={error:this.error,prefixIcon:this.prefixIcon};return{state:[...$e("state",e)],default:$e("default",e)}[this.variant]}},data(){return{show:!0,focused:!1,value:"",searchInput:"",results:[]}},methods:{removeItem(){this.value="",this.searchInput="",this.$emit("submit",null),this.$refs.provider.syncValue(null),this.$refs.provider.validate()},onItemSelect(e){this.value=e,e&&(this.searchInput=this.getResultValue(e)),this.$emit("submit",e),this.$refs.provider.syncValue(e),this.$refs.provider.validate(),this.$refs.searchInput.blur()},handleFocus(){this.focused=!0},handleBlur(){this.searchInput?this.searchInput=this.getResultValue(this.value):this.onItemSelect(null),this.focused=!1}}},gi=_i,bi=Object(d["a"])(gi,vi,fi,!1,null,null,null),yi=bi.exports,Ci=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Icon",e._g(e._b({attrs:{icon:"spinner",spin:""}},"Icon",e.$attrs,!1),e.$listeners))},wi=[],ki={},xi=Object(d["a"])(ki,Ci,wi,!1,null,null,null),Pi=xi.exports,$i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ValidationProvider",{attrs:{rules:e.rules,name:e.validationName||e.title,vid:e.id},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[i("CheckableGroupWrapper",{attrs:{title:e.title,info:e.info,id:e.id}},[i("div",{class:"flex flex-col relative"},[e.error?i("div",{staticClass:"absolute h-full bg-error leftBorder"}):e._e(),i("div",{class:["flex","vertical"===e.direction?"flex-col checkableGroup--verticalLayout":"flex-row flex-wrap checkableGroup--horizontalLayout"]},[e._t("default")],2)]),i("InputError",[e._v(e._s(s[0]))])],1)]}}],null,!0)})},Si=[],Ei=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.title?i("InputGroup",{attrs:{title:e.title,info:e.info,id:e.id}},[e._t("default")],2):i("InputWrapper",{attrs:{id:e.id}},[e._t("default")],2)],1)},Ti=[],Ai={components:{InputWrapper:he,InputGroup:xt},props:{title:{type:String},info:{type:String},id:{type:String}}},Ii=Ai,Oi=Object(d["a"])(Ii,Ei,Ti,!1,null,null,null),qi=Oi.exports,Mi={props:{title:{type:String},info:{type:String},error:{type:String},direction:{type:String,default:"vertical"},validationName:{type:String},rules:{type:String},id:{type:String}},components:{CheckableGroupWrapper:qi,InputError:be}},Di=Mi,ji=(i("c1ab"),i("8324"),Object(d["a"])(Di,$i,Si,!1,null,"55b46938",null)),Ni=ji.exports,Fi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("InputWrapper",[i("InputLabel",{attrs:{label:e.label,info:e.info}}),i("ValidationProvider",{ref:"provider",attrs:{rules:e.rules,name:e.validationName||e.label,vid:e.id},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[i(e.dynamicComponent,e._g(e._b({tag:"component",attrs:{"input-class":e.inputClasses,language:e.dateLanguage,"monday-first":!0}},"component",e.$attrs,!1),e.$listeners)),i("InputError",[e._v(e._s(s[0]))])]}}])})],1)},Li=[],zi=i("2430"),Bi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mb-1 text-xs"},[e._t("default")],2)},Ri=[],Vi={},Ui=Object(d["a"])(Vi,Bi,Ri,!1,null,null,null),Hi=Ui.exports,Gi={props:{label:{type:String},info:{type:String},id:{type:String},validationName:{type:String},variant:{type:String,default:"default"},rules:{type:String}},components:{InputLabel:ce,InputWrapper:he,InputError:be,InputInfo:Hi},data(){return{dateLanguage:zi["fr"],dynamicComponent:null}},mounted(){Promise.resolve().then(i.bind(null,"fa33")).then(e=>{this.dynamicComponent=e.default})},computed:{inputClasses(){const e={error:this.error};return{state:[...$e("state",e)],default:$e("default",e)}[this.variant]}}},Wi=Gi,Yi=Object(d["a"])(Wi,Fi,Li,!1,null,null,null),Ji=Yi.exports,Qi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:[e.color,"inline-flex text-sm px-4 py-1 flex-row items-center"]},[e._t("default"),e.onDelete?i("span",{staticClass:"ml-2 cursor-pointer",on:{click:e.onDelete}},[i("Icon",{attrs:{icon:"times"}})],1):e._e()],2)},Zi=[],Ki={props:{onDelete:{type:Function},color:{type:String,default:"bg-G200"}}},Xi=Ki,es=Object(d["a"])(Xi,Qi,Zi,!1,null,null,null),ts=es.exports,is=function(e){e.component("Button",ee),e.component("TextInput",Ae),e.component("TextArea",je),e.component("Icon",Q),e.component("Menu",Mt),e.component("MenuItem",Lt),e.component("Checkbox",Ye),e.component("Radio",et),e.component("Select",ot),e.component("SelectOption",pt),e.component("FormGroup",gt),e.component("Dropdown",Ht),e.component("Modal",ii),e.component("SidePanel",hi),e.component("CheckableGroup",Ni),e.component("InputGroup",xt),e.component("FormParagraph",Tt),e.component("Callout",li),e.component("Spinner",Pi),e.component("AutocompleteV2",yi),e.component("DatepickerV2",Ji),e.component("Tag",ts),e.use(R.a),e.component("NotificationsGroup",Qt),e.component("ValidationProvider",D["b"]),e.component("ValidationObserver",D["a"]),e.component("AutocompleteVue",M["a"]),Object(D["d"])({en:F,fr:N,bg:z,ro:L}),Object.keys(j).forEach(e=>{Object(D["c"])(e,{...j[e]})}),Object(D["d"])("fr")};const ss={debug:!1,enableLinkTracking:!0,requireConsent:!1,trackInitialView:!0,trackerFileName:"piwik"};function as(e){const t=new Promise((t,i)=>{const s=document.createElement("script");s.async=!0,s.defer=!0,s.src=e;const a=document.head||document.getElementsByTagName("head")[0];a.appendChild(s),s.onload=t,s.onerror=i});return t.catch(e=>{const t=`[vue-matomo] An error occurred trying to load ${e.target.src}. `;console.error(t)}),t}function ns(e,t){const{host:i,siteId:s,trackerFileName:a,trackerUrl:n}=t,o=n||`${i}/${a}.php`,r=window.Piwik.getTracker(o,s);e.prototype.$piwik=r,e.prototype.$matomo=r,t.requireConsent&&r.requireConsent(),t.trackInitialView&&r.trackPageView(),t.enableLinkTracking&&r.enableLinkTracking(),t.router&&t.router.afterEach(e=>{const i=window.location;let{protocol:s}=i;":"!==s.slice(-1)&&(s+=":");const a="hash"===t.router.mode?"/#":"",n=`${s}//${i.host}${a}${e.fullPath}`;e.meta.analyticsIgnore||(t.debug&&console.debug("[vue-matomo] Tracking "+n),r.setCustomUrl(n),r.trackPageView())})}function os(e,t={}){const i={...ss,...t},{host:s,trackerFileName:a}=i,n=`${s}/${a}.js`;as(n).then(()=>ns(e,i))}var rs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("PublicLayout",{attrs:{displayLanguagePicker:!0}},[s("PublicContainer",[s("div",{staticClass:"pt-4"},[s("div",{staticClass:"max-w-screen-lg mx-auto pb-20"},[s("LandingPageHero",{staticClass:"mt-20"}),s("LandingPageFirstSection")],1)])]),s("LandingPageBanner",{attrs:{cta:e.$t("landingPage.firstBanner.cta")}},[e._v(" "+e._s(e.$t("landingPage.firstBanner.text"))+" ")]),s("CreditWrapper",{attrs:{credit:"© Diego Inglez de Souza"}},[s("img",{staticClass:"h-128 w-full object-cover object-center",attrs:{src:i("dce0")}})]),s("PublicContainer",[s("div",{staticClass:"max-w-screen-lg mx-auto py-20"},[s("LandingPageSecondSection")],1)]),s("LandingPageBanner",{attrs:{cta:e.$t("landingPage.secondBanner.cta")}},[e._v(" "+e._s(e.$t("landingPage.secondBanner.text"))+" ")]),s("CreditWrapper",{attrs:{credit:"© Ville de Strasbourg"}},[s("img",{staticClass:"h-128 w-full object-cover object-top",attrs:{src:i("8503")}})]),s("PublicContainer",[s("div",{staticClass:"max-w-screen-lg mx-auto py-20"},[s("LandingPageThirdSection"),s("div",{staticClass:"text-center mt-40"},[s("h2",{staticClass:"text-display-lg text-secondary"},[e._v(" "+e._s(e.$t("landingPage.hero.subtitle"))+" ")]),s("LandingPageContactForm",{staticClass:"mx-auto"})],1)],1)]),s("CreditWrapper",{attrs:{credit:"© Ville de Strasbourg"}},[s("div",{staticClass:"grid grid-cols-3 w-full gap-0"},[s("img",{staticClass:"h-64 w-full object-cover object-top",attrs:{src:i("da0f")}}),s("img",{staticClass:"h-64 w-full object-cover object-top",attrs:{src:i("1676")}}),s("img",{staticClass:"h-64 w-full object-cover object-top",attrs:{src:i("8b2f")}})])])],1)},ls=[],cs=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("NavBar",{attrs:{stickyHeader:e.stickyHeader,displayLanguagePicker:e.displayLanguagePicker}}),e._t("default"),i("PublicFooter")],2)},ds=[],us=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{class:!e.sticky&&"hidden"},[i("NavBarSticky",{attrs:{menuDisplayed:e.menuDisplayed,toggleMenu:e.toggleMenu}})],1),i("div",{class:e.sticky&&"hidden"},[i("PublicContainer",[i("header",{staticClass:"py-4 flex flex-row justify-between items-center",attrs:{role:"navigation"}},[i("NavBarLogo"),i("div",{staticClass:"hidden md:flex flex-row"},[i("div",[i("router-link",{attrs:{to:"/connexion"}},[i("Button",{attrs:{variant:"primary"}},[e._v(e._s(e.$t("landingPage.header.connect")))])],1)],1),e.displayLanguagePicker?i("LanguagePicker",{staticClass:"ml-2"}):e._e()],1),i("NavBarMobileButton",{staticClass:"md:hidden",attrs:{onClick:e.toggleMenu}})],1)])],1),e.menuDisplayed?i("NavBarMobileMenu",{staticClass:"fixed top-0 right-0 mt-16 z-10",attrs:{closeMenu:e.closeMenu,displayLanguagePicker:e.displayLanguagePicker}}):e._e()],1)},ps=[],ms=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("router-link",{attrs:{to:"/landing"}},[s("div",{staticClass:"flex flex-row align-items"},[s("img",{staticClass:"marianne",attrs:{src:i("37bc"),alt:"france"}}),s("div",{staticClass:"ml-2 text-display-xs md:text-display-sm text-black"},[e._v(" Résorption-bidonvilles ")])])])],1)},hs=[],vs=(i("4316"),{}),fs=Object(d["a"])(vs,ms,hs,!1,null,"07ee7c4c",null),_s=fs.exports,gs=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"fixed z-10 top-0 left-0 w-full bg-white shadow"},[i("PublicContainer",[i("header",{staticClass:"py-4 flex flex-row justify-between items-center",attrs:{role:"navigation"}},[i("NavBarLogo"),i("div",{staticClass:"hidden md:block"},[i("router-link",{staticClass:"mr-2",attrs:{to:"/contact"}},[i("Button",{attrs:{variant:"secondary"}},[e._v(e._s(e.$t("landingPage.header.contact")))])],1),i("router-link",{attrs:{to:"/connexion"}},[i("Button",{attrs:{variant:"primary"}},[e._v(e._s(e.$t("landingPage.header.connect")))])],1)],1),i("NavBarMobileButton",{staticClass:"md:hidden",attrs:{onClick:e.toggleMenu}})],1)])],1)},bs=[],ys=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("button",{staticClass:"focus:outline-none",on:{click:e.onClick}},[i("svg",{staticClass:"block h-6 w-6",attrs:{stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"}},[i("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"}})])])},Cs=[],ws={props:{onClick:{type:Function,required:!0}}},ks=ws,xs=Object(d["a"])(ks,ys,Cs,!1,null,null,null),Ps=xs.exports,$s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container px-4 mx-auto"},[e._t("default")],2)},Ss=[],Es={},Ts=Object(d["a"])(Es,$s,Ss,!1,null,null,null),As=Ts.exports,Is={props:{menuDisplayed:{type:Boolean,required:!0},toggleMenu:{type:Function,required:!0}},components:{NavBarLogo:_s,Button:ee,NavBarMobileButton:Ps,PublicContainer:As}},Os=Is,qs=Object(d["a"])(Os,gs,bs,!1,null,null,null),Ms=qs.exports,Ds=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Dropdown",{scopedSlots:e._u([{key:"button",fn:function(){return[s("Button",{attrs:{variant:"primaryOutline",icon:"chevron-down"}},["fr"===e.$i18n.locale?s("img",{staticClass:"inline-block h-6",attrs:{src:i("3229")}}):e._e(),"en"===e.$i18n.locale?s("img",{staticClass:"inline-block h-6",attrs:{src:i("2361")}}):e._e(),"ro"===e.$i18n.locale?s("img",{staticClass:"inline-block h-6",attrs:{src:i("9d64")}}):e._e(),"bg"===e.$i18n.locale?s("img",{staticClass:"inline-block h-6",attrs:{src:i("ac65")}}):e._e(),e._v(" "+e._s(" ")+" "),s("span",{staticClass:"uppercase"},[e._v(e._s(e.$i18n.locale))])])]},proxy:!0},{key:"menu",fn:function(t){var a=t.closeMenu;return[s("Menu",{on:{click:a}},[s("MenuItem",{on:{click:function(t){return e.pickLang("fr")}}},[s("img",{staticClass:"inline-block h-6",attrs:{src:i("3229")}}),e._v(" FR ")]),s("MenuItem",{on:{click:function(t){return e.pickLang("en")}}},[s("img",{staticClass:"inline-block h-6",attrs:{src:i("2361")}}),e._v(" EN ")]),s("MenuItem",{on:{click:function(t){return e.pickLang("ro")}}},[s("img",{staticClass:"inline-block h-6",attrs:{src:i("9d64")}}),e._v(" RO ")]),s("MenuItem",{on:{click:function(t){return e.pickLang("bg")}}},[s("img",{staticClass:"inline-block h-6",attrs:{src:i("ac65")}}),e._v(" BG ")])],1)]}}])})},js=[],Ns={methods:{pickLang(e){this.$i18n.locale=e,Object(D["d"])(e)}}},Fs=Ns,Ls=Object(d["a"])(Fs,Ds,js,!1,null,null,null),zs=Ls.exports,Bs=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"origin-top-right right-0 mt-2 w-48 rounded-md shadow-lg"},[i("Menu",[i("MenuItem",[i("router-link",{attrs:{to:"/connexion"}},[e._v(" "+e._s(e.$t("landingPage.header.connect"))+" ")])],1),i("MenuItem",[i("router-link",{attrs:{to:"/contact"}},[e._v(" "+e._s(e.$t("landingPage.header.contact"))+" ")])],1),i("MenuItem",[i("LanguagePicker")],1)],1)],1)},Rs=[],Vs={props:{closeMenu:{required:!0,type:Function},displayLanguagePicker:{type:Boolean}},components:{LanguagePicker:zs,Menu:Mt,MenuItem:Lt},mounted(){setTimeout(()=>{document.addEventListener("click",this.checkOutsideClick)},0)},destroyed(){document.removeEventListener("click",this.checkOutsideClick)},methods:{checkOutsideClick(e){this.$el.contains(e.target)||this.closeMenu()}}},Us=Vs,Hs=Object(d["a"])(Us,Bs,Rs,!1,null,null,null),Gs=Hs.exports,Ws={props:{stickyHeader:{type:Boolean},displayLanguagePicker:{type:Boolean,default:!1}},components:{NavBarLogo:_s,NavBarSticky:Ms,Button:ee,NavBarMobileMenu:Gs,NavBarMobileButton:Ps,PublicContainer:As,LanguagePicker:zs},data(){return{scrollTop:0,menuDisplayed:!1}},methods:{handleScroll(){const e=this.$el.offsetHeight;this.scrollTop=window.scrollY-e},openMenu(){this.menuDisplayed=!0},closeMenu(){this.menuDisplayed=!1},toggleMenu(){this.menuDisplayed=!this.menuDisplayed}},computed:{sticky(){return this.scrollTop>200&&this.stickyHeader}},mounted(){window.addEventListener("scroll",this.handleScroll)},destroyed(){window.removeEventListener("scroll",this.handleScroll)}},Ys=Ws,Js=Object(d["a"])(Ys,us,ps,!1,null,null,null),Qs=Js.exports,Zs=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("footer",{staticClass:"bg-black text-white py-8",attrs:{role:"contentinfo"}},[i("PublicContainer",[i("div",{staticClass:"max-w-screen-lg mx-auto"},[i("div",{staticClass:"md:flex flex-row justify-between"},[i("ul",[i("li",[i("font-awesome-icon",{attrs:{icon:"envelope"}})],1),i("li",[i("h4",[e._v(e._s(e.$t("footer.contact")))])]),i("li",[i("h4",[i("a",{staticClass:"underline",attrs:{href:"mailto:contact@resorption-bidonvilles.beta.gouv.fr"}},[e._v("contact@resorption-bidonvilles.beta.gouv.fr")])])])]),i("ul",[i("li",[i("router-link",{attrs:{to:"/statistiques-publiques"}},[e._v(e._s(e.$t("footer.statistics")))])],1),i("li",[i("router-link",{attrs:{to:"/mentions-legales"}},[e._v(e._s(e.$t("footer.legal")))])],1)])])])])],1)},Ks=[],Xs={components:{PublicContainer:As}},ea=Xs,ta=Object(d["a"])(ea,Zs,Ks,!1,null,null,null),ia=ta.exports,sa={props:{stickyHeader:{type:Boolean,default:!0},displayLanguagePicker:{type:Boolean,default:!1}},components:{NavBar:Qs,PublicFooter:ia}},aa=sa,na=Object(d["a"])(aa,cs,ds,!1,null,null,null),oa=na.exports,ra=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"text-center"},[i("h1",{staticClass:"text-display-xl font"},[e._v(e._s(e.$t("landingPage.hero.title")))]),i("h2",{staticClass:"text-display-lg text-secondary mt-2"},[e._v(" "+e._s(e.$t("landingPage.hero.subtitle"))+" ")]),i("LandingPageContactForm",{staticClass:"mx-auto"})],1)},la=[],ca=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("form",{staticClass:"flex flex-row justify-center mt-4 w-full max-w-md",on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"hidden md:block border-2 border-G200 rounded-md flex-1 py-2 px-4 outline-none focus:border-G400",attrs:{placeholder:e.$t("landingPage.contactForm.email")},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),i("Button",{staticClass:"ml-1",attrs:{type:"submit",variant:"secondary"}},[e._v(e._s(e.$t("landingPage.contactForm.cta")))])],1)},da=[],ua={data(){return{email:""}},methods:{onSubmit(){this.$router.push("/contact"+(this.email?"?email="+encodeURIComponent(this.email):""))}}},pa=ua,ma=Object(d["a"])(pa,ca,da,!1,null,null,null),ha=ma.exports,va={components:{LandingPageContactForm:ha}},fa=va,_a=Object(d["a"])(fa,ra,la,!1,null,null,null),ga=_a.exports,ba=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("img",{staticClass:"full-width mx-auto",attrs:{src:i("8973")}}),s("div",{staticClass:"max-w-screen-sm mx-auto mt-8"},[s("LandingPageResponsiveEmbed",[s("iframe",{attrs:{src:"https://www.youtube.com/embed/AAD0QoOzIHM?modestbranding=1&autohide=1&showinfo=0",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})])],1),s("div",[s("div",{staticClass:"mt-24"},[s("div",{staticClass:"max-w-screen-sm mx-auto"},[s("div",{staticClass:"text-display-lg font-normal"},[e._v(" "+e._s(e.$t("landingPage.firstSection.context.title"))+" ")]),s("div",{staticClass:"text-display-lg"},[e._v(" "+e._s(e.$t("landingPage.firstSection.context.subtitle"))+" ")]),s("div",{staticClass:"mt-4"},[e._v(" "+e._s(e.$t("landingPage.firstSection.context.text"))+" ")])])]),s("div",{staticClass:"md:grid md:grid-cols-3 gap-16 mt-16"},[s("LandingPageFeatureBlock",{attrs:{icon:"map-marked-alt"}},[e._v(e._s(e.$t("landingPage.firstSection.features.position")))]),s("LandingPageFeatureBlock",{staticClass:"my-8 md:my-0",attrs:{icon:"chart-line"}},[e._v(e._s(e.$t("landingPage.firstSection.features.actions")))]),s("LandingPageFeatureBlock",{attrs:{icon:"comments"}},[e._v(e._s(e.$t("landingPage.firstSection.features.exchange")))])],1),s("div",{staticClass:"md:flex md:flex-row mt-16"},[s("LandingPageContextImage",{attrs:{label:e.$t("landingPage.firstSection.before")}},["fr"===e.$i18n.locale?s("img",{attrs:{src:i("dd94")}}):e._e(),"en"===e.$i18n.locale?s("img",{attrs:{src:i("ab52")}}):e._e(),"bg"===e.$i18n.locale?s("img",{attrs:{src:i("85ae")}}):e._e(),"ro"===e.$i18n.locale?s("img",{attrs:{src:i("b750")}}):e._e()]),s("div",{staticClass:"hidden md:block border-solid border-r-2 border-gray-200 m-20"}),s("LandingPageContextImage",{attrs:{label:e.$t("landingPage.firstSection.after")}},["fr"===e.$i18n.locale?s("img",{attrs:{src:i("cbe6")}}):e._e(),"en"===e.$i18n.locale?s("img",{attrs:{src:i("bb00")}}):e._e(),"bg"===e.$i18n.locale?s("img",{attrs:{src:i("2eea")}}):e._e(),"ro"===e.$i18n.locale?s("img",{attrs:{src:i("c8c7")}}):e._e()])],1),s("LandingPageUserFeedback",{staticClass:"mt-32"})],1)])},ya=[],Ca=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("font-awesome-icon",{attrs:{icon:e.icon,size:"3x"}}),i("h3",{staticClass:"text-display-lg font-normal mt-2"},[e._t("default")],2)],1)},wa=[],ka={name:"LandingPageFeatureBlock",props:{icon:{type:String,required:!0}}},xa=ka,Pa=Object(d["a"])(xa,Ca,wa,!1,null,null,null),$a=Pa.exports,Sa=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"text-secondary text-display-md"},[e._v(e._s(e.label))]),e._t("default")],2)},Ea=[],Ta={props:{label:{type:String,required:!0}}},Aa=Ta,Ia=Object(d["a"])(Aa,Sa,Ea,!1,null,null,null),Oa=Ia.exports,qa=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"max-w-screen-sm mx-auto relative mt-16"},[i("LandingPageUserFeedbackSection",{attrs:{active:1===e.active,text:e.$t("landingPage.firstSection.feedback.1.text"),author:e.$t("landingPage.firstSection.feedback.1.author")}}),i("LandingPageUserFeedbackSection",{attrs:{active:2===e.active,text:e.$t("landingPage.firstSection.feedback.2.text"),author:e.$t("landingPage.firstSection.feedback.2.author")}}),i("LandingPageUserFeedbackSection",{attrs:{active:3===e.active,text:e.$t("landingPage.firstSection.feedback.3.text"),author:e.$t("landingPage.firstSection.feedback.3.author")}})],1),i("div",{staticClass:"mt-2 text-center"},[i("LandingPageUserFeedbackBullet",{attrs:{onClick:function(){return e.setSection(1)},active:1===e.active}}),i("LandingPageUserFeedbackBullet",{attrs:{onClick:function(){return e.setSection(2)},active:2===e.active}}),i("LandingPageUserFeedbackBullet",{attrs:{onClick:function(){return e.setSection(3)},active:3===e.active}})],1)])},Ma=[],Da=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("input",{class:["appearance-none h-3 w-3 mx-1 cursor-pointer rounded-full border border-black outline-none",e.active&&"bg-black border-transparent"],attrs:{type:"radio"},domProps:{checked:e.active},on:{click:e.onClick}})},ja=[],Na={props:{active:{type:Boolean},onClick:{type:Function}}},Fa=Na,La=Object(d["a"])(Fa,Da,ja,!1,null,null,null),za=La.exports,Ba=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:e.active?"transition duration-500 block opacity-100 visible":"invisible opacity-0 absolute"},[i("div",{staticClass:"relative text-xl feedbackText"},[e._v(e._s(e.text))]),i("div",{staticClass:"text-lg font-light"},[e._v(e._s(e.author))])])},Ra=[],Va={props:{text:{type:String},author:{type:String},active:{type:Boolean}}},Ua=Va,Ha=(i("1210"),Object(d["a"])(Ua,Ba,Ra,!1,null,"a695c1c4",null)),Ga=Ha.exports,Wa={data(){return{active:1,interval:null}},methods:{setNextSection(){1===this.active?this.active=2:2===this.active?this.active=3:3===this.active&&(this.active=1)},setSection(e){this.active=e,clearInterval(this.interval),this.interval=setInterval(this.setNextSection,8e3)}},mounted(){this.interval=setInterval(this.setNextSection,8e3)},beforeDestroy(){clearInterval(this.interval)},components:{LandingPageUserFeedbackBullet:za,LandingPageUserFeedbackSection:Ga}},Ya=Wa,Ja=Object(d["a"])(Ya,qa,Ma,!1,null,null,null),Qa=Ja.exports,Za=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wrapper",style:e.paddingStyle},[e._t("default")],2)},Ka=[],Xa={props:{videoRatio:{type:String,default:"56.25%"}},computed:{paddingStyle(){return"padding-bottom: "+this.videoRatio}}},en=Xa,tn=(i("379b"),Object(d["a"])(en,Za,Ka,!1,null,null,null)),sn=tn.exports,an={components:{LandingPageContextImage:Oa,LandingPageFeatureBlock:$a,LandingPageUserFeedback:Qa,LandingPageResponsiveEmbed:sn}},nn=an,on=Object(d["a"])(nn,ba,ya,!1,null,null,null),rn=on.exports,ln=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"md:grid md:grid-cols-3 md:gap-16"},[s("LandingPageDataBlock",{attrs:{line1:e.$t("landingPage.secondSection.data.1.line1"),line2:e.$t("landingPage.secondSection.data.1.line2"),line3:e.$t("landingPage.secondSection.data.1.line3")}}),s("LandingPageDataBlock",{staticClass:"my-4 md:my-0",attrs:{line1:e.$t("landingPage.secondSection.data.2.line1"),line2:e.$t("landingPage.secondSection.data.2.line2"),line3:e.$t("landingPage.secondSection.data.2.line3")}}),s("LandingPageDataBlock",{attrs:{line1:e.$t("landingPage.secondSection.data.3.line1"),line2:e.$t("landingPage.secondSection.data.3.line2"),line3:e.$t("landingPage.secondSection.data.3.line3")}})],1),s("div",{staticClass:"max-w-screen-sm mx-auto "},[s("h2",{staticClass:"mt-16"},[s("span",{staticClass:"text-display-lg font-normal"},[e._v(e._s(e.$t("landingPage.secondSection.title")))]),s("span",{staticClass:"text-display-lg block"},[e._v(e._s(e.$t("landingPage.secondSection.subtitle")))])]),s("div",{staticClass:"mt-8"},[e._v(" "+e._s(e.$t("landingPage.secondSection.firstParagraph"))+" ")]),s("div",{staticClass:"mt-8"},[s("span",{staticClass:"font-bold"},[e._v(e._s(e.$t("landingPage.secondSection.secondParagraph.bold")))]),e._v(" "+e._s(e.$t("landingPage.secondSection.secondParagraph.normal"))+" ")]),s("div",[s("a",{staticClass:"link",attrs:{href:"https://www.ecologie.gouv.fr/resorption-des-campements-illicites-et-des-bidonvilles"}},[e._v(e._s(e.$t("landingPage.secondSection.secondParagraph.link")))])]),"fr"===e.$i18n.locale?s("img",{staticClass:"mt-20 w-full",attrs:{src:i("d67e")}}):e._e(),"en"===e.$i18n.locale?s("img",{staticClass:"mt-20 w-full",attrs:{src:i("1239")}}):e._e(),"bg"===e.$i18n.locale?s("img",{staticClass:"mt-20 w-full",attrs:{src:i("5549")}}):e._e(),"ro"===e.$i18n.locale?s("img",{staticClass:"mt-20 w-full",attrs:{src:i("cfd5")}}):e._e()]),s("div",{staticClass:"mt-20 md:flex md:flex-row items-center"},[s("div",{staticClass:"block md:hidden mb-4 text-display-lg"},[e._v(" "+e._s(e.$t("landingPage.secondSection.video.text"))+" ")]),s("div",{staticClass:"md:w-1/2 md:mr-16 bg-gray-500"},[s("LandingPageResponsiveEmbed",[s("iframe",{attrs:{src:"https://www.dailymotion.com/embed/video/x7mf87e",allowfullscreen:"",allow:"autoplay; fullscreen"}})])],1),s("div",{staticClass:"hidden md:blockw-1/2 text-display-lg"},[e._v(" "+e._s(e.$t("landingPage.secondSection.video.text"))+" ")])])])},cn=[],dn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"text-md"},[e._v(e._s(e.line1))]),i("div",{staticClass:"text-display-xl leading-none"},[e._v(e._s(e.line2))]),i("div",{staticClass:"text-md"},[e._v(e._s(e.line3))])])},un=[],pn={name:"LandingPageDataBlock",props:{line1:{type:String,required:!0},line2:{type:String,required:!0},line3:{type:String,required:!0}}},mn=pn,hn=Object(d["a"])(mn,dn,un,!1,null,null,null),vn=hn.exports,fn={components:{LandingPageDataBlock:vn,LandingPageResponsiveEmbed:sn}},_n=fn,gn=Object(d["a"])(_n,ln,cn,!1,null,null,null),bn=gn.exports,yn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"max-w-screen-sm mx-auto"},[i("h2",{staticClass:"text-display-lg"},[e._v(" "+e._s(e.$t("landingPage.thirdSection.title"))+" ")]),i("div",{staticClass:" mt-8"},[i("span",{staticClass:"font-bold"},[e._v(e._s(e.$t("landingPage.thirdSection.firstParagraph.bold")))]),e._v(" "+e._s(e.$t("landingPage.thirdSection.firstParagraph.normal"))+" ")]),e._m(0),i("div",{staticClass:"grid grid-cols-1 md:grid-cols-2 gap-y-8 md:gap-x-16"},[i("LandingPageBilanBlock",{attrs:{icon:"users",text:e.$t("landingPage.thirdSection.bilan.1.text")}}),i("LandingPageBilanBlock",{attrs:{icon:"hand-holding-medical",text:e.$t("landingPage.thirdSection.bilan.3.text")}}),i("LandingPageBilanBlock",{attrs:{icon:"map-marker-alt",text:e.$t("landingPage.thirdSection.bilan.4.text")}}),i("LandingPageBilanBlock",{attrs:{icon:"file-signature",text:e.$t("landingPage.thirdSection.bilan.6.text")}}),i("LandingPageBilanBlock",{attrs:{icon:"book",text:e.$t("landingPage.thirdSection.bilan.5.text"),info:e.$t("landingPage.thirdSection.bilan.5.info")}})],1),i("div",{staticClass:"text-center mt-8"},[i("a",{attrs:{href:"https://www.gouvernement.fr/sites/default/files/contenu/piece-jointe/2019/09/bilan_campements_2018_vecran.pdf"}},[i("Button",{attrs:{variant:"secondary"}},[e._v(" "+e._s(e.$t("landingPage.thirdSection.cta"))+" ")])],1)])]),i("div",{staticClass:"mt-32"},[i("div",{staticClass:"max-w-screen-sm mx-auto"},[i("h2",{staticClass:"text-display-lg"},[e._v(" "+e._s(e.$t("landingPage.thirdSection.secondParagraph.title"))+" ")]),i("div",{staticClass:"mt-4"},[e._v(" "+e._s(e.$t("landingPage.thirdSection.secondParagraph.body.text1"))+" "),i("a",{staticClass:"link",attrs:{href:"https://www.ecologie.gouv.fr/resorption-des-campements-illicites-et-des-bidonvilles"}},[e._v(e._s(e.$t("landingPage.thirdSection.secondParagraph.body.link1")))]),e._v(", "+e._s(e.$t("landingPage.thirdSection.secondParagraph.body.text2"))+". "),i("span",{staticClass:"font-bold"},[e._v(" "+e._s(e.$t("landingPage.thirdSection.secondParagraph.body.text3"))+" ")]),e._v(" "+e._s(e.$t("landingPage.thirdSection.secondParagraph.body.text4"))+" "),i("a",{staticClass:"link",attrs:{href:"https://beta.gouv.fr/startups/resorption-bidonvilles.html"}},[e._v(e._s(e.$t("landingPage.thirdSection.secondParagraph.body.link2"))+".")])]),i("div",{staticClass:"mt-8"},[i("div",[e._v(" "+e._s(e.$t("landingPage.thirdSection.secondParagraph.items.title"))+" ")]),i("ul",{staticClass:"list-disc ml-8"},[i("li",[i("a",{staticClass:"link",attrs:{href:"https://entrepreneur-interet-general.etalab.gouv.fr/defis/2019/resorption-bidonvilles.html"}},[e._v(e._s(e.$t("landingPage.thirdSection.secondParagraph.items.1.link")))]),e._v(" "+e._s(e.$t("landingPage.thirdSection.secondParagraph.items.1.text"))+" ")]),i("li",[i("a",{staticClass:"link",attrs:{href:"https://ec.europa.eu/info/funding-tenders/opportunities/portal/screen/how-to-participate/org-details/999999999/project/881989/program/31076817/details"}},[e._v(e._s(e.$t("landingPage.thirdSection.secondParagraph.items.2.link")))]),e._v(e._s(e.$t("landingPage.thirdSection.secondParagraph.items.2.text"))+" ")]),i("li",[i("a",{staticClass:"link",attrs:{href:"https://beta.gouv.fr/approche/fast/03-fast.html"}},[e._v(e._s(e.$t("landingPage.thirdSection.secondParagraph.items.3.link")))]),e._v(" "+e._s(e.$t("landingPage.thirdSection.secondParagraph.items.3.text"))+" ")]),i("li",[i("a",{staticClass:"link",attrs:{href:"https://www.modernisation.gouv.fr/action-publique-2022/fonds-pour-la-transformation-de-laction-publique/ftap-112-millions-deuros-pour-les-19-projets-laureats"}},[e._v(e._s(e.$t("landingPage.thirdSection.secondParagraph.items.4.link")))]),e._v(" "+e._s(e.$t("landingPage.thirdSection.secondParagraph.items.4.text"))+" ")])])]),e._m(1),e._m(2)])])])},Cn=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"flex flex-row items-center my-8"},[i("div",{staticClass:"bg-gray-500 h-px flex-1"}),i("div",{staticClass:"inline-block bg-black text-white text-display-md px-4"},[e._v(" 2019 ")]),i("div",{staticClass:"bg-gray-500 h-px flex-1"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flex flex-row flex-wrap items-center justify-between mt-8"},[s("a",{attrs:{href:"https://solidarites-sante.gouv.fr/"}},[s("img",{staticClass:"h-24 m-2",attrs:{src:i("6ead")}})]),s("a",{attrs:{href:"https://ec.europa.eu/info/index_en"}},[s("img",{staticClass:"h-24 my-2",attrs:{src:i("e61f")}})])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flex flex-row flex-wrap items-center justify-between mt-8"},[s("a",{attrs:{href:"https://beta.gouv.fr/approche/incubateurs/mtes.html"}},[s("img",{staticClass:"h-24 m-2",attrs:{src:i("0f88")}})]),s("a",{attrs:{href:"https://beta.gouv.fr/"}},[s("img",{staticClass:"h-20 m-2",attrs:{src:i("3b8a")}})]),s("a",{attrs:{href:"https://entrepreneur-interet-general.etalab.gouv.fr/defis/2019/resorption-bidonvilles.html"}},[s("img",{staticClass:"h-16 m-2",attrs:{src:i("77c5")}})])])}],wn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"flex flex-row"},[i("div",[i("font-awesome-icon",{staticClass:"text-secondary",attrs:{icon:e.icon,size:"2x"}})],1),i("div",{staticClass:"ml-2"},[i("span",{staticClass:"font-bold text-display-md"},[e._v(e._s(e.text))]),i("span",[e._v(e._s(e.info))])])])},kn=[],xn={name:"LandingPageBilanBlock",props:{icon:{required:!0},text:{type:String,required:!0},info:{type:String}}},Pn=xn,$n=Object(d["a"])(Pn,wn,kn,!1,null,null,null),Sn=$n.exports,En={components:{LandingPageBilanBlock:Sn,Button:ee}},Tn=En,An=Object(d["a"])(Tn,yn,Cn,!1,null,null,null),In=An.exports,On=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"bg-corail text-white full-width text-center py-8"},[i("PublicContainer",[i("div",{staticClass:"max-w-screen-md mx-auto"},[i("h2",{staticClass:"text-display-lg text-white "},[e._t("default")],2),i("div",{staticClass:"pt-4"},[i("router-link",{attrs:{to:"/contact"}},[i("Button",{attrs:{variant:"primary"}},[e._v(e._s(e.cta))])],1)],1)])])],1)},qn=[],Mn={components:{Button:ee,PublicContainer:As},props:{cta:{type:String,required:!0}}},Dn=Mn,jn=Object(d["a"])(Dn,On,qn,!1,null,null,null),Nn=jn.exports,Fn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"relative"},[e._t("default"),i("div",{staticClass:"absolute bottom-0 right-0 mr-4 text-white"},[e._v(" "+e._s(e.credit)+" ")])],2)},Ln=[],zn={props:{credit:{type:String}}},Bn=zn,Rn=Object(d["a"])(Bn,Fn,Ln,!1,null,null,null),Vn=Rn.exports,Un={components:{CreditWrapper:Vn,PublicContainer:As,PublicLayout:oa,LandingPageHero:ga,LandingPageFirstSection:rn,LandingPageSecondSection:bn,LandingPageThirdSection:In,LandingPageBanner:Nn,LandingPageContactForm:ha}},Hn=Un,Gn=Object(d["a"])(Hn,rs,ls,!1,null,null,null),Wn=Gn.exports,Yn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[i("NavBar"),i("Form",e._b({on:{complete:e.onComplete},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}},"Form",e.formDefinition,!1))],1)])},Jn=[],Qn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("header",{attrs:{role:"navigation"}},[i("div",{staticClass:"topbar"},[i("div",{staticClass:"topbar-container"},[i("router-link",{staticClass:"topbar-home",attrs:{to:"/landing"}},[i("img",{staticClass:"topbar-marianne",attrs:{src:"/img/logo-marianne.svg",alt:"france"}}),i("span",{staticClass:"topbar-domain"},[e._v("resorption-bidonvilles.")]),i("img",{staticClass:"topbar-betagouv",attrs:{src:"/img/betagouvfr.svg",alt:"beta.gouv.fr"}})]),i("span",{ref:"menu",staticClass:"topbar-menu",on:{click:e.showSidebar}},[e._v("Menu")]),i("ul",{staticClass:"nav__links"},e._l(e.items,(function(t){return i("li",{key:t.target,staticClass:"nav__item"},[t.items?i("div",{staticClass:"dropdown"},[e._v(e._s(t.label)+" "),i("div",{staticClass:"dropdown-content"},e._l(t.items,(function(t){return i("router-link",{key:t.target,class:Object.assign(t.classes||{},t.group?{active:e.isCurrentRouteAMemberOf(t.group)}:{}),attrs:{to:t.target}},[e._v(e._s(t.label))])})),1)]):i("router-link",{class:Object.assign(t.classes||{},t.group?{active:e.isCurrentRouteAMemberOf(t.group)}:{}),attrs:{to:t.target}},[e._v(e._s(t.label))])],1)})),0)],1)]),i("div",{ref:"sidebar",staticClass:"sidebar",class:{opened:e.isSidebarOpened}},[i("div",{staticClass:"sidebar-cross",on:{click:e.hideSidebar}},[i("img",{attrs:{src:"/img/cross.svg",alt:"Fermer"}})]),i("ul",{staticClass:"nav__links"},e._l(e.items,(function(t){return i("li",{key:t.target,staticClass:"nav__item"},[t.items?i("div",{staticClass:"dropdown"},[e._v(e._s(t.label)+" "),i("div",{staticClass:"dropdown-content"},e._l(t.items,(function(t){return i("router-link",{key:t.target,class:Object.assign(t.classes||{},t.group?{active:e.isCurrentRouteAMemberOf(t.group)}:{}),attrs:{to:t.target}},[e._v(e._s(t.label))])})),1)]):i("router-link",{class:Object.assign(t.classes||{},t.group?{active:e.isCurrentRouteAMemberOf(t.group)}:{}),attrs:{to:t.target}},[e._v(e._s(t.label))])],1)})),0)])])},Zn=[];let Kn=null;function Xn(e){null===Kn||Kn.closed?Kn=window.open(e,"_blank"):(Kn.location=e,Kn.location.reload(),Kn.focus())}var eo=i("227c");const to={MISSING_TOKEN:1,EXPIRED_OR_INVALID_TOKEN:2};function io(e,t){let i=null;try{i=this.responseText?JSON.parse(this.responseText):this.responseText}catch(a){return void t({user_message:"Une erreur inconnue est survenue",developer_message:"Failed to parsed the server's response"})}if(!0!==i.success||void 0===i.response)if(this.status/200<1||this.status/200>=1.5){const e=i&&i.error||i||{};switch(e.code){case to.MISSING_TOKEN:case to.EXPIRED_OR_INVALID_TOKEN:xo(s["default"].prototype.$piwik),Of.push("/");break;default:t(e.user_message?e:{user_message:"Une erreur inconnue est survenue",developer_message:"The server responded with an error status but did not provide error details"})}}else e(i);else e(i.response)}function so(e){e()}function ao(e,t,i,s={}){const a=new XMLHttpRequest,n=new Promise((n,o)=>{if(a.open(e,"https://api.resorption-bidonvilles.beta.gouv.fr"+t),Object.keys(s).forEach(e=>{a.setRequestHeader(e,s[e])}),!Object.prototype.hasOwnProperty.call(s,"x-access-token")){const e=So();null!==e&&a.setRequestHeader("x-access-token",e)}a.setRequestHeader("x-app-version",eo),a.onload=io.bind(a,n,o),a.onerror=so.bind(a,o),a.ontimeout=so.bind(a,o),void 0!==i?(Object.prototype.hasOwnProperty.call(s,"Content-Type")||a.setRequestHeader("Content-Type","application/json"),a.send(JSON.stringify(i))):a.send()});return n.abort=()=>{a.abort()},n}function no(e,t,i){return ao("GET",e,t,i)}function oo(e,t,i){return ao("POST",e,t,i)}function ro(e,t,i){return ao("DELETE",e,t,i)}function lo(e,t,i){return ao("PATCH",e,t,i)}function co(e,t,i){return ao("PUT",e,t,i)}function uo(e){return Xn(`${e}${-1===e.indexOf("?")?"?":"&"}accessToken=${encodeURIComponent(So())}`)}let po=null;function mo(){return null!==po}function ho(){return no("/config").then(e=>(ko(),po=e,e))}function vo(){po=null}function fo(){return po}function _o(e,t){if(null===po)return;const i=e.split(".");let s=po;while(i.length>1){if(void 0===s)return;s=s[i.shift()]}s[i[0]]=t}function go(e){if(null===po||null===po.user)return null;const[t,i]=e.split(".");if(!Object.prototype.hasOwnProperty.call(po.user.permissions,t)||!Object.prototype.hasOwnProperty.call(po.user.permissions[t],i))return null;const s=po.user.permissions[t][i];return!0!==s.allowed?null:s}function bo(e){const[t,i,s]=e.split("."),a=go(`${t}.${i}`);return null!==a&&(void 0===s||!0===a[s])}function yo(e){return oo("/changelog",{version:e})}function Co(){return null!==po&&po.user.charte_engagement_a_jour}function wo(e,t){return oo("/signin",{email:e,password:t}).then(e=>(localStorage.setItem("token",e.token),e))}function ko(){return no("/refreshToken").then(e=>{localStorage.setItem("token",e.token)})}function xo(e){vo(),localStorage.removeItem("token"),e&&(e.resetUserId(),e.setCustomVariable(1,"superuser",null),e.setCustomVariable(2,"structure",null),e.setCustomVariable(3,"niveau_geo",null),e.setCustomVariable(4,"geo_nom",null))}function Po(){return null!==localStorage.getItem("token")}function $o(){return!0===localStorage.getItem("logged_once")}function So(){return localStorage.getItem("token")}function Eo(e){return oo("/users",e)}function To(){return no("/me")}function Ao(e){return oo("/me",e)}function Io(){return no("/users")}function Oo(e){return no("/users/"+e)}function qo(e,t){return oo(`/users/${e}/sendActivationLink`,t)}function Mo(e){return oo(`/users/${e}/denyAccess`)}function Do(e){return no(`/activation-tokens/${encodeURIComponent(e)}/check`)}function jo(e){return no(`/password-tokens/${encodeURIComponent(e)}/check`)}function No(e,t){return oo(`/users/${e}/activate`,t)}function Fo(e,t){return oo(`/users/${e}/newPassword`,t)}function Lo(e,t){return oo(`/users/${e}/upgrade`,t)}function zo(e){return ro("/users/"+e)}function Bo(e){return oo("/users/new-password",{email:e})}function Ro(){return no("/directory")}function Vo(e){return no("/organizations/search?query="+encodeURIComponent(e))}function Uo(e,t){return co(`/users/${e}/charte_engagement`,{version_de_charte:t})}var Ho={anonymous:[{label:"Connexion",target:"/connexion"},{label:"Demander un accès",target:"/contact"},{label:"Aide",items:[{label:"Nous contacter",target:"/feedback"},{label:"Mentions légales",target:"/mentions-legales"},{label:"CGUs",target:"/conditions-d-utilisation"}]}],loading:[{label:"Aide",items:[{label:"Nous contacter",target:"/feedback"},{label:"Mentions légales",target:"/mentions-legales"},{label:"CGUs",target:"/conditions-d-utilisation"}]},{label:"Déconnexion",target:"/deconnexion"}],loaded:[{label:"Covid-19",target:"/covid-19",classes:{"router-link--covid":!0}},{label:"Sites",items:[{label:"Liste des sites",target:"/liste-des-sites",group:"townList"},{label:"Déclarer un site",target:"/nouveau-site",group:"townCreation"}]},{label:"Dispositifs",items:[{label:"Liste des dispositifs",target:"/liste-des-dispositifs"},{label:"Déclarer un dispositif",target:"/nouveau-dispositif"}]},{label:"Annuaire",target:"/annuaire",group:"directory"},{label:"Administration",items:[{label:"Liste des utilisateurs",target:"/liste-des-utilisateurs",group:"users"},{label:"Créer un utilisateur",target:"/nouvel-utilisateur",group:"userCreation"},{label:"Statistiques",target:"/statistiques",group:"stats"},{label:"Historique des activités",target:"/historique-des-activites",group:"admin"}]},{label:"Mon compte",items:[{label:"Gérer mon compte",target:"/mon-compte",group:"me"},{label:"Déconnexion",target:"/deconnexion"}]},{label:"Aide",items:[{label:"Nous contacter",target:"/feedback"},{label:"Mentions légales",target:"/mentions-legales"},{label:"CGUs",target:"/conditions-d-utilisation"}]}]},Go={data(){return{isSidebarOpened:!1}},computed:{items(){return!0!==Po()?Ho.anonymous:!0!==mo()||!0!==Co()?Ho.loading:this.filterItems(Ho.loaded)}},methods:{filterItems(e){return e.map(e=>e.items?Object.assign(e,{items:e.items.filter(e=>this.isItemAllowed(e))}):e).filter(e=>e.items?e.items.length>0:this.isItemAllowed(e))},isItemAllowed(e){const t=this.$router.resolve({path:e.target}).route.meta.permissions;return!t||t.every(e=>bo(e))},isCurrentRouteAMemberOf(e){return this.$route.matched.some(t=>t.meta.group===e)},showSidebar(){this.isSidebarOpened=!0},hideSidebar(){this.isSidebarOpened=!1},checkClickOutsideSidebar(e){this.$refs.sidebar.contains(e.target)||e.target===this.$refs.menu||this.hideSidebar()}},mounted(){document.addEventListener("click",this.checkClickOutsideSidebar)},destroyed(){document.removeEventListener("click",this.checkClickOutsideSidebar)}},Wo=Go,Yo=Wo,Jo=(i("17d9"),Object(d["a"])(Yo,Qn,Zn,!1,null,"b24b83de",null)),Qo=Jo.exports,Zo=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form",attrs:{id:"top"}},[i("header",{staticClass:"form-header"},[i("div",{staticClass:"container"},[i("h1",{staticClass:"form-title"},[e._v(e._s(e.title||"Formulaire"))])])]),i("div",{staticClass:"container"},[i("div",{staticClass:"form-body"},[i("div",{staticClass:"container"},[e.description?i("SlideNote",{attrs:{title:e.descriptionTitle,content:e.description}}):e._e(),e._l(e.fullSections,(function(t){return i("section",{staticClass:"formSection"},[i("header",{staticClass:"formSection-header"},[t.title?i("h1",{staticClass:"formSection-title"},[i("span",{staticClass:"formSection-icon"},[i("font-awesome-icon",{attrs:{icon:t.icon||"flag"}})],1),e._v(" "+e._s(t.title)+" ")]):e._e(),t.description?i("p",{staticClass:"formSection-description",domProps:{innerHTML:e._s(t.description)}}):e._e()]),i("div",[i("span",{staticStyle:{display:"none"}},[e._v(e._s(e.refreshId))]),e._l(t.inputs,(function(t,s){return e.isInputVisible(t)?i("Input",e._b({key:s,attrs:{id:s,errors:e.errors&&e.errors.fields&&e.errors.fields[s]||void 0,disabled:e.isInputDisabled(t),alertMessage:e.getInputAlert(t)},on:{change:e.onDataChange},model:{value:e.data[s],callback:function(t){e.$set(e.data,s,t)},expression:"data[inputId]"}},"Input",t,!1)):e._e()}))],2)])})),e.errors&&e.errors.main?i("div",{staticClass:"notification error"},[i("span",[e._v(e._s(e.wording.error+" : "+e.errors.main))]),e.numberOfFilteredErrors>0?i("p",[e._v("Les champs en erreur sont : "),i("ul",e._l(e.filteredErrors,(function(t,s){return i("li",[i("a",{on:{click:function(t){e.$router.replace("#top",(function(){return e.$router.replace("#"+s)}))}}},[e._v(e._s((e.getInputById(s)||{}).label||"inconnu"))])])})),0)]):e._e()]):e._e(),i("section",{staticClass:"form-stepNav"},[e.submitPrefix?i("p",{domProps:{innerHTML:e._s(e.submitPrefix)}}):e._e(),i("button",{staticClass:"form-stepButton button",attrs:{"data-cy-button":"submit",disabled:e.pending},on:{click:e.submit}},[e.pending?i("img",{attrs:{src:"/img/spinner_light.svg",width:"20"}}):i("span",[e._v(e._s(e.wording.submit))])])])],2)])])])},Ko=[],Xo=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form__group inputContainer",class:{error:e.errors.length>0},attrs:{id:e.id}},[i("label",{staticClass:"input-label"},[e._v(e._s(e.label)),e.mandatory?i("sup",{staticClass:"input-mandatory"},[e._v(" (*)")]):e._e()]),e.alertMessage?i("p",{staticClass:"notification warning"},[e._v(e._s(e.alertMessage))]):i("div",[e.description?i("p",{staticClass:"input-description",domProps:{innerHTML:e._s(e.description)}}):e._e(),e.errors.length>0?i("div",{staticClass:"notification error"},e._l(e.errors,(function(t){return i("ul",[i("li",[e._v(e._s(t))])])})),0):e._e(),"text"===e.type?i("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],staticClass:"input input--text",attrs:{"data-cy-field":e.id,type:"text",id:"input-"+e.id,disabled:e.disabled,readonly:e.disabled},domProps:{value:e.data},on:{input:function(t){t.target.composing||(e.data=t.target.value)}}},"input",e.props,!1)):e._e(),"hidden"===e.type?i("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],staticClass:"input input--hidden",attrs:{"data-cy-field":e.id,type:"hidden",id:"input-"+e.id,disabled:e.disabled,readonly:e.disabled},domProps:{value:e.data},on:{input:function(t){t.target.composing||(e.data=t.target.value)}}},"input",e.props,!1)):e._e(),"checkbox"===(e.showPassword?"text":"password")&&"password"===e.type?i("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],staticClass:"input input--password",attrs:{"data-cy-field":e.id,id:"input-"+e.id,disabled:e.disabled,readonly:e.disabled,type:"checkbox"},domProps:{checked:Array.isArray(e.data)?e._i(e.data,null)>-1:e.data},on:{change:function(t){var i=e.data,s=t.target,a=!!s.checked;if(Array.isArray(i)){var n=null,o=e._i(i,n);s.checked?o<0&&(e.data=i.concat([n])):o>-1&&(e.data=i.slice(0,o).concat(i.slice(o+1)))}else e.data=a}}},"input",e.props,!1)):"radio"===(e.showPassword?"text":"password")&&"password"===e.type?i("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],staticClass:"input input--password",attrs:{"data-cy-field":e.id,id:"input-"+e.id,disabled:e.disabled,readonly:e.disabled,type:"radio"},domProps:{checked:e._q(e.data,null)},on:{change:function(t){e.data=null}}},"input",e.props,!1)):"password"===e.type?i("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],staticClass:"input input--password",attrs:{"data-cy-field":e.id,id:"input-"+e.id,disabled:e.disabled,readonly:e.disabled,type:e.showPassword?"text":"password"},domProps:{value:e.data},on:{input:function(t){t.target.composing||(e.data=t.target.value)}}},"input",e.props,!1)):e._e(),"password"===e.type?i("span",{staticClass:"input--password-toggler",on:{click:function(t){e.showPassword=!e.showPassword}}},[i("font-awesome-icon",{attrs:{icon:e.showPassword?"eye":"eye-slash"}})],1):e._e(),"textarea"===e.type?i("textarea",e._b({directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],staticClass:"input input--textarea",attrs:{"data-cy-field":e.id,id:"input-"+e.id,disabled:e.disabled,readonly:e.disabled},domProps:{value:e.data},on:{input:function(t){t.target.composing||(e.data=t.target.value)}}},"textarea",e.props,!1)):e._e(),"number"===e.type?i("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],staticClass:"input input--number",attrs:{"data-cy-field":e.id,type:"number",id:"input-"+e.id,disabled:e.disabled,readonly:e.disabled},domProps:{value:e.data},on:{input:function(t){t.target.composing||(e.data=t.target.value)}}},"input",e.props,!1)):e._e(),"select"===e.type||"selectMultiple"===e.type?i("select",e._b({directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],staticClass:"input input--select",attrs:{"data-cy-field":e.id,id:"input-"+e.id,multiple:"selectMultiple"===e.type,disabled:e.disabled},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.data=t.target.multiple?i:i[0]}}},"select",e.props,!1),[e._l(Object.keys(e.options),(function(t){return e.optionsAreGrouped?i("optgroup",{attrs:{label:e.options[t].label}},e._l(e.options[t].options,(function(t){return i("option",{domProps:{value:t.value}},[e._v(e._s(t.label))])})),0):e._e()})),e._l(e.options,(function(t){return e.optionsAreGrouped?e._e():i("option",{domProps:{value:t.value}},[e._v(e._s(t.label))])}))],2):e._e(),"radio"===e.type?i("ul",{staticClass:"input input--radio",attrs:{id:"input-"+e.id}},e._l(e.options,(function(t,s){return i("li",{staticClass:"input--radio-option"},[i("label",{attrs:{for:"input"+e._uid+"-"+s}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],staticClass:"input input--radio",attrs:{type:"radio","data-cy-field":e.id,"data-cy-label":t.label,id:"input"+e._uid+"-"+s,name:"input"+e._uid,disabled:e.disabled},domProps:{value:t.value,checked:e._q(e.data,t.value)},on:{change:function(i){e.data=t.value}}}),e._v(" "+e._s(t.label)+" ")])])})),0):e._e(),"checkbox"===e.type?i("ul",{staticClass:"input--checkbox",attrs:{id:"input-"+e.id}},e._l(e.options,(function(t,s){return i("li",{staticClass:"input--checkbox-option"},[i("label",{attrs:{for:"input"+e._uid+"-"+s}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],staticClass:"input input--checkbox",attrs:{type:"checkbox","data-cy-field":e.id,"data-cy-label":t.label,id:"input"+e._uid+"-"+s,name:"input"+e._uid,disabled:e.disabled},domProps:{value:t.value,checked:Array.isArray(e.data)?e._i(e.data,t.value)>-1:e.data},on:{change:function(i){var s=e.data,a=i.target,n=!!a.checked;if(Array.isArray(s)){var o=t.value,r=e._i(s,o);a.checked?r<0&&(e.data=s.concat([o])):r>-1&&(e.data=s.slice(0,r).concat(s.slice(r+1)))}else e.data=n}}}),e._v(" "+e._s(t.label)+" ")])])})),0):e._e(),"date"===e.type?i("Datepicker",e._b({attrs:{"data-cy-field":e.id,"input-class":"input input--date",disabled:e.disabled},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},"Datepicker",e.props,!1)):e._e(),"autocompleter"===e.type?i("Autocompleter",e._b({attrs:{disabled:e.disabled},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},"Autocompleter",e.props,!1)):e._e(),"address"===e.type?i("Address",e._b({attrs:{disabled:e.disabled},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},"Address",e.props,!1)):e._e(),"location"===e.type?i("Location",e._b({attrs:{disabled:e.disabled},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},"Location",e.props,!1)):e._e(),"addressWithLocation"===e.type?i("AddressWithLocation",e._b({attrs:{"data-cy-field":e.id,disabled:e.disabled},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},"AddressWithLocation",e.props,!1)):e._e(),"townList"===e.type?i("TownList",e._b({attrs:{disabled:e.disabled},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},"TownList",e.props,!1)):e._e(),"planFunding"===e.type?i("PlanFunding",e._b({attrs:{disabled:e.disabled},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},"PlanFunding",e.props,!1)):e._e(),"collectivity"===e.type?i("Collectivity",e._b({attrs:{disabled:e.disabled},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},"Collectivity",e.props,!1)):e._e(),"organization"===e.type?i("Organization",e._b({attrs:{disabled:e.disabled},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},"Organization",e.props,!1)):e._e(),"etp"===e.type?i("Etp",e._b({attrs:{disabled:e.disabled},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},"Etp",e.props,!1)):e._e(),"audience"===e.type?i("Audience",e._b({attrs:{disabled:e.disabled},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},"Audience",e.props,!1)):e._e(),"planHousing"===e.type?i("PlanHousing",e._b({attrs:{disabled:e.disabled},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},"PlanHousing",e.props,!1)):e._e()],1)])},er=[],tr=i("fa33"),ir=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"autocompleter"},[i("div",{ref:"measure",staticClass:"autocompleter-measure"},[e._v(e._s(e.currentLabel))]),i("div",{staticClass:"autocompleter-textfield"},[i("div",{ref:"prefixIcon",staticClass:"autocompleter-prefixIcon"},[i("img",{attrs:{src:"/img/search.svg"}})]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.currentLabel,expression:"currentLabel"}],ref:"input",attrs:{type:"text",disabled:e.disabled,readonly:e.disabled,placeholder:e.placeholder},domProps:{value:e.currentLabel},on:{keydown:e.onNavigation,keyup:e.onType,focus:function(t){e.focused=!0},blur:function(t){e.focused=!1},input:function(t){t.target.composing||(e.currentLabel=t.target.value)}}}),i("div",{ref:"spinner",staticClass:"autocompleter-spinner",style:{visibility:e.suggestionRequest.pending?"visible":"hidden"}},[i("img",{attrs:{src:"/img/spinner_dark.svg"}})]),e.currentLabel&&!e.disabled?i("span",{ref:"suffixIcon",staticClass:"autocompleter-clearIcon",on:{click:e.clearLabel}}):e._e(),null!==e.suggestions?i("div",{ref:"suggestionContainer",staticClass:"autocompleter-suggestionContainer",class:{"autocompleter-suggestionContainer--float":e.float,"autocompleter-suggestionContainer--withoutCategories":!e.showCategory}},e._l(e.nonEmptyCategories,(function(t){return e.nonEmptyCategories.length>0?i("div",{staticClass:"autocompleter-suggestionCategoryContainer"},[e.showCategory?i("div",{staticClass:"autocompleter-suggestionCategory"},[e._v(e._s(t))]):e._e(),i("ul",{staticClass:"autocompleter-suggestionCategoryItems"},e._l(e.unselectedSuggestions[t],(function(t){return i("li",{staticClass:"autocompleter-suggestionCategoryItem",class:{"autocompleter-suggestionCategoryItem--empty":t.isExtra,active:t.id===e.idOfHighlightedItem},on:{click:function(i){return e.selectItem(t)}}},[e._v(e._s(t.label))])})),0)]):e._e()})),0):e._e(),null===e.suggestions&&e.suggestionRequest.error&&e.float?i("div",{staticClass:"autocompleter-suggestionContainer autocompleter-suggestionContainer--float autocompleter-suggestionContainer--withoutCategories"},[i("div",{staticClass:"autocompleter-suggestionCategoryContainer"},[i("ul",{staticClass:"autocompleter-suggestionCategoryItems"},[i("li",{staticClass:"autocompleter-suggestionCategoryItem autocompleter-suggestionCategoryItem--error"},[i("img",{attrs:{src:"/img/warning.svg"}}),e._v(" "+e._s(e.suggestionRequest.error))])])])]):e._e()]),e.suggestionRequest.error&&!e.float?i("p",{staticClass:"autocompleter-error"},[i("img",{attrs:{src:"/img/warning.svg"}}),i("span",[e._v(e._s(e.suggestionRequest.error))])]):e._e(),e.allowMultiple&&e.selectedItems.length>0?i("div",{staticClass:"autocompleter-selectionContainer"},[i("p",[e._v(e._s(e.wording.selectedItems)+" :")]),i("table",{staticClass:"table"},[i("thead",[i("tr",[i("th",[e._v(e._s(e.wording.label))]),i("th",[e._v("Actions")])])]),i("tbody",e._l(e.selectedItems,(function(t){return i("tr",[i("td",[e._v(e._s(t.label))]),i("td",[e.disabled?e._e():i("img",{staticClass:"autocompleter-removeItemIcon",attrs:{src:"/img/remove.svg"},on:{click:function(i){return e.unselectItem(t)}}})])])})),0)])]):e._e()])},sr=[];const ar=200;var nr={props:{autocompleter:{type:Function,required:!0},showCategory:{type:Boolean,required:!1,default:!1},allowMultiple:{type:Boolean,required:!1,default:!1},float:{type:Boolean,required:!1,default:!0},wording:{type:Object,required:!1,default(){return{selectedItems:"Éléments sélectionnés",label:"Label"}}},createNew:{type:Function,required:!1,default:null},value:{type:Array,required:!1,default(){return[]}},disabled:{type:Boolean,required:!1,default:!1},placeholder:{type:String,required:!1}},data(){let e="";return this.allowMultiple||1!==this.value.length||([{label:e}]=this.value),{selectedItems:this.value,currentLabel:e,previousLabel:e,focused:!1,suggestions:null,suggestionRequest:{timeout:null,promise:null,pending:!1,error:null},indexOfHighligtedItem:null}},computed:{selectedIds(){return this.selectedItems.map(({id:e})=>e)},nonEmptyCategories(){return Object.keys(this.unselectedSuggestions).sort()},unselectedSuggestions(){if(null===this.suggestions)return{};let e=!0;const t=this.suggestions.reduce((t,i)=>(this.allowMultiple&&-1!==this.selectedIds.indexOf(i.id)||(t[i.category]||(t[i.category]=[]),t[i.category].push(i),e=!1),t),{});return null!==this.createNew?t._=[{id:"new",label:`Créer "${this.currentLabel}"`,category:"",data:{},isExtra:!0}]:e&&(t._=[{id:"empty",label:"Aucun résultat",category:"",data:{},isExtra:!0}]),t},unselectedSuggestionsFlat(){return this.nonEmptyCategories.reduce((e,t)=>[...e,...this.unselectedSuggestions[t]],[])},isSuggestionListEmpty(){const e=this.unselectedSuggestionsFlat;return!(e.length>1)&&(0===e.length||!0===e[0].isExtra&&"empty"===e[0].id)},idOfHighlightedItem(){return null===this.indexOfHighligtedItem||this.indexOfHighligtedItem<0||this.indexOfHighligtedItem>=this.unselectedSuggestionsFlat.length?null:this.unselectedSuggestionsFlat[this.indexOfHighligtedItem].id}},watch:{value(){this.selectedItems=this.value},disabled(){this.reset()}},mounted(){document.addEventListener("click",this.checkOutsideClick)},destroyed(){document.removeEventListener("click",this.checkOutsideClick)},methods:{onType(){this.positionSpinner(),this.currentLabel!==this.previousLabel&&(this.previousLabel=this.currentLabel,this.resetSuggestions(),this.scheduleSuggestionRequest())},onNavigation(e){this.isSuggestionListEmpty?this.indexOfHighligtedItem=null:38===e.keyCode?this.indexOfHighligtedItem-1<0?this.indexOfHighligtedItem=null:this.indexOfHighligtedItem-=1:40===e.keyCode?this.unselectedSuggestionsFlat.length>0&&(null===this.indexOfHighligtedItem?this.indexOfHighligtedItem=0:this.indexOfHighligtedItem=Math.min(this.unselectedSuggestionsFlat.length-1,this.indexOfHighligtedItem+1)):13===e.keyCode?null!==this.indexOfHighligtedItem&&(this.selectItem(this.unselectedSuggestionsFlat[this.indexOfHighligtedItem]),this.$refs.input.focus()):this.indexOfHighligtedItem=null},scheduleSuggestionRequest(){this.cancelSuggestionRequest(),this.suggestionRequest.timeout=setTimeout(this.requestSuggestions,ar)},cancelSuggestionRequest(){null!==this.suggestionRequest.promise&&this.suggestionRequest.promise.abort(),this.resetSuggestionPromise(),null!==this.suggestionRequest.timeout&&(clearTimeout(this.suggestionRequest.timeout),this.suggestionRequest.timeout=null)},resetSuggestionPromise(){this.suggestionRequest.promise=null,this.suggestionRequest.pending=!1,this.suggestionRequest.error=null},requestSuggestions(){this.canLabelTriggerARequest(this.currentLabel)&&(null!==this.suggestionRequest.promise&&this.cancelSuggestionRequest(),this.suggestionRequest.pending=!0,this.suggestionRequest.promise=this.autocompleter(this.currentLabel),this.suggestionRequest.promise.then(this.setSuggestions).catch(this.handleSuggestionFailure))},setSuggestions(e){this.resetSuggestionPromise(),this.focused&&(this.suggestions=e,this.isSuggestionListEmpty||(this.indexOfHighligtedItem=0))},handleSuggestionFailure(e){let t="erreur inconnue";e&&e.user_message&&(t=e.user_message),this.resetSuggestionPromise(),this.suggestionRequest.error="Une erreur est survenue : "+t},canLabelTriggerARequest(e){return""!==e},clearLabel(){this.cancelSuggestionRequest(),this.setLabel(""),!1===this.allowMultiple&&(this.selectedItems=[],this.$emit("input",this.selectedItems))},reset(){this.cancelSuggestionRequest(),this.$refs.input.blur(),this.allowMultiple||1!==this.selectedItems.length?this.setLabel(""):this.setLabel(this.selectedItems[0].label)},resetSuggestions(){this.suggestions=null},setLabel(e){this.currentLabel=e,this.previousLabel=e,this.resetSuggestions()},checkOutsideClick(e){const t=["prefixIcon","input","suffixIcon","suggestionContainer"];t.some(t=>this.$refs[t]&&this.$refs[t].contains(e.target))||this.reset()},selectItem(e){if(!0!==e.isExtra){if(!1===this.allowMultiple)this.selectedItems=[e],this.reset();else{if(this.selectedItems.some(({id:t})=>e.id===t))return;this.selectedItems.push(e)}this.$emit("input",this.selectedItems)}else{if("empty"===e.id)return;"new"===e.id&&(this.createNew(this.currentLabel),this.resetSuggestions())}},unselectItem(e){const t=this.selectedItems.findIndex(({id:t})=>e.id===t);-1!==t&&(this.selectedItems.splice(t,1),this.$emit("input",this.selectedItems))},positionSpinner(){this.$refs.spinner.style.marginLeft=0;const e=this.$refs.input.clientWidth;this.$refs.spinner.offsetLeft,this.$refs.spinner.offsetWidth,this.$refs.spinner.style.marginLeft=Math.min(this.$refs.measure.clientWidth,e)+"px"}}},or=nr,rr=or,lr=(i("4f16"),Object(d["a"])(rr,ir,sr,!1,null,null,null)),cr=lr.exports,dr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Autocompleter",e._b({attrs:{disabled:e.disabled},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},"Autocompleter",e.options,!1))},ur=[];function pr(e){return`${e.geometry.coordinates[0]}-${e.geometry.coordinates[1]}`}function mr(e){const t=[];return e.filter(e=>{const i=pr(e);return-1===t.indexOf(i)&&(t.push(i),!0)})}function hr(e,t){if(200===this.status)try{const{features:t}=JSON.parse(this.responseText);e(mr(t).filter(e=>e.properties&&e.properties.citycode).map(e=>({addressType:e.properties.type,citycode:e.properties.citycode,city:e.properties.city,coordinates:e.geometry.coordinates,id:e.properties.id,label:`${e.properties.label}, ${e.properties.context}`,category:"address",data:{citycode:e.properties.citycode,city:e.properties.city,label:`${e.properties.label}, ${e.properties.context}`,coordinates:e.geometry.coordinates}})))}catch(i){t()}else t()}function vr(e,t=5){const i=new XMLHttpRequest,s=new Promise((s,a)=>{const n=["q="+encodeURIComponent(e)],o=parseInt(t,10);Number.isNaN(o)||n.push("limit="+o),i.open("GET","https://api-adresse.data.gouv.fr/search/?"+n.join("&")),i.onload=hr.bind(i,s,a),i.onerror=a,i.ontimeout=a,i.send()});return s.abort=()=>{i.abort()},s}function fr(e){const t=no("/locations/search?q="+encodeURIComponent(e)),i=t.then(e=>e.map(e=>({label:5===e.code.length?`(${e.code.slice(0,2)}) ${e.name}`:e.name,code:e.code,type:e.label,locationType:e.type})));return i.abort=t.abort,i}function _r(){return no("/departements")}var gr={components:{Autocompleter:cr},props:{value:{type:Object,required:!1,default(){return null}},disabled:{type:Boolean,required:!1,default:!1},specificProps:{type:Object,required:!1,default(){return{}}}},data(){return{data:null!==this.value?[this.value]:[],options:{...this.specificProps,autocompleter:vr}}},watch:{value(){this.data=null!==this.value?[this.value]:[]},data(){this.$emit("input",this.data.length>0?this.data[0]:null)}}},br=gr,yr=br,Cr=(i("f909"),Object(d["a"])(yr,dr,ur,!1,null,null,null)),wr=Cr.exports,kr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"location"},[i("div",{ref:"map",staticClass:"location-map"}),e.showTutorial?i("div",{staticClass:"location-tutorial"},[i("div",{staticClass:"location-tutorialWrapper"},[i("h1",{staticClass:"location-tutorialTitle"},[e._v(e._s(e.tutorialWording.title))]),i("br"),i("p",{staticClass:"location-tutorialDescription"},[e._v(e._s(e.tutorialWording.description))]),e.showCloseTutorial?i("p",{staticClass:"location-tutorialButton"},[i("button",{staticClass:"button",on:{click:e.closeTutorial}},[e._v("J'ai compris")])]):e._e()])]):e._e()])},xr=[],Pr=i("e11e"),$r=i.n(Pr);i("e5e0");const Sr=6,Er={coordinates:[46.7755829,2.0497727],zoom:Sr};var Tr={props:{value:{type:Object,required:!1,default(){return Er}},tutorial:{type:String,required:!1,default:"auto"},autoHideMarker:{type:Boolean,required:!1,default:!1},wording:{type:Object,required:!1,default(){return{tutorialTitle:"Sélectionner une position géographique",tutorialDescription:"Positionnez le marqueur en vous déplaçant sur la carte, puis en cliquant sur la localisation désirée."}}},disabled:{type:Boolean,required:!1,default:!1}},data(){return{map:null,marker:null,clickTimeout:null,showTutorial:this.shouldShowTutorial(this.tutorial),tutorialHasBeenClosed:!1}},computed:{view(){const{lat:e,lng:t}=this.marker.getLatLng();return{coordinates:[e,t],zoom:this.map.getZoom()||Sr}},tutorialWording(){return!0===this.disabled?{title:"",description:""}:{title:this.wording.tutorialTitle,description:this.wording.tutorialDescription}},showCloseTutorial(){return!this.disabled&&"auto"===this.tutorial}},watch:{value(){this.syncMap(this.value,!1)},tutorial(){this.showTutorial=this.shouldShowTutorial(this.tutorial)},showTutorial(){this.syncMarker()},autoHideMarker(){this.syncMarker()},disabled(){!0===this.disabled?this.showTutorial=!0:this.showTutorial=this.shouldShowTutorial(this.tutorial)}},mounted(){this.$nextTick(this.initialize)},methods:{initialize(){this.map=$r.a.map(this.$refs.map),this.setTileLayers(),this.createMarker(),this.syncMap(this.value,!1)},setTileLayers(){const e={Satellite:$r.a.tileLayer.provider("Esri.WorldImagery"),Dessin:$r.a.tileLayer.provider("OpenStreetMap.Mapnik")};e.Dessin.addTo(this.map),$r.a.control.layers(e).addTo(this.map)},createMarker(){this.marker=$r.a.marker(this.value.coordinates,{draggable:!0}),this.map.addEventListener("click",e=>{clearTimeout(this.clickTimeout),this.clickTimeout=setTimeout(this.handleClick.bind(this,e),200)}),this.map.addEventListener("dblclick",()=>{clearTimeout(this.clickTimeout),this.clickTimeout=null}),this.marker.addEventListener("dragend",()=>{this.syncMap(this.view,!0)}),this.shouldShowMarker()&&this.marker.addTo(this.map)},syncMap(e,t=!1){this.marker.setLatLng(e.coordinates),this.map.setView(e.coordinates,e.zoom),!0===t&&this.$emit("input",e),clearTimeout(this.clickTimeout),this.clickTimeout=null},handleClick({latlng:{lat:e,lng:t}}){this.marker.setLatLng([e,t]),this.syncMap(this.view,!0),this.clickTimeout=null},closeTutorial(){this.showTutorial=!1,this.tutorialHasBeenClosed=!0},shouldShowMarker(){return!1===this.autoHideMarker||!0!==this.showTutorial},syncMarker(){null!==this.marker&&(this.shouldShowMarker()?this.marker.addTo(this.map):this.marker.remove())},shouldShowTutorial(e){return"no"!==e&&("yes"===e||!this.tutorialHasBeenClosed)}}},Ar=Tr,Ir=Ar,Or=(i("8950"),Object(d["a"])(Ir,kr,xr,!1,null,null,null)),qr=Or.exports,Mr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("Address",e._b({attrs:{disabled:e.disabled},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}},"Address",e.addressOptions,!1)),i("Location",e._b({ref:"location",attrs:{disabled:e.disabled},model:{value:e.location,callback:function(t){e.location=t},expression:"location"}},"Location",e.locationOptions,!1))],1)},Dr=[],jr={components:{Address:wr,Location:qr},props:{value:{type:Object,required:!1,default(){return null}},specificProps:{type:Object,required:!1,default(){return{address:{},location:{}}}},disabled:{type:Boolean,required:!1,default:!1}},data(){return{address:null!==this.value?this.value.address:void 0,location:null!==this.value?this.value.location:void 0}},computed:{addressOptions(){return{...this.specificProps.address}},locationOptions(){return{...this.specificProps.location,tutorial:this.address?"auto":"yes",autoHideMarker:!this.address,wording:this.address?{tutorialTitle:"Adresse détectée",tutorialDescription:"Vous pouvez déplacer le marqueur en cliquant à l'endroit souhaité sur la carte"}:{tutorialTitle:"Saisir une adresse",tutorialDescription:"Veuillez saisir une adresse dans le champ de texte ci-dessus avant d'accéder à la carte"}}},data(){return this.address?{address:this.address,location:this.location}:null}},watch:{value(){this.address=null!==this.value?this.value.address:void 0,this.location=null!==this.value?this.value.location:void 0},address(){if(this.address){const[e,t]=this.address.coordinates;this.location={coordinates:[t,e],zoom:15}}this.$emit("input",this.data)},location(){this.$emit("input",this.data)}}},Nr=jr,Fr=Nr,Lr=(i("c789"),Object(d["a"])(Fr,Mr,Dr,!1,null,null,null)),zr=Lr.exports,Br=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",["loading"===e.status||null===e.status?i("div",[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),e._v(" Chargement de la liste des sites en cours... ")]):e._e(),"error"===e.status?i("div",{staticClass:"error"},[i("img",{staticClass:"spinner",attrs:{src:"/img/warning.svg",width:"20"}}),e._v(" Le chargement de la liste des sites a échoué : "+e._s(e.loadingError)+" ")]):e._e(),"loaded"===e.status?i("div",[i("p",{staticClass:"selectionInfo"},[e._v("Nombre total de sites sélectionnés : "+e._s(e.selectedTowns.length))]),i("div",{staticClass:"switch"},[i("button",{class:{active:"open"===e.statusOfVisibleTowns},on:{click:function(t){return e.showTowns("open")}}},[e._v("Sites existants")]),i("button",{class:{active:"closed"===e.statusOfVisibleTowns},on:{click:function(t){return e.showTowns("closed")}}},[e._v("Sites fermés")])]),i("CollectivityInput",{staticClass:"townList-search",model:{value:e.location,callback:function(t){e.location=t},expression:"location"}}),i("Table",{attrs:{columns:e.columns,content:e.pageContent,emptyLabel:"Aucun site"},on:{click:e.toggleTown},scopedSlots:e._u([{key:"checkbox",fn:function(t){return[i("input",{attrs:{type:"checkbox",disabled:e.disabled},domProps:{checked:e.selectedTowns.some((function(e){return e===t.row.id}))},on:{change:function(i){return e.toggleTown(t.row)}}})]}},{key:"city",fn:function(t){return[e._v(e._s(t.row.city.name))]}},{key:"address",fn:function(t){return[e._v(e._s(t.row.usename))]}},{key:"fieldType",fn:function(t){return[i("span",{staticClass:"fieldType"},[i("i",{style:"background-color: "+e.fieldTypes[t.row.fieldType.id].color}),e._v(" "),i("span",[e._v(e._s(t.row.fieldType.label))])])]}},{key:"people",fn:function(t){return[null===t.row.populationTotal?i("span",{staticClass:"secondary"},[e._v("NC")]):i("span",[e._v(e._s(t.row.populationTotal))])]}}],null,!1,2250559664)})],1):e._e()])},Rr=[];function Vr(e={},t=[]){const i=[];return Object.keys(e).forEach(t=>{i.push(`${t}=${encodeURIComponent(e[t])}`)}),t.length>0&&i.push("order="+t.map(e=>encodeURIComponent(e)).join(",")),no("/towns"+(i.length>0?"?"+i.join("&"):""))}function Ur(e){return no("/towns/"+e)}function Hr(e){const t={...e};return e.address&&(t.coordinates=e.address.location.coordinates.join(","),t.citycode=e.address.address.data.citycode,t.address=e.address.address.label),oo("/towns",t)}function Gr(e,t){return oo("/towns/"+e,t)}function Wr(e,t){return oo(`/towns/${e}/close`,t)}function Yr(e){return ro("/towns/"+e)}function Jr(e,t){return oo(`/towns/${e}/comments`,t)}function Qr(e,t){return oo(`/towns/${e}/covidComments`,t)}function Zr(e,t,i){return oo(`/towns/${e}/comments/${t}`,i)}function Kr(e,t,i){return ro(`/towns/${e}/comments/${t}`,{message:i})}var Xr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"rb-table"},[i("aside",{staticClass:"rb-table-aside"},[e._t("aside",[i("p")]),i("div",{staticClass:"rb-pagination"},[i("span",{staticClass:"link",class:{"link--disabled":0===e.currentPage},on:{click:e.previousPage}},[i("font-awesome-icon",{attrs:{icon:"caret-square-left"}}),e._v(" Précédent")],1),i("span",{staticClass:"pagination-pages"},[e._v(e._s(e.indexOfFirstRowInCurrentPage)+" - "+e._s(e.indexOfLastRowInCurrentPage)+" sur "+e._s(e.filteredContent.length))]),i("span",{staticClass:"link",class:{"link--disabled":e.currentPage===e.indexOfLastPage},on:{click:e.nextPage}},[e._v("Suivant "),i("font-awesome-icon",{attrs:{icon:"caret-square-right"}})],1)])],2),i("table",{staticClass:"table"},[i("thead",[i("tr",e._l(e.parsedColumns,(function(t){var s;return i("th",{class:(s={"table-col--filterable":t.isFilterable,"table-col--active":[t.id].length>0},s["table-col--"+t.id]=!0,s)},[t.isFilterable?i("TableFilter",{attrs:{visible:e.currentFilter===t.id},on:{"outside-click":e.hideFilter,clean:e.hideFilter},model:{value:e.parsedFilters[t.id],callback:function(i){e.$set(e.parsedFilters,t.id,i)},expression:"parsedFilters[column.id]"}}):e._e(),t.isFilterable?i("span",{on:{click:function(i){return e.toggleFilter(t.id)}}},[e._v(e._s(t.label)+" "),e.checkedFilters[t.id].length>0?i("span",{staticClass:"badge"},[e._v(e._s(e.checkedFilters[t.id].length))]):e._e(),i("font-awesome-icon",{attrs:{icon:"sort-down",size:"2x"}})],1):i("span",[e._v(e._s(t.label))])],1)})),0)]),i("tbody",[0===e.filteredContent.length?i("tr",{staticClass:"table-row--empty"},[i("td",{attrs:{colspan:e.parsedColumns.length}},[e._v(e._s(e.emptyLabel))])]):e._e(),e._l(e.currentPageContent,(function(t,s){return i("tr",{class:s%2===0?"table-row--odd":"",on:{click:function(i){return e.click(i,t)}}},e._l(e.parsedColumns,(function(s){return i("td",{class:"table-col--"+s.id},[e._t(s.id,[i("span",{domProps:{innerHTML:e._s(t[s.id])}})],{row:t})],2)})),0)}))],2)]),i("aside",{staticClass:"rb-table-aside"},[e._t("aside",[i("p")]),i("div",{staticClass:"rb-pagination"},[i("span",{staticClass:"link",class:{"link--disabled":0===e.currentPage},on:{click:e.previousPage}},[i("font-awesome-icon",{attrs:{icon:"caret-square-left"}}),e._v(" Précédent")],1),i("span",{staticClass:"pagination-pages"},[e._v(e._s(e.indexOfFirstRowInCurrentPage)+" - "+e._s(e.indexOfLastRowInCurrentPage)+" sur "+e._s(e.filteredContent.length))]),i("span",{staticClass:"link",class:{"link--disabled":e.currentPage===e.indexOfLastPage},on:{click:e.nextPage}},[e._v("Suivant "),i("font-awesome-icon",{attrs:{icon:"caret-square-right"}})],1)])],2)])},el=[],tl=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"container",staticClass:"tableFilter",style:{display:!0===e.visible?"block":"none"}},[i("ul",e._l(e.items,(function(t,s){return i("li",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"item.checked"}],attrs:{type:"checkbox",id:"tableFilter-"+e.id+"-"+s},domProps:{checked:Array.isArray(t.checked)?e._i(t.checked,null)>-1:t.checked},on:{change:function(i){var s=t.checked,a=i.target,n=!!a.checked;if(Array.isArray(s)){var o=null,r=e._i(s,o);a.checked?r<0&&e.$set(t,"checked",s.concat([o])):r>-1&&e.$set(t,"checked",s.slice(0,r).concat(s.slice(r+1)))}else e.$set(t,"checked",n)}}}),i("label",{attrs:{for:"tableFilter-"+e.id+"-"+s}},[e._t("default",[e._v(e._s(t.label))],{item:t})],2)])})),0),i("footer",[i("span",{staticClass:"link link--secondary",on:{click:e.clean}},[e._v("Effacer")])])])},il=[],sl={props:{value:{required:!0,type:Array},visible:{required:!1,type:Boolean,default:!1}},data(){return{items:this.value,timeout:null,id:null}},watch:{value(){this.items=this.value},items(){this.$emit("input",this.items)},visible(){!0===this.visible?this.timeout=setTimeout(()=>document.addEventListener("click",this.checkOutsideClick),500):(clearTimeout(this.timeout),document.removeEventListener("click",this.checkOutsideClick))}},mounted(){this.id=this._uid},methods:{clean(){for(let e=0;e<this.items.length;e+=1)this.items[e].checked=!1;this.$emit("clean")},checkOutsideClick(e){this.$refs.container&&this.$refs.container.contains(e.target)||this.$emit("outside-click",e)}}},al=sl,nl=al,ol=(i("cb23"),Object(d["a"])(nl,tl,il,!1,null,"cdbe4124",null)),rl=ol.exports;const ll=10;var cl={components:{TableFilter:rl},props:{columns:{type:Array,required:!0},content:{type:Array,required:!1,default(){return[]}},emptyLabel:{type:String,required:!1,default:"Aucune donnée disponible pour les filtres sélectionnés"},itemsPerPage:{type:Number,required:!1,default:ll}},data(){return{parsedFilters:this.parseFilters(),currentFilter:null,currentPage:0}},computed:{parsedColumns(){return this.columns.map(e=>({...e,isFilterable:void 0!==e.filters}))},checkedFilters(){return Object.keys(this.parsedFilters).reduce((e,t)=>({...e,[t]:this.parsedFilters[t].filter(({checked:e})=>!0===e)}),{})},filteredContent(){return this.currentPage=0,this.content.filter(e=>this.columns.every(({id:t,filterFn:i})=>0===this.checkedFilters[t].length||i(e,this.checkedFilters[t])))},currentPageContent(){return this.filteredContent.slice(this.currentPage*this.itemsPerPage,this.currentPage*this.itemsPerPage+this.itemsPerPage)},indexOfLastPage(){return Math.max(0,Math.ceil(this.filteredContent.length/this.itemsPerPage)-1)},indexOfFirstRowInCurrentPage(){return this.filteredContent.length>0?this.currentPage*this.itemsPerPage+1:0},indexOfLastRowInCurrentPage(){return Math.min(this.indexOfFirstRowInCurrentPage+this.itemsPerPage-1,this.filteredContent.length)}},watch:{columns(){this.parsedFilters=this.parseFilters(),this.currentPage=0},content(){this.parsedFilters=this.parseFilters(),this.currentFilter=null,this.currentPage=0}},methods:{click(e,t){this.$emit("click",t,e)},parseFilters(){return this.columns.reduce((e,t)=>void 0===t.filters?{...e,[t.id]:[]}:{...e,[t.id]:t.filters.map(e=>void 0!==e.checked?e:{...e,checked:!1})},{})},toggleFilter(e){this.currentFilter===e?this.currentFilter=null:this.currentFilter=e},hideFilter(){this.currentFilter=null},previousPage(){this.currentPage=Math.max(0,this.currentPage-1)},nextPage(){this.currentPage=Math.min(this.indexOfLastPage,this.currentPage+1)}}},dl=cl,ul=dl,pl=Object(d["a"])(ul,Xr,el,!1,null,null,null),ml=pl.exports,hl=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Autocompleter",e._b({attrs:{disabled:e.disabled},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},"Autocompleter",e.options,!1))},vl=[],fl={components:{Autocompleter:cr},props:{value:{type:Object,required:!1,default(){return null}},disabled:{type:Boolean,required:!1,default:!1},specificProps:{type:Object,required:!1,default(){return{}}}},data(){return{data:null!==this.value?[this.value]:[],options:{...this.specificProps,showCategory:!0,autocompleter:(...e)=>{const t=fr(...e),i=t.then(e=>e.map(({label:e,code:t,type:i,locationType:s})=>({id:t,label:e,category:i,data:{code:t,type:s}})));return i.abort=t.abort,i}}}},watch:{value(){this.data=null!==this.value?[this.value]:[]},data(){this.$emit("input",this.data.length>0?this.data[0]:null)}}},_l=fl,gl=_l,bl=(i("373f"),Object(d["a"])(gl,hl,vl,!1,null,null,null)),yl=bl.exports,Cl={components:{Table:ml,CollectivityInput:yl},props:{value:{type:Array,required:!1,default(){return[]}},disabled:{type:Boolean,required:!1,default:!1},filter:{type:Function,required:!1,default:null}},data(){const{field_types:e,user:t}=fo(),i=go("shantytown.list"),s={id:"nation"===t.organization.location.type?null:t.organization.location[t.organization.location.type].code,label:"nation"===t.organization.location.type?"France":t.organization.location[t.organization.location.type].name,category:t.organization.location.type,data:{code:"nation"===t.organization.location.type?null:t.organization.location[t.organization.location.type].code,type:t.organization.location.type}},a="nation"===i.geographic_level;let n,o;return!0!==a||"nation"===t.organization.location.type?(o={...s},n=null):(o={id:null,label:"France",category:"Pays",data:{code:null,type:"nation"}},n={...s}),{location:n,defaultLocation:o,columns:[{id:"checkbox",label:""},{id:"city",label:"Commune"},{id:"address",label:"Adresse"},{id:"fieldType",label:"Type de site"},{id:"people",label:"Nombre de personnes"}],fieldTypes:e.reduce((e,t)=>({...e,[t.id]:t}),{}),status:null,loadingError:null,towns:[],selectedTowns:this.value,statusOfVisibleTowns:"open"}},computed:{currentLocation(){return this.location||this.defaultLocation},pageContent(){return this.towns.filter(({closedAt:e})=>"open"===this.statusOfVisibleTowns?null===e:null!==e).filter(e=>{if("nation"===this.currentLocation.data.type)return!0;const t=e[this.currentLocation.data.type];return t&&""+t.code===""+this.currentLocation.data.code})}},watch:{value(){this.selectedTowns=this.value},selectedTowns(){this.$emit("input",this.selectedTowns)}},mounted(){this.load()},methods:{load(){"loaded"!==this.status&&"loading"!==this.status&&(this.status="loading",this.loadingError=null,Vr({},["city.asc","population.desc"]).then(e=>{this.status="loaded",this.towns=e}).catch(({user_message:e})=>{this.status="error",this.loadingError=e}))},showTowns(e){this.statusOfVisibleTowns=e},toggleTown({id:e},t){if(t&&t.target&&"checkbox"===t.target.type)return;if(this.disabled)return;const i=this.selectedTowns.findIndex(t=>t===e);-1!==i?this.selectedTowns.splice(i,1):this.selectedTowns.push(e)}}},wl=Cl,kl=wl,xl=(i("3b5a"),Object(d["a"])(kl,Br,Rr,!1,null,null,null)),Pl=xl.exports,$l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"planFunding"},[i("header",{staticClass:"planFunding-header"},[i("font-awesome-icon",{staticClass:"planFunding-yearSwitch",class:{"planFunding-yearSwitch--disabled":this.focusedYear===this.minYear},attrs:{icon:"caret-square-left"},on:{click:e.showPreviousYear}}),i("span",[e._v(e._s(e.focusedYear)+" ")]),i("font-awesome-icon",{staticClass:"planFunding-yearSwitch",class:{"planFunding-yearSwitch--disabled":this.focusedYear===this.maxYear},attrs:{icon:"caret-square-right"},on:{click:e.showNextYear}})],1),i("table",{staticClass:"table"},[e._m(0),i("tbody",[e._l(e.currentFundings,(function(t,s){return i("PlanFundingRow",{key:s,attrs:{index:s,inputMode:e.inputMode,relatedYear:e.focusedYear,disabled:e.disabled},on:{onremove:function(t){return e.removeRow(s)},input:e.onRowChange},model:{value:t.data,callback:function(i){e.$set(t,"data",i)},expression:"funding.data"}})})),"default"===e.inputMode?i("tr",[i("td",{staticClass:"planFunding-addRow",class:{"planFunding-addRow--disabled":e.disabled},attrs:{colspan:"5"},on:{click:e.addRow}},[e._v("Ajouter une ligne de financement")])]):e._e()],2)])])},Sl=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("thead",[i("tr",[i("th",{staticClass:"planFunding-type"},[e._v("Type de financements")]),i("th",{staticClass:"planFunding-amount"},[e._v("Montants"),i("br"),e._v("Prévus")]),i("th",{staticClass:"planFunding-details"},[e._v("Précision")]),i("th",{staticClass:"planFunding-details"},[e._v("Dépenses"),i("br"),e._v("exécutées")]),i("th")])])}],El=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("tr",{staticClass:"planFundingRow",class:{"planFundingRow--disabled":e.disabled}},[i("td",[i("select",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"type"}],attrs:{disabled:e.disabled||"closing"===e.inputMode||!e.allowEdition},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.type=t.target.multiple?i:i[0]}}},e._l(e.financeTypes,(function(t){return i("option",{domProps:{value:t.uid}},[e._v(e._s(t.name))])})),0)]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.amount,expression:"amount"}],attrs:{type:"text",readonly:e.disabled||"closing"===e.inputMode||!e.allowEdition,disabled:e.disabled||"closing"===e.inputMode||!e.allowEdition},domProps:{value:e.amount},on:{input:function(t){t.target.composing||(e.amount=t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.details,expression:"details"}],attrs:{type:"text",readonly:e.disabled||"closing"===e.inputMode||!e.allowEdition,disabled:e.disabled||"closing"===e.inputMode||!e.allowEdition},domProps:{value:e.details},on:{input:function(t){t.target.composing||(e.details=t.target.value)}}})]),e.showRealAmount?i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.realAmount,expression:"realAmount"}],attrs:{type:"text",readonly:e.disabled||!e.allowEdition,disabled:e.disabled||!e.allowEdition},domProps:{value:e.realAmount},on:{input:function(t){t.target.composing||(e.realAmount=t.target.value)}}})]):i("td",[0===e.index?i("span",[e._v("À remplir entre janvier et mars de l'année prochaine")]):e._e()]),i("td",[i("img",{attrs:{src:"/img/remove.svg"},on:{click:e.remove}})])])},Tl=[],Al={props:{value:{type:Object,required:!1,default(){return{type:null,amount:0,realAmount:null,details:""}}},disabled:{type:Boolean,required:!1,default:!1},index:{type:Number,required:!0},relatedYear:{type:Number,required:!0},inputMode:{type:String,required:!1,default:"default"}},data(){const e="default"!==this.inputMode||!this.isCurrentYear(),t=!Number.isFinite(this.value.realAmount);return{financeTypes:fo().finance_types||[],showRealAmount:e,allowEdition:t,type:this.value.type,amount:this.value.amount,realAmount:e?this.value.realAmount:null,details:this.value.details}},watch:{value(){this.showRealAmount="default"!==this.inputMode||!this.isCurrentYear(),this.allowEdition=!Number.isFinite(this.value.realAmount),this.type=this.value.type,this.amount=this.value.amount,this.realAmount=this.showRealAmount?this.value.realAmount:null,this.details=this.value.details},type(){this.emitInput()},amount(){this.emitInput()},realAmount(){this.emitInput()},details(){this.emitInput()}},methods:{isCurrentYear(){return(new Date).getFullYear()===this.relatedYear},emitInput(){this.$emit("input",{type:this.type,amount:this.amount,realAmount:this.realAmount,details:this.details})},remove(){this.$emit("onremove")}}},Il=Al,Ol=Il,ql=(i("5449"),Object(d["a"])(Ol,El,Tl,!1,null,null,null)),Ml=ql.exports,Dl={components:{PlanFundingRow:Ml},props:{value:{type:Array,required:!1,default(){return[]}},disabled:{type:Boolean,required:!1,default:!1},minYear:{type:Number,required:!1,default:null},inputMode:{type:String,required:!1,default:"default"}},data(){return{maxYear:(new Date).getFullYear(),focusedYear:(new Date).getFullYear(),fundings:this.value.map(({year:e,data:t})=>({year:e,data:t.map(e=>({data:e}))}))}},computed:{allowRealAmount(){return"closing"===this.inputMode||this.focusedYear<(new Date).getFullYear()},currentFundings(){const e=this.getCurrentFundings();return void 0===e?[]:e.data}},watch:{value(){this.fundings=this.value.map(({year:e,data:t})=>({year:e,data:t.map(e=>({data:e}))}))}},methods:{getCurrentFundings(){return this.fundings.find(({year:e})=>e===this.focusedYear)},addRow(){if(this.disabled)return;let e=this.getCurrentFundings();void 0===e&&(e={year:this.focusedYear,data:[]},this.fundings.push(e)),e.data.push({data:{type:null,amount:0,realAmount:null,details:""}}),this.emitInput()},removeRow(e){if(this.disabled)return;const t=this.getCurrentFundings();void 0!==t&&(t.data.splice(e,1),this.emitInput())},onRowChange(){this.emitInput()},emitInput(){this.$emit("input",this.fundings.map(({year:e,data:t})=>({year:e,data:t.map(({data:e})=>e)})))},showNextYear(){this.focusedYear=Math.min(this.maxYear,this.focusedYear+1)},showPreviousYear(){null===this.minYear?this.focusedYear-=1:this.focusedYear=Math.max(this.minYear,this.focusedYear-1)}}},jl=Dl,Nl=jl,Fl=(i("30c2"),Object(d["a"])(Nl,$l,Sl,!1,null,null,null)),Ll=Fl.exports,zl=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"rb-table"},[i("table",{staticClass:"table"},[e._m(0),i("tbody",[i("tr",[i("th",[e._v("SIAO")]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.siao.families,expression:"data.siao.families"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.siao.families},on:{input:function(t){t.target.composing||e.$set(e.data.siao,"families",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.siao.people,expression:"data.siao.people"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.siao.people},on:{input:function(t){t.target.composing||e.$set(e.data.siao,"people",t.target.value)}}})])]),i("tr",[i("th",[e._v("Logement social")]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.logement_social.families,expression:"data.logement_social.families"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.logement_social.families},on:{input:function(t){t.target.composing||e.$set(e.data.logement_social,"families",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.logement_social.people,expression:"data.logement_social.people"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.logement_social.people},on:{input:function(t){t.target.composing||e.$set(e.data.logement_social,"people",t.target.value)}}})])]),i("tr",[i("th",[e._v("DALO")]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.dalo.families,expression:"data.dalo.families"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.dalo.families},on:{input:function(t){t.target.composing||e.$set(e.data.dalo,"families",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.dalo.people,expression:"data.dalo.people"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.dalo.people},on:{input:function(t){t.target.composing||e.$set(e.data.dalo,"people",t.target.value)}}})])])])]),i("table",{staticClass:"table"},[e._m(1),i("tbody",[i("tr",[i("th",[e._v("Logement accompagné / adapté")]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.accompagnes.families,expression:"data.accompagnes.families"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.accompagnes.families},on:{input:function(t){t.target.composing||e.$set(e.data.accompagnes,"families",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.accompagnes.people,expression:"data.accompagnes.people"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.accompagnes.people},on:{input:function(t){t.target.composing||e.$set(e.data.accompagnes,"people",t.target.value)}}})])]),i("tr",[e._m(2),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.non_accompagnes.families,expression:"data.non_accompagnes.families"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.non_accompagnes.families},on:{input:function(t){t.target.composing||e.$set(e.data.non_accompagnes,"families",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.non_accompagnes.people,expression:"data.non_accompagnes.people"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.non_accompagnes.people},on:{input:function(t){t.target.composing||e.$set(e.data.non_accompagnes,"people",t.target.value)}}})])]),i("tr",[e._m(3),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.heberges.families,expression:"data.heberges.families"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.heberges.families},on:{input:function(t){t.target.composing||e.$set(e.data.heberges,"families",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.heberges.people,expression:"data.heberges.people"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.heberges.people},on:{input:function(t){t.target.composing||e.$set(e.data.heberges,"people",t.target.value)}}})])])])])])},Bl=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("thead",[i("tr",[i("th",[e._v("Demandes de logement")]),i("th",[e._v("Ménages")]),i("th",[e._v("Personnes")])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("thead",[i("tr",[i("th",[e._v("Accès à un logement ou hébergement")]),i("th",[e._v("Ménages")]),i("th",[e._v("Personnes")])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("th",[e._v(" Logement sans accompagnement "),i("br"),i("span",[e._v("(social ou privé)")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("th",[e._v(" Hébergement "),i("span",[e._v("(hors mise à l'abri ou hébergement d'urgence)")])])}],Rl={props:{value:{type:Object,required:!1,default(){return{siao:{people:"",families:""},logement_social:{people:"",families:""},dalo:{people:"",families:""},accompagnes:{people:"",families:""},non_accompagnes:{people:"",families:""},heberges:{people:"",families:""}}}},disabled:{type:Boolean,required:!1,default:!1}},data(){return{data:this.value}},watch:{data:{handler(){this.emitInput()},deep:!0}},mounted(){this.emitInput()},methods:{emitInput(){this.$emit("input",this.data)}}},Vl=Rl,Ul=(i("e1d3"),Object(d["a"])(Vl,zl,Bl,!1,null,"0c9f54ed",null)),Hl=Ul.exports,Gl=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Autocompleter",e._b({attrs:{disabled:e.disabled},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},"Autocompleter",e.options,!1))},Wl=[],Yl={components:{Autocompleter:cr},props:{value:{type:Object,required:!1,default(){return null}},disabled:{type:Boolean,required:!1,default:!1},specificProps:{type:Object,required:!1,default(){return{}}}},data(){return{data:null!==this.value?[this.value]:[],options:{...this.specificProps,showCategory:!0,autocompleter:(...e)=>{const t=Vo(...e),i=t.then(e=>e.map(e=>({id:e.id,label:e.label,category:e.type.label,data:e})));return i.abort=t.abort,i}}}},watch:{value(){this.data=null!==this.value?[this.value]:[]},data(){this.$emit("input",this.data.length>0?this.data[0]:null)}}},Jl=Yl,Ql=Jl,Zl=Object(d["a"])(Ql,Gl,Wl,!1,null,null,null),Kl=Zl.exports,Xl=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._l(e.rows,(function(t,s){return e.rows.length>0?i("p",{staticClass:"etp-row dataSection-line"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"row.type"}],staticClass:"etp-type",attrs:{disabled:e.disabled},on:{change:function(i){var s=Array.prototype.filter.call(i.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"type",i.target.multiple?s:s[0])}}},e._l(e.types,(function(t){return i("option",{domProps:{value:t.uid}},[e._v(e._s(t.name))])})),0),i("input",{directives:[{name:"model",rawName:"v-model",value:t.total,expression:"row.total"}],staticClass:"etp-total",attrs:{type:"number",disabled:e.disabled,step:"0.1"},domProps:{value:t.total},on:{input:function(i){i.target.composing||e.$set(t,"total",i.target.value)}}}),e._v(" ETP "),i("font-awesome-icon",{staticClass:"etp-removeButton",attrs:{icon:"trash-alt"},on:{click:function(t){return e.removeRow(s)}}})],1):e._e()})),0===e.rows.length?i("p",[e._v("Aucun ETP enregistré pour le moment")]):e._e(),i("p",{staticClass:"etp-addButton",on:{click:e.addRow}},[i("font-awesome-icon",{attrs:{icon:"plus-circle"}}),i("span",[e._v("Ajouter")])],1)],2)},ec=[],tc={props:{value:{type:Array,required:!1,default(){return[]}},disabled:{type:Boolean,required:!1,default:!1}},data(){const{etp_types:e}=fo();return{rows:this.value,types:e}},computed:{parsedRows(){return this.rows.map(e=>({type:e.type?e.type:null,total:parseFloat(e.total)}))}},watch:{parsedRows(){this.emitInput()}},methods:{addRow(){this.disabled||(this.rows.push({type:void 0,total:0}),this.emitInput())},removeRow(e){this.disabled||e>=this.rows.length||(this.rows.splice(e,1),this.emitInput())},emitInput(){this.$emit("input",this.parsedRows)}}},ic=tc,sc=ic,ac=(i("d416"),Object(d["a"])(sc,Xl,ec,!1,null,null,null)),nc=ac.exports,oc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"rb-table"},[i("table",{staticClass:"table"},[e._m(0),i("tbody",[e.outOnly?e._e():i("tr",[e.inOnly?e._e():i("td",[i("strong",[e._v("Entrées")]),e._v(" dans le dispositif")]),e.inOnly?i("td",[e._v("Publics intégrés au dispositif")]):e._e(),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.in.households,expression:"data.in.households"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.in.households},on:{input:function(t){t.target.composing||e.$set(e.data.in,"households",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.in.people,expression:"data.in.people"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.in.people},on:{input:function(t){t.target.composing||e.$set(e.data.in,"people",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.in.women,expression:"data.in.women"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.in.women},on:{input:function(t){t.target.composing||e.$set(e.data.in,"women",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.in.minors,expression:"data.in.minors"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.in.minors},on:{input:function(t){t.target.composing||e.$set(e.data.in,"minors",t.target.value)}}})])]),e.inOnly?e._e():i("tr",[e._m(1),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.out_positive.households,expression:"data.out_positive.households"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.out_positive.households},on:{input:function(t){t.target.composing||e.$set(e.data.out_positive,"households",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.out_positive.people,expression:"data.out_positive.people"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.out_positive.people},on:{input:function(t){t.target.composing||e.$set(e.data.out_positive,"people",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.out_positive.women,expression:"data.out_positive.women"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.out_positive.women},on:{input:function(t){t.target.composing||e.$set(e.data.out_positive,"women",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.out_positive.minors,expression:"data.out_positive.minors"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.out_positive.minors},on:{input:function(t){t.target.composing||e.$set(e.data.out_positive,"minors",t.target.value)}}})])]),e.inOnly?e._e():i("tr",[e._m(2),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.out_abandoned.households,expression:"data.out_abandoned.households"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.out_abandoned.households},on:{input:function(t){t.target.composing||e.$set(e.data.out_abandoned,"households",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.out_abandoned.people,expression:"data.out_abandoned.people"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.out_abandoned.people},on:{input:function(t){t.target.composing||e.$set(e.data.out_abandoned,"people",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.out_abandoned.women,expression:"data.out_abandoned.women"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.out_abandoned.women},on:{input:function(t){t.target.composing||e.$set(e.data.out_abandoned,"women",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.out_abandoned.minors,expression:"data.out_abandoned.minors"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.out_abandoned.minors},on:{input:function(t){t.target.composing||e.$set(e.data.out_abandoned,"minors",t.target.value)}}})])]),e.inOnly?e._e():i("tr",[e._m(3),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.out_excluded.households,expression:"data.out_excluded.households"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.out_excluded.households},on:{input:function(t){t.target.composing||e.$set(e.data.out_excluded,"households",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.out_excluded.people,expression:"data.out_excluded.people"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.out_excluded.people},on:{input:function(t){t.target.composing||e.$set(e.data.out_excluded,"people",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.out_excluded.women,expression:"data.out_excluded.women"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.out_excluded.women},on:{input:function(t){t.target.composing||e.$set(e.data.out_excluded,"women",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.out_excluded.minors,expression:"data.out_excluded.minors"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.out_excluded.minors},on:{input:function(t){t.target.composing||e.$set(e.data.out_excluded,"minors",t.target.value)}}})])])])])])},rc=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("thead",[i("tr",[i("th",{staticClass:"table-col"}),i("th",{staticClass:"table-col"},[e._v("Ménages")]),i("th",{staticClass:"table-col"},[e._v("Personnes")]),i("th",{staticClass:"table-col"},[e._v("dont femmes"),i("br"),e._v("(facultatif)")]),i("th",{staticClass:"table-col"},[e._v("dont mineurs"),i("br"),e._v("(facultatif)")])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("strong",[e._v("Sorties positivement")]),i("br"),e._v("fin accompagnement social et/ou"),i("br"),e._v("prise en charge dans un autre dispositif")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("strong",[e._v("Exclusion")]),e._v(" du dispositif")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("strong",[e._v("Abandon / départ volontaire")])])}],lc={props:{value:{type:Object,required:!1,default(){return{in:{households:0,people:0,women:0,minors:0},out_positive:{households:0,people:0,women:0,minors:0},out_abandoned:{households:0,people:0,women:0,minors:0},out_excluded:{households:0,people:0,women:0,minors:0}}}},inOnly:{type:Boolean,required:!1,default:!1},outOnly:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1}},data(){return{data:this.value}},watch:{"data.in.households"(){this.emitInput()},"data.in.people"(){this.emitInput()},"data.in.women"(){this.emitInput()},"data.in.minors"(){this.emitInput()},"data.out_positive.households"(){this.emitInput()},"data.out_positive.people"(){this.emitInput()},"data.out_positive.women"(){this.emitInput()},"data.out_positive.minors"(){this.emitInput()},"data.out_abandoned.households"(){this.emitInput()},"data.out_abandoned.people"(){this.emitInput()},"data.out_abandoned.women"(){this.emitInput()},"data.out_abandoned.minors"(){this.emitInput()},"data.out_excluded.households"(){this.emitInput()},"data.out_excluded.people"(){this.emitInput()},"data.out_excluded.women"(){this.emitInput()},"data.out_excluded.minors"(){this.emitInput()}},mounted(){this.emitInput()},methods:{emitInput(){this.$emit("input",this.data)}}},cc=lc,dc=cc,uc=(i("2283"),Object(d["a"])(dc,oc,rc,!1,null,null,null)),pc=uc.exports;const mc=["selectMultiple","checkbox","autocompleter","townList","planFunding","etp"];var hc={components:{Datepicker:tr["default"],Autocompleter:cr,Address:wr,Location:qr,AddressWithLocation:zr,TownList:Pl,PlanFunding:Ll,Collectivity:yl,Organization:Kl,Etp:nc,Audience:pc,PlanHousing:Hl},props:{id:{type:String,required:!0},mandatory:{type:Boolean,required:!0},type:{type:String,required:!1,default:"text"},label:{type:String,required:!0},description:{type:String,required:!1},options:{type:Array,required:!1,default(){return[]}},specificProps:{type:Object,required:!1,default(){return{}}},value:{required:!1,default(){if(-1!==mc.indexOf(this.type))return[]}},disabled:{type:Boolean,required:!1,default:!1},errors:{type:Array,required:!1,default(){return[]}},alertMessage:{type:String,required:!1,default:null}},data(){return{data:this.value,showPassword:!1}},computed:{props(){let e={};return"date"===this.type&&(e={language:zi["fr"],mondayFirst:!0,fullMonthName:!0,format:"dd MMMM yyyy",calendarButton:!0,calendarButtonIconContent:"",clearButton:!0}),Object.assign(e,this.specificProps)},optionsAreGrouped(){return this.options&&Object.prototype.hasOwnProperty.call(this.options[0],"options")}},mounted(){this.$nextTick(()=>{this.$emit("input",this.data)})},watch:{value(){this.data=this.value},data(){this.$emit("input",this.data),this.$emit("change")},options(){Array.isArray(this.data)?this.data=this.data.filter(e=>-1!==this.options.indexOf(e)):-1===this.options.indexOf(this.data)&&(this.data=void 0)}}},vc=hc,fc=vc,_c=(i("8aa6"),Object(d["a"])(fc,Xo,er,!1,null,null,null)),gc=_c.exports,bc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:{slideNote:!0,"slideNote--visible":e.visible}},[i("header",{staticClass:"slideNote-header"},[i("h1",{staticClass:"slideNote-title"},[i("font-awesome-icon",{attrs:{icon:e.iconName}}),e._v(" "+e._s(e.title))],1),i("span",{staticClass:"slideNote-toggle",on:{click:e.toggle}},[i("font-awesome-icon",{attrs:{icon:e.caret,size:"2x"}})],1)]),i("div",{ref:"body",staticClass:"slideNote-body"},[e._t("content",[i("p",{ref:"content",staticClass:"slideNote-content",domProps:{innerHTML:e._s(e.content)}})])],2)])},yc=[],Cc={props:{title:{required:!0,type:String},content:{required:!1,type:String},opened:{required:!1,type:Boolean,default:!0},icon:{required:!1,type:String,default:"info-circle"}},data(){return{iconName:this.icon,maxHeight:null,visible:!1!==this.opened}},computed:{caret(){return"caret-"+(!0===this.visible?"up":"down")}},mounted(){this.maxHeight=this.$refs.body.offsetHeight,this.refreshHeight()},methods:{toggle(){this.visible=!this.visible,this.refreshHeight()},refreshHeight(){!0===this.visible?this.$refs.body.style.maxHeight=this.maxHeight+"px":this.$refs.body.style.maxHeight="0"}}},wc=Cc,kc=wc,xc=(i("2d21"),Object(d["a"])(kc,bc,yc,!1,null,"569f8548",null)),Pc=xc.exports;const $c=6e3;function Sc(e){return s["default"].notify(Object.prototype.hasOwnProperty.call(e,"duration")?e:{...e,duration:$c})}var Ec={components:{Input:gc,SlideNote:Pc},props:{title:{type:String,required:!1},descriptionTitle:{type:String,required:!1},description:{type:String,required:!1},steps:{type:Array,required:!0},value:{type:Object,required:!1,default(){return{}}}},data(){return{refreshId:0,currentStepIndex:0,data:this.value,pending:!1,errors:null,responses:[]}},computed:{breadcrumbItems(){return this.steps.reduce((e,t,i)=>[...e,{...t,classNames:{"form-breadcrumbItem":!0,"form-breadcrumbItem--current":i===this.currentStepIndex,"form-breadcrumbItem--done":i<this.currentStepIndex},isSeparator:!1,stepIndex:i},{classNames:{"form-breadcrumbSeparator":!0},isSeparator:!0}],[]).slice(0,-1)},currentStep(){return this.steps[this.currentStepIndex]||null},sections(){return this.currentStep?this.currentStep.sections:[]},fullSections(){return this.sections.filter(({inputs:e})=>Object.values(e).some(e=>this.isInputVisible(e)))},inputs(){return this.currentStep.sections.reduce((e,t)=>({...e,...t.inputs}),{})},wording(){return{submit:"Étape suivante",error:"Certaines données saisies sont incorrectes",success:null,...this.currentStep.wording||{}}},filteredData(){const e=Object.keys(this.inputs);return e.filter(e=>this.isInputActive(this.inputs[e])).reduce((e,t)=>({...e,[t]:this.data[t]}),{})},filteredErrors(){return this.errors?Object.keys(this.errors.fields||{}).filter(e=>void 0!==this.inputs[e]).reduce((e,t)=>({...e,[t]:this.errors.fields[t]}),{}):null},numberOfFilteredErrors(){return this.filteredErrors?Object.keys(this.filteredErrors).length:0},submitPrefix(){return this.currentStep&&this.currentStep.submitPrefix}},watch:{value(){this.data=this.value},data(){this.onDataChange()}},methods:{submit(){this.currentStep.submit?!0!==this.pending&&(this.pending=!0,this.errors=null,this.currentStep.submit(this.filteredData,this.responses).then(e=>{null!==this.wording.success&&Sc({group:"notifications",type:"success",title:"Succès",text:this.wording.success}),this.$emit("stepcomplete",this.currentStepIndex,e),this.goToNextStep(e),this.pending=!1,this.errors=null}).catch(e=>{this.pending=!1,this.errors={main:e&&e.user_message||"erreur inconnue",fields:e&&e.fields||{}}})):this.goToNextStep(null)},goToNextStep(e){this.responses.push(e),this.currentStepIndex>=this.steps.length-1?this.$emit("complete",e,this.responses):this.currentStepIndex+=1},getInputById(e){return null===this.currentStep?null:this.inputs[e]||null},onDataChange(){this.refreshId+=1,this.$emit("input",this.data)},isInputActive(e){return!e.condition||e.condition(this.data)},isInputVisible(e){return this.isInputActive(e)||e.inactiveMessage},isInputDisabled(e){return!0===this.pending||!0===e.disabled||e.inactiveMessage&&!this.isInputActive(e)},getInputAlert(e){return e.inactiveMessage&&!this.isInputActive(e)?e.inactiveMessage:null}}},Tc=Ec,Ac=Tc,Ic=(i("f6ce"),Object(d["a"])(Ac,Zo,Ko,!1,null,null,null)),Oc=Ic.exports,qc={components:{NavBar:Qo,Form:Oc},data(){return{formData:{},formDefinition:{title:"Connexion à la plateforme",steps:[{sections:[{inputs:{email:{type:"text",label:"Votre courriel",mandatory:!0},password:{type:"password",label:"Votre mot de passe",mandatory:!0}}}],wording:{submit:"Me connecter",succes:"Vous êtes désormais connecté",error:"La tentative de connexion a échoué"},submitPrefix:'<a href="/#/nouveau-mot-de-passe">J\'ai perdu mon mot de passe</a>',submit:({email:e,password:t})=>wo(e,t)}]}}},methods:{onComplete(){window.localStorage.setItem("logged_once",!0),this.$router.push({path:"/"})}}},Mc=qc,Dc=Mc,jc=(i("f276"),Object(d["a"])(Dc,Yn,Jn,!1,null,null,null)),Nc=jc.exports,Fc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("PublicLayout",{staticClass:"contact",attrs:{stickyHeader:!1,displayLanguagePicker:!0}},[i("div",{staticClass:"bg-corail full-width text-center py-8"},[i("div",{staticClass:"max-w-3xl mx-auto"},[i("h1",{staticClass:"text-display-lg  text-white "},[e._v(" "+e._s(e.$t("contactPage.title"))+" ")])])]),i("PublicContainer",{staticClass:"py-16"},[i("div",{staticClass:"max-w-xl mx-auto"},[i("h2",{staticClass:"text-display-lg mb-4"},[e._v(" "+e._s(e.$t("contactPage.contactUs"))+" ")]),i("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){var s=t.handleSubmit,a=t.errors;return[i("form",{staticClass:"max-w-xl mt-12",on:{submit:function(t){return t.preventDefault(),s(e.submitForm)}}},[i("InputGroup",[i("TextInput",{attrs:{label:e.$t("contactPage.email"),id:"email",validationName:"Email",rules:"required|email"},model:{value:e.commonFields.email,callback:function(t){e.$set(e.commonFields,"email",t)},expression:"commonFields.email"}}),i("TextInput",{attrs:{label:e.$t("contactPage.firstname"),id:"first_name",name:"Prénom",rules:"required"},model:{value:e.commonFields.first_name,callback:function(t){e.$set(e.commonFields,"first_name",t)},expression:"commonFields.first_name"}}),i("TextInput",{attrs:{label:e.$t("contactPage.lastname"),id:"last_name",name:"Nom de famille",rules:"required"},model:{value:e.commonFields.last_name,callback:function(t){e.$set(e.commonFields,"last_name",t)},expression:"commonFields.last_name"}})],1),i("CheckableGroup",{attrs:{title:e.$t("contactPage.requestType"),name:e.$t("contactPage.requestType"),id:"request_type",direction:"row"}},[i("Checkbox",{attrs:{checkValue:"help",label:e.$t("contactPage.help"),variant:"card"},model:{value:e.commonFields.request_type,callback:function(t){e.$set(e.commonFields,"request_type",t)},expression:"commonFields.request_type"}}),i("Checkbox",{attrs:{checkValue:"report",label:e.$t("contactPage.report"),variant:"card"},model:{value:e.commonFields.request_type,callback:function(t){e.$set(e.commonFields,"request_type",t)},expression:"commonFields.request_type"}}),i("Checkbox",{attrs:{checkValue:"help-request",label:e.$t("contactPage.requestHelp"),variant:"card"},model:{value:e.commonFields.request_type,callback:function(t){e.$set(e.commonFields,"request_type",t)},expression:"commonFields.request_type"}}),i("Checkbox",{attrs:{checkValue:"info-request",label:e.$t("contactPage.requestInfo"),variant:"card"},model:{value:e.commonFields.request_type,callback:function(t){e.$set(e.commonFields,"request_type",t)},expression:"commonFields.request_type"}}),i("Checkbox",{attrs:{checkValue:"access-request",label:e.$t("contactPage.requestAccess"),variant:"card"},model:{value:e.commonFields.request_type,callback:function(t){e.$set(e.commonFields,"request_type",t)},expression:"commonFields.request_type"}})],1),e.isRequestAccess?i("CheckableGroup",{attrs:{title:e.$t("contactPage.isActor"),info:e.$t("contactPage.actorExample"),rules:"required",id:"access_request",direction:"row"}},[i("Radio",{attrs:{checkValue:!0,label:e.$t("contactPage.yes"),variant:"card"},model:{value:e.commonFields.is_actor,callback:function(t){e.$set(e.commonFields,"is_actor",t)},expression:"commonFields.is_actor"}}),i("Radio",{attrs:{checkValue:!1,label:e.$t("contactPage.no"),variant:"card"},model:{value:e.commonFields.is_actor,callback:function(t){e.$set(e.commonFields,"is_actor",t)},expression:"commonFields.is_actor"}})],1):e._e(),e.isRequestAccessAndActor?i("CheckableGroup",{attrs:{title:e.$t("contactPage.whichEstablishment"),rules:"required",id:"is_actor"}},[i("Radio",{attrs:{checkValue:"public_establishment",label:e.$t("contactPage.public"),variant:"card"},model:{value:e.requestAccessFields.organization_category,callback:function(t){e.$set(e.requestAccessFields,"organization_category",t)},expression:"\n                                requestAccessFields.organization_category\n                            "}}),i("Radio",{attrs:{checkValue:"territorial_collectivity",label:e.$t("contactPage.territorialCollectivity"),variant:"card"},model:{value:e.requestAccessFields.organization_category,callback:function(t){e.$set(e.requestAccessFields,"organization_category",t)},expression:"\n                                requestAccessFields.organization_category\n                            "}}),i("Radio",{attrs:{checkValue:"association",label:e.$t("contactPage.association"),variant:"card"},model:{value:e.requestAccessFields.organization_category,callback:function(t){e.$set(e.requestAccessFields,"organization_category",t)},expression:"\n                                requestAccessFields.organization_category\n                            "}}),i("Radio",{attrs:{checkValue:"administration",label:e.$t("contactPage.administration"),variant:"card"},model:{value:e.requestAccessFields.organization_category,callback:function(t){e.$set(e.requestAccessFields,"organization_category",t)},expression:"\n                                requestAccessFields.organization_category\n                            "}})],1):e._e(),e.isPublicEstablishmentRequest?i("PublicEstablishmentForm",{attrs:{organizationType:e.publicEstablishmentFields.organization_type,organizationTerritory:e.publicEstablishmentFields.organization_public,organizationFunction:e.requestAccessFields.position},on:{"update:organizationType":function(t){return e.$set(e.publicEstablishmentFields,"organization_type",t)},"update:organization-type":function(t){return e.$set(e.publicEstablishmentFields,"organization_type",t)},"update:organizationTerritory":function(t){return e.$set(e.publicEstablishmentFields,"organization_public",t)},"update:organization-territory":function(t){return e.$set(e.publicEstablishmentFields,"organization_public",t)},"update:organizationFunction":function(t){return e.$set(e.requestAccessFields,"position",t)},"update:organization-function":function(t){return e.$set(e.requestAccessFields,"position",t)}}}):e._e(),e.isTerritorialCollectivityRequest?i("TerritorialCollectivityForm",{attrs:{collectivityName:e.territorialCollectivityFields.territorial_collectivity,collectivityFunction:e.requestAccessFields.position},on:{"update:collectivityName":function(t){return e.$set(e.territorialCollectivityFields,"territorial_collectivity",t)},"update:collectivity-name":function(t){return e.$set(e.territorialCollectivityFields,"territorial_collectivity",t)},"update:collectivityFunction":function(t){return e.$set(e.requestAccessFields,"position",t)},"update:collectivity-function":function(t){return e.$set(e.requestAccessFields,"position",t)}}}):e._e(),e.isAssociationRequest?i("AssociationForm",{attrs:{associationName:e.associationFields.association,associationTerritory:e.associationFields.departement,associationFunction:e.associationFields.position,newAssociationName:e.associationFields.new_association_name,newAssociationAcronym:e.associationFields.new_association_abbreviation},on:{"update:associationName":function(t){return e.$set(e.associationFields,"association",t)},"update:association-name":function(t){return e.$set(e.associationFields,"association",t)},"update:associationTerritory":function(t){return e.$set(e.associationFields,"departement",t)},"update:association-territory":function(t){return e.$set(e.associationFields,"departement",t)},"update:associationFunction":function(t){return e.$set(e.associationFields,"position",t)},"update:association-function":function(t){return e.$set(e.associationFields,"position",t)},"update:newAssociationName":function(t){return e.$set(e.associationFields,"new_association_name",t)},"update:new-association-name":function(t){return e.$set(e.associationFields,"new_association_name",t)},"update:newAssociationAcronym":function(t){return e.$set(e.associationFields,"new_association_abbreviation",t)},"update:new-association-acronym":function(t){return e.$set(e.associationFields,"new_association_abbreviation",t)}}}):e._e(),e.isAdministrationRequest?i("AdministrationForm",{attrs:{administrationName:e.administrationFields.organization_administration,administrationFunction:e.requestAccessFields.position},on:{"update:administrationName":function(t){return e.$set(e.administrationFields,"organization_administration",t)},"update:administration-name":function(t){return e.$set(e.administrationFields,"organization_administration",t)},"update:administrationFunction":function(t){return e.$set(e.requestAccessFields,"position",t)},"update:administration-function":function(t){return e.$set(e.requestAccessFields,"position",t)}}}):e._e(),i("TextArea",{attrs:{rows:8,label:e.$t("contactPage.message"),id:"access_request_message"},model:{value:e.commonFields.access_request_message,callback:function(t){e.$set(e.commonFields,"access_request_message",t)},expression:"commonFields.access_request_message"}}),e._v(" "),i("CheckableGroup",{attrs:{validationName:"Accord",rules:"required",id:"legal"}},[i("Checkbox",{attrs:{checkValue:"confirm",label:e.$t("contactPage.legal")},model:{value:e.commonFields.legal,callback:function(t){e.$set(e.commonFields,"legal",t)},expression:"commonFields.legal"}})],1),Object.values(a).filter((function(e){return e.length})).length?i("div",{staticClass:"bg-red-200 p-3 mb-8"},[e._v(" "+e._s(e.$t("contactPage.error"))+" "),i("ul",{staticClass:"mt-4"},e._l(a,(function(t,s){return i("li",{directives:[{name:"show",rawName:"v-show",value:t.length,expression:"error.length"}],key:s},[i("router-link",{staticClass:"link",attrs:{to:{hash:s}}},[e._v(e._s(t[0]))])],1)})),0)]):e._e(),i("div",{staticClass:"flex justify-between mt-8"},[i("router-link",{attrs:{to:"/"}},[i("Button",{attrs:{variant:"primaryText"}},[e._v(e._s(e.$t("contactPage.cancel")))])],1),i("Button",{attrs:{type:"submit",variant:"primary",loading:e.loading}},[e._v(e._s(e.$t("contactPage.send")))])],1)],1)]}}])}),i("div",{staticClass:"text-display-md mt-32 mb-2"},[e._v(" "+e._s(e.$t("contactPage.share"))+" ")]),i("SocialShare",{staticClass:"mb-8"})],1)])],1)},Lc=[];function zc(e){return oo("/contact",e)}var Bc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("Select",{attrs:{label:"Précisez le type de structure",value:e.organizationType,rules:"required",id:"organization_type"},on:{input:function(t){return e.$emit("update:organizationType",t)}}},[i("SelectOption",{attrs:{value:"none"}},[e._v("- Selectionner un choix -")]),e._l(e.orgTypesOptions,(function(t){return i("SelectOption",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],2),i("Select",{attrs:{label:"Territoire de rattachement",value:e.organizationTerritory,rules:"required",id:"organization_public"},on:{input:function(t){return e.$emit("update:organizationTerritory",t)}}},[i("SelectOption",[e._v("- Selectionner un choix -")]),e._l(e.orgTerritoryOptions,(function(t){return i("SelectOption",{key:t.value,attrs:{value:t.value}},[e._v(" "+e._s(t.label)+" ")])}))],2),i("TextInput",{attrs:{label:"Votre fonction",value:e.organizationFunction,rules:"required",id:"position"},on:{input:function(t){return e.$emit("update:organizationFunction",t)}}})],1)},Rc=[];function Vc(){return no("/organization-categories")}function Uc(e){return no(`/organization-categories/${e}/organization-types`)}function Hc(e,t=null){return no(`/organization-categories/${e}/organizations${null!==t?"?search="+t:""}`)}function Gc(e){return no(`/organization-types/${e}/organizations`)}function Wc(e){return no(`/organizations/${e}/users`)}function Yc(e,t,i){let s="";return void 0!==i?s="departementId="+encodeURIComponent(i):void 0!==t&&(s="regionId="+encodeURIComponent(t)),no(`/organization-categories/${e}/users?${s}`)}var Jc={props:{organizationType:{required:!0},organizationTerritory:{required:!0},organizationFunction:{required:!0}},data(){return{orgTypesOptions:[],orgTerritoryOptions:[]}},async mounted(){const{types:e}=await Uc("public_establishment");this.orgTypesOptions=e.filter(({numberOfOrganizations:e})=>e>0).filter(({name_singular:e})=>"Gendarmerie nationale"!==e).map(({id:e,name_singular:t,abbreviation:i})=>({value:e,label:i||t}))},watch:{async organizationType(e){if("none"===e)return void(this.orgTerritoryOptions=[]);const{organizations:t}=await Gc(e);this.orgTerritoryOptions=t.map(e=>{const t=e.location_type;let i=e[t+"_name"];return"nation"===t?i="France":"departement"===t&&(i=`${e[t+"_code"]} - ${e[t+"_name"]}`),{value:e.id,label:i}})}}},Qc=Jc,Zc=Object(d["a"])(Qc,Bc,Rc,!1,null,null,null),Kc=Zc.exports,Xc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("InputWrapper",[i("InputLabel",{attrs:{label:"Nom de la structure"}}),i("ValidationProvider",{attrs:{rules:"required",name:"Nom de la structure",vid:"territorial_collectivity"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[i("div",{staticClass:"v1"},[i("Collectivity",{attrs:{value:e.collectivityName},on:{input:function(t){return e.$emit("update:collectivityName",t)}}})],1),i("InputError",[e._v(e._s(s[0]))])]}}])})],1),i("TextInput",{attrs:{label:"Votre fonction",value:e.collectivityFunction,rules:"required",id:"position"},on:{input:function(t){return e.$emit("update:collectivityFunction",t)}}})],1)},ed=[],td={components:{InputLabel:ce,Collectivity:fl,InputWrapper:he,InputError:be},props:{collectivityName:{required:!0},collectivityFunction:{required:!0}}},id=td,sd=Object(d["a"])(id,Xc,ed,!1,null,null,null),ad=sd.exports,nd=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("Select",{attrs:{label:"Précisez le type de structure",value:e.associationName,rules:"required",id:"association"},on:{input:function(t){return e.$emit("update:associationName",t)}}},[i("optgroup",{attrs:{label:"Autre"}},[i("option",{attrs:{value:"Autre"}},[e._v("Mon association n'est pas dans cette liste")])]),i("optgroup",{attrs:{label:"Associations connues"}},e._l(e.associationNameOptions,(function(t){return i("option",{key:t.value,domProps:{value:t.value}},[e._v(e._s(t.label))])})),0)]),"Autre"===e.associationName?i("div",[i("TextInput",{attrs:{label:"Précisez le nom complet",value:e.newAssociationName,rules:"required",id:"new_association_name"},on:{input:function(t){return e.$emit("update:newAssociationName",t)}}}),i("TextInput",{attrs:{label:"Précisez l'acronyme, si besoin",value:e.newAssociationAcronym,id:"new_association_abbreviation"},on:{input:function(t){return e.$emit("update:newAssociationAcronym",t)}}})],1):e._e(),i("div",[i("Select",{attrs:{label:"Territoire de rattachement",value:e.associationTerritory,rules:"required",id:"departement"},on:{input:function(t){return e.$emit("update:associationTerritory",t)}}},[i("SelectOption",[e._v("- Selectionner un choix -")]),e._l(e.associationTerritoryOptions,(function(t){return i("SelectOption",{key:t.value,attrs:{value:t.value}},[e._v(" "+e._s(t.label)+" ")])}))],2)],1),i("TextInput",{attrs:{label:"Votre fonction",value:e.associationFunction,rules:"required",id:"position"},on:{input:function(t){return e.$emit("update:associationFunction",t)}}})],1)},od=[],rd={props:{associationName:{required:!0},associationTerritory:{required:!0},associationFunction:{required:!0},newAssociationName:{required:!0},newAssociationAcronym:{required:!0}},data(){return{associationNameOptions:[],associationTerritoryOptions:[]}},async mounted(){const[{organizations:e},{departements:t}]=await Promise.all([Hc("association"),_r()]),i=[];this.associationNameOptions=e.filter(e=>-1===i.indexOf(e.name)&&(i.push(e.name),!0)).map(({name:e,abbreviation:t})=>({value:e,label:null!==t?`${t} (${e})`:e})),this.associationTerritoryOptions=t.map(({code:e,name:t})=>({value:e,label:`${e} - ${t}`}))}},ld=rd,cd=Object(d["a"])(ld,nd,od,!1,null,null,null),dd=cd.exports,ud=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("Select",{attrs:{label:"Nom de la structure",value:e.administrationName,rules:"required",id:"organization_administration"},on:{input:function(t){return e.$emit("update:administrationName",t)}}},[i("SelectOption",{attrs:{value:"none"}},[e._v("- Selectionner un choix -")]),e._l(e.administrationNameOptions,(function(t){return i("SelectOption",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],2),i("TextInput",{attrs:{label:"Votre fonction",value:e.administrationFunction,rules:"required",id:"position"},on:{input:function(t){return e.$emit("update:administrationFunction",t)}}})],1)},pd=[],md={props:{administrationName:{required:!0},administrationFunction:{required:!0}},data(){return{administrationNameOptions:[]}},async mounted(){const{organizations:e}=await Hc("administration");this.administrationNameOptions=e.map(({id:e,name:t})=>({value:e,label:t}))}},hd=md,vd=Object(d["a"])(hd,ud,pd,!1,null,null,null),fd=vd.exports,_d=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("a",{attrs:{href:"https://www.facebook.com/sharer/sharer.php?u="+e.url,target:"_blank"}},[i("Icon",{staticClass:"text-display-lg",attrs:{icon:["fab","facebook-square"]}})],1),e._v(" "+e._s(" ")+" "),i("a",{attrs:{href:"http://www.twitter.com/share?url="+e.url,target:"_blank"}},[i("Icon",{staticClass:"text-display-lg",attrs:{icon:["fab","twitter-square"]}})],1)])},gd=[],bd={computed:{url(){return encodeURIComponent("https://resorption-bidonvilles.beta.gouv.fr/#/contact")}}},yd=bd,Cd=Object(d["a"])(yd,_d,gd,!1,null,null,null),wd=Cd.exports,kd={components:{SocialShare:wd,Checkbox:Ye,CheckableGroup:Ni,PublicContainer:As,PublicLayout:oa,PublicEstablishmentForm:Kc,TerritorialCollectivityForm:ad,AdministrationForm:fd,AssociationForm:dd},computed:{isFrenchLocale(){return"fr"===this.$i18n.locale},isRequestAccess(){return this.commonFields.request_type.includes("access-request")&&this.isFrenchLocale},isRequestAccessAndActor(){return this.isRequestAccess&&this.commonFields.is_actor},isPublicEstablishmentRequest(){return this.isRequestAccessAndActor&&"public_establishment"===this.requestAccessFields.organization_category},isTerritorialCollectivityRequest(){return this.isRequestAccessAndActor&&"territorial_collectivity"===this.requestAccessFields.organization_category},isAssociationRequest(){return this.isRequestAccessAndActor&&"association"===this.requestAccessFields.organization_category},isAdministrationRequest(){return this.isRequestAccessAndActor&&"administration"===this.requestAccessFields.organization_category}},methods:{async submitForm(){const e={...this.commonFields,legal:this.commonFields.legal.length>0,is_actor:!!this.commonFields.is_actor,...this.isRequestAccessAndActor?this.requestAccessFields:{},...this.isPublicEstablishmentRequest?this.publicEstablishmentFields:{},...this.isTerritorialCollectivityRequest?this.territorialCollectivityFields:{},...this.isAssociationRequest?this.associationFields:{},...this.isAdministrationRequest?this.administrationFields:{}};this.loading=!0;try{await zc(e),this.loading=!1,this.$router.push("/"),Sc({group:"notifications",type:"success",title:"Succès",text:this.isRequestAccessAndActor?"Votre demande d'accès a été envoyée":"Votre message a bien été envoyé"})}catch(t){this.loading=!1,this.error=t,this.$refs.form.setErrors(t.fields)}}},data(){return{loading:!1,error:null,commonFields:{email:this.$route.query.email||"",first_name:"",last_name:"",request_type:[],legal:[],is_actor:null,access_request_message:""},requestAccessFields:{organization_category:null,position:""},publicEstablishmentFields:{organization_type:null,organization_public:null},territorialCollectivityFields:{territorial_collectivity:null},associationFields:{association:"",departement:"",new_association_name:"",new_association_abbreviation:""},administrationFields:{organization_administration:""}}}},xd=kd,Pd=(i("65a2"),Object(d["a"])(xd,Fc,Lc,!1,null,null,null)),$d=Pd.exports,Sd=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--dashboard"},[i("Quickview",{attrs:{town:e.quickview.town,origin:e.quickview.originEvent},on:{"outside-click":e.hideQuickview}}),i("POIView",{attrs:{poi:e.poiview.poi,origin:e.poiview.originEvent},on:{"outside-click":e.hidePOIView}}),i("NavBar"),i("section",{staticClass:"dashboard"},[i("simplebar",{ref:"filters",staticClass:"filters",attrs:{"data-simplebar-auto-hide":"false"}},e._l(e.allowedFilters,(function(e){return i("FilterGroup",{key:e.id,attrs:{id:e.id,faIcon:e.faIcon,icon:e.icon,label:e.label,options:e.options,opened:e.opened}})})),1),i("div",{ref:"main",staticClass:"content",style:{width:e.loading||e.error?0:"auto"}},[i("Map",e._b({ref:"map",on:{"town-click":e.showQuickview,"poi-click":e.showPOIView,"on-row-click":e.routeToTown}},"Map",e.rendererProps,!1))],1),e.loading?i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Chargement des données en cours...")])]):e._e(),e.error?i("div",{staticClass:"notification error full-width"},[i("span",[e._v(e._s(e.error)+". "),i("a",{attrs:{href:"#"},on:{click:e.fetchData}},[e._v("Réessayer ?")])])]):e._e()],1)],1)])},Ed=[],Td=i("8d3b"),Ad=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"filterGroup"},[i("aside",[null!==e.faIcon?i("font-awesome-icon",{attrs:{icon:e.faIcon}}):i("img",{attrs:{src:e.icon,alt:""}})],1),i("main",[i("h1",{on:{click:e.toggle}},[e._v(e._s(e.label)+" "),i("span",{staticClass:"filterGroup-toggle"},[e._v("( "+e._s(e.toggler)+" )")])]),e._l(e.options,(function(t,s){return"open"===e.status?i("div",{key:s},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"option.checked"}],attrs:{type:"checkbox",id:e.id+"-"+(t.id||s)},domProps:{value:t.value,checked:Array.isArray(t.checked)?e._i(t.checked,t.value)>-1:t.checked},on:{change:function(i){var s=t.checked,a=i.target,n=!!a.checked;if(Array.isArray(s)){var o=t.value,r=e._i(s,o);a.checked?r<0&&e.$set(t,"checked",s.concat([o])):r>-1&&e.$set(t,"checked",s.slice(0,r).concat(s.slice(r+1)))}else e.$set(t,"checked",n)}}}),i("label",{staticClass:"label-inline",attrs:{for:e.id+"-"+(t.id||s)}},[void 0!==t.icon?i("font-awesome-icon",{style:{color:"#"+t.icon.color},attrs:{icon:t.icon.id,"fixed-width":""}}):e._e(),i("span",[e._v(e._s(t.label))])],1),i("br")]):e._e()}))],2)])},Id=[],Od={props:{id:String,icon:{type:String,required:!1,default:null},faIcon:{type:String,required:!1,default:null},label:String,options:Array,opened:{type:Boolean,default:!1}},data(){return{status:!0===this.opened?"open":"closed"}},computed:{toggler(){return"open"===this.status?"-":"+"}},methods:{toggle(){this.status="open"===this.status?"closed":"open"}}},qd=Od,Md=qd,Dd=(i("77c2"),Object(d["a"])(Md,Ad,Id,!1,null,null,null)),jd=Dd.exports,Nd=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"map"},[e.displaySearchbar?i("Address",{attrs:{placeholder:e.placeholder},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}}):e._e(),i("div",{attrs:{id:"map"}},[i("div",{ref:"adressToggler",staticClass:"leaflet-address-toggler"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.showAddresses,expression:"showAddresses"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.showAddresses)?e._i(e.showAddresses,null)>-1:e.showAddresses},on:{change:function(t){var i=e.showAddresses,s=t.target,a=!!s.checked;if(Array.isArray(i)){var n=null,o=e._i(i,n);s.checked?o<0&&(e.showAddresses=i.concat([n])):o>-1&&(e.showAddresses=i.slice(0,o).concat(i.slice(o+1)))}else e.showAddresses=a}}}),e._v(" Voir les adresses des sites ")]),i("div",{ref:"legends",staticClass:"leaflet-legend"},[i("h1",[e._v("Légende")]),e._l(e.fieldTypes,(function(t){return i("p",[i("span",{style:{"background-color":t.color}}),e._v(" "+e._s(t.label)+" ")])}))],2)])],1)},Fd=[],Ld=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"search__group"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.query,expression:"query",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:e.placeholder,autofocus:e.autofocus},domProps:{value:e.query},on:{keyup:e.onTyping,keydown:e.onNavigation,focus:e.onFocus,blur:[e.onBlur,function(t){return e.$forceUpdate()}],input:function(t){t.target.composing||(e.query=t.target.value.trim())}}}),e.suggestions.length?i("div",{staticClass:"autocomplete"},e._l(e.suggestions,(function(t,s){return i("p",{staticClass:"autocomplete-result",class:{active:s===e.indexOfHighlightedSuggestion},domProps:{innerHTML:e._s((t.type?"<span>"+t.type+"</span><br/>":"")+t.label)},on:{mousedown:function(i){return e.onSuggestionClick(t)}}})})),0):e._e(),e.showMagnifier?i("button",{staticClass:"overlay-button",attrs:{"aria-label":"Recherche"}},[i("svg",{staticClass:"icon icon-search"},[i("use",{attrs:{"xlink:href":"#magnifier"}})])]):e._e()])},zd=[];const Bd=200,Rd=3;var Vd={props:{value:Object,autofocus:Boolean,placeholder:String,autocompleteFunction:{type:Function,default:vr},showMagnifier:{type:Boolean,default:!0},typingMin:{type:Number,default:Rd}},data(){return{pendingRequest:null,typingTimeout:null,suggestions:[],filled:null!==this.value,query:null!==this.value&&this.value.label||"",previousQuery:null!==this.value?this.value.label:"",focused:!1,indexOfHighlightedSuggestion:null}},mounted(){document.addEventListener("click",this.checkOutsideClick)},beforeDestroy(){null!==this.typingTimeout&&(clearTimeout(this.typingTimeout),this.typingTimeout=null)},destroyed(){document.removeEventListener("click",this.checkOutsideClick)},methods:{onTyping(){this.previousQuery!==this.query&&(this.previousQuery=this.query,null!==this.typingTimeout&&clearTimeout(this.typingTimeout),this.filled=!1,this.$emit("input",null),this.setSuggestions([]),this.indexOfHighlightedSuggestion=null,this.typingTimeout=setTimeout(this.autocomplete,Bd))},onFocus(){this.focused=!0},onBlur(){this.focused=!1,null!==this.pendingRequest&&this.pendingRequest.abort(),!1===this.filled&&(this.query="",this.previousQuery=""),this.setSuggestions([])},onNavigation(e){38===e.keyCode?this.indexOfHighlightedSuggestion-1<0?this.indexOfHighlightedSuggestion=null:this.indexOfHighlightedSuggestion-=1:40===e.keyCode?this.suggestions.length>0&&(null===this.indexOfHighlightedSuggestion?this.indexOfHighlightedSuggestion=0:this.indexOfHighlightedSuggestion=Math.min(this.suggestions.length-1,this.indexOfHighlightedSuggestion+1)):13===e.keyCode?null!==this.indexOfHighlightedSuggestion&&this.onSelect(this.suggestions[this.indexOfHighlightedSuggestion]):this.indexOfHighlightedSuggestion=null},onSuggestionClick(e){this.onSelect(e)},onSelect(e){const{label:t}=e;this.$emit("input",e),this.setSuggestions([]),this.filled=!0,this.query=t,this.previousQuery=t},autocomplete(){null!==this.pendingRequest&&this.pendingRequest.abort(),this.query.length<this.typingMin||!0!==this.focused||(this.pendingRequest=this.autocompleteFunction(this.query),this.pendingRequest.then(e=>{!0===this.focused&&this.setSuggestions(e)}).catch(()=>{this.pendingRequest=null}))},checkOutsideClick(e){this.$el.contains(e.target)||this.setSuggestions([])},setSuggestions(e){this.suggestions=e,this.suggestions.length>0?this.indexOfHighlightedSuggestion=0:this.indexOfHighlightedSuggestion=null}}},Ud=Vd,Hd=Ud,Gd=(i("e072"),Object(d["a"])(Hd,Ld,zd,!1,null,"6b423108",null)),Wd=Gd.exports,Yd=(i("8243"),i("3ac1"),i("7319"),i("67e3")),Jd=i.n(Yd),Qd=i("71ee"),Zd=i.n(Qd),Kd=i("64e1"),Xd=i.n(Kd),eu=i("0eac"),tu=i.n(eu);const iu=[46.7755829,2.0497727],su=13;var au={components:{Address:Wd},props:{towns:{type:Array,required:!1,default(){return[]}},pois:{type:Array,required:!1,default(){return[]}},displaySearchbar:{type:Boolean,required:!1,default:!0},placeholder:{type:String,required:!1,default:"Recherchez un lieu en saisissant une adresse"},defaultView:{type:Object,default:()=>({center:iu,zoom:6})}},data(){return{map:null,markersGroup:{towns:$r.a.markerClusterGroup(),search:$r.a.markerClusterGroup(),pois:$r.a.markerClusterGroup({disableClusteringAtZoom:su})},searchMarker:this.createSearchMarker(),townSearchMarker:null,townMarkers:[],poiMarkers:[],poiMarkersVisible:!1,hashedTownMarkers:{},address:null,showAddresses:!1,fieldTypes:fo().field_types}},computed:{fieldTypeColors(){return this.fieldTypes?this.fieldTypes.reduce((e,t)=>Object.assign(e,{[t.id]:t.color}),{}):{}},mapLayers(){return{Satellite:$r.a.tileLayer.provider("Esri.WorldImagery"),Dessin:$r.a.tileLayer.provider("OpenStreetMap.Mapnik")}}},watch:{towns(){this.syncTownMarkers()},pois(){this.syncPOIMarkers()},showAddresses(){!0===this.showAddresses?document.body.setAttribute("class","leaflet-show-addresses"):document.body.setAttribute("class","")},address(){if(null===this.address)return void this.clearSearchMarker();const{coordinates:[e,t],label:i,addressType:s}=this.address;this.centerMap([t,e],20),this.$nextTick(()=>{this.setSearchMarker(s,i,[t,e])})}},mounted(){this.createMap(),this.syncTownMarkers()},methods:{setupMapControls(){this.setupZoomControl(),this.setupLayersControl(),this.setupAddressTogglerControl(),this.setupFieldTypesLegendControl()},setupZoomControl(){this.map.zoomControl.setPosition("bottomright")},setupLayersControl(){const e=$r.a.control.layers(this.mapLayers,void 0,{collapsed:!1});this.map.addControl(e)},setupAddressTogglerControl(){const{adressToggler:e}=this.$refs,t=$r.a.Control.extend({options:{position:"bottomleft"},onAdd(){return e}});this.map.addControl(new t)},setupFieldTypesLegendControl(){const{legends:e}=this.$refs,t=$r.a.Control.extend({options:{position:"bottomleft"},onAdd(){return e}});this.map.addControl(new t)},setupMarkerGroups(){this.map.addLayer(this.markersGroup.towns),this.map.addLayer(this.markersGroup.search),this.map.addLayer(this.markersGroup.pois)},setupView(){const{center:e,zoom:t}=this.defaultView;this.centerMap(e,t)},createMap(){this.map=$r.a.map("map",{layers:this.mapLayers.Dessin,scrollWheelZoom:!1}),this.map.on("zoomend",this.onZoomEnd),this.setupMapControls(),this.setupMarkerGroups(),this.setupView()},onZoomEnd(){const e=this.map.getZoom();!this.poiMarkersVisible&&e>su&&(this.poiMarkersVisible=!0,this.pois.forEach(this.createPOIMarker)),this.poiMarkersVisible&&e<=su&&(this.poiMarkersVisible=!1,this.removeAllPOIMarkers())},syncTownMarkers(){this.removeAllTownMarkers(),this.towns.forEach(this.createTownMarker)},syncPOIMarkers(){this.removeAllPOIMarkers(),this.poiMarkersVisible&&this.pois.forEach(this.createPOIMarker)},removeAllTownMarkers(){this.markersGroup.towns.clearLayers(),this.townMarkers=[],this.hashedTownMarkers={}},removeAllPOIMarkers(){this.markersGroup.pois.clearLayers(),this.poiMarkers=[]},getTownAddress(e){return e.usename},getTownCoordinates(e){const{latitude:t,longitude:i}=e;return[t,i]},getTownColor(e){return void 0!==e.fieldType?this.fieldTypeColors[e.fieldType.id]:"#cccccc"},getTownWaterImage(e){return!0===e.accessToWater?Jd.a:!1===e.accessToWater?Xd.a:tu.a},createSearchMarker(){return $r.a.marker(iu,{title:"A",icon:$r.a.divIcon({className:"leaflet-marker",html:'<span class="mapPin mapPin--result">\n                        <span class="mapPin-wrapper">\n                            <span class="mapPin-marker" style="background-color: red"></span>\n                        </span>\n                        <span class="mapPin-address"></span>\n                    </span>',iconAnchor:[13,28]})})},createTownMarker(e){const t=this.getTownAddress(e),i=this.getTownCoordinates(e),s=this.getTownColor(e),a=this.getTownWaterImage(e),n=$r.a.marker(i,{title:e.address,icon:$r.a.divIcon({className:"leaflet-marker",html:`<span class="mapPin mapPin--shantytown">\n                        <span class="mapPin-wrapper">\n                            <span class="mapPin-water"><img src="${a}" /></span>\n                            <span class="mapPin-marker" style="background-color: ${s}"></span>\n                        </span>\n                        <span class="mapPin-address">${t}</span>\n                    </span>`,iconAnchor:[13,28]})});n.on("click",this.handleTownMarkerClick.bind(this,e)),n.on("add",()=>{!0===n.searchResult&&this.markTownAsSearchResult(n)}),n.addTo(this.markersGroup.towns),this.townMarkers.push(n),this.hashedTownMarkers[i.join(";")]=n},createPOIMarker(e){const{latitude:t,longitude:i}=e,s=[t,i],a=$r.a.marker(s,{title:e.address,icon:$r.a.divIcon({className:"leaflet-marker",html:`<span class="mapPin mapPin--poi" >\n                        <span class="mapPin-wrapper">\n                            <img src="${Zd.a}" width="12" height="12"/>\n                        </span>\n                        <span class="mapPin-address">${e.address}</span>\n                    </span>`,iconAnchor:[13,28]})});a.on("click",this.handlePOIMarkerClick.bind(this,e)),a.addTo(this.markersGroup.pois),this.poiMarkers.push(a)},handleTownMarkerClick(e,t){this.$emit("town-click",e,t)},handlePOIMarkerClick(e,t){this.$emit("poi-click",e,t)},centerMap(e,t){this.map.setView(e,t)},resize(){null!==this.map&&this.map.invalidateSize(!0)},clearSearchMarker(){if(null!==this.townSearchMarker)return this.townSearchMarker._icon&&this.townSearchMarker._icon.querySelector(".mapPin").classList.remove("mapPin--result"),this.townSearchMarker.searchResult=!1,void(this.townSearchMarker=null);this.searchMarker.remove()},getMatchingTownMarker(e){return this.hashedTownMarkers[e.join(";")]||null},markTownAsSearchResult(e){this.townSearchMarker=e,this.townSearchMarker.searchResult=!0,e._icon.querySelector(".mapPin").classList.add("mapPin--result")},setSearchMarker(e,t,i){this.clearSearchMarker();const s=this.getMatchingTownMarker(i);if(null!==s)return void this.markTownAsSearchResult(s);this.searchMarker.addTo(this.markersGroup.search),this.searchMarker.setLatLng(i),this.searchMarker._icon.querySelector(".mapPin-address").innerHTML=t;let a="add";"housenumber"!==e&&(a="remove"),this.searchMarker._icon.querySelector(".mapPin").classList[a]("mapPin--street")}}},nu=au,ou=nu,ru=(i("6613"),Object(d["a"])(ou,Nd,Fd,!1,null,"055bfb64",null)),lu=ru.exports,cu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:{active:e.active}},[i("div",{staticClass:"shadow"}),i("simplebar",{ref:"quickviewPanel",staticClass:"quickview",attrs:{"data-simplebar-auto-hide":"false"}},[e.town?i("header",{staticClass:"quickview-header"},[i("div",{staticClass:"quickview-actions"},[i("button",{staticClass:"actionButton",attrs:{type:"button"},on:{click:e.showTown}},[e._v("Voir le site")]),i("a",{attrs:{href:"#"},on:{click:function(t){return e.$emit("outside-click")}}},[i("svg",{staticClass:"icon icon-cross"},[i("use",{attrs:{"xlink:href":"#round-cross"}})])])]),i("h1",{staticClass:"quickview-title"},[i("a",{on:{click:e.showTown}},[e._v(e._s(e.town.address.split(/[0-9]{5}/)[0].replace(/[0-9]/g,"").replace(/,/g," ").replace(/\s{2,}/g," ")))])]),i("h2",{staticClass:"quickview-subtitle"},[e._v("Site de "+e._s(e.town.city.name))]),e.town.name?i("h2",{staticClass:"quickview-name"},[e._v(e._s(e.town.name))]):e._e(),void 0!==e.town.updatedAt?i("h2",{staticClass:"quickview-time"},[e._v("(Dernière modification le "),i("time",[e._v(e._s(e.formatDate(e.town.updatedAt)))]),e._v(")")]):e._e()]):e._e(),e._l(e.sections,(function(t,s){return i("section",{class:{even:s%2!==0}},[i("header",[i("h1",[e._v(e._s(t.title))])]),i("table",[i("tbody",e._l(t.rows,(function(t){return i("tr",[t.label?i("th",[e._v(e._s(t.label)+" :")]):e._e(),i("td",{attrs:{colspan:t.label?1:2}},[e._v(e._s(t.value))])])})),0)])])}))],2)],1)},du=[],uu={components:{simplebar:Td["a"]},props:{town:Object,origin:Event},computed:{active(){return!!this.town},caracteristicSection(){if(!this.town)return null;const e=[];return void 0!==this.town.fieldType&&e.push({label:"Type de site",value:this.town.fieldType.label}),void 0!==this.town.ownerType&&e.push({label:"Type de propriétaire",value:this.town.ownerType.label}),void 0!==this.town.builtAt&&e.push({label:"Date d'installation",value:this.town.builtAt?App.formatDate(this.town.builtAt):"Inconnue"}),0===e.length?null:{title:"Caractéristiques",rows:e}},demographySection(){if(!this.town)return null;const e=[];return void 0!==this.town.populationTotal&&e.push({label:"Nombre de personnes",value:null!==this.town.populationTotal?this.town.populationTotal:"inconnu"}),void 0!==this.town.populationCouples&&e.push({label:"Nombre de ménages",value:null!==this.town.populationCouples?this.town.populationCouples:"inconnu"}),void 0!==this.town.populationMinors&&e.push({label:"Nombre de mineurs",value:null!==this.town.populationMinors?this.town.populationMinors:"inconnu"}),void 0!==this.town.populationMinors0To3&&e.push({label:"Nombre de mineurs (0-3 ans)",value:null!==this.town.populationMinors0To3?this.town.populationMinors0To3:"inconnu"}),void 0!==this.town.populationMinors3To6&&e.push({label:"Nombre de mineurs (3-6 ans)",value:null!==this.town.populationMinors3To6?this.town.populationMinors3To6:"inconnu"}),void 0!==this.town.populationMinors6To12&&e.push({label:"Nombre de mineurs (6-12 ans)",value:null!==this.town.populationMinors6To12?this.town.populationMinors6To12:"inconnu"}),void 0!==this.town.populationMinors12To16&&e.push({label:"Nombre de mineurs (12-16 ans)",value:null!==this.town.populationMinors12To16?this.town.populationMinors12To16:"inconnu"}),void 0!==this.town.populationMinors16To18&&e.push({label:"Nombre de mineurs (16-18 ans)",value:null!==this.town.populationMinors16To18?this.town.populationMinors16To18:"inconnu"}),void 0!==this.town.minorsInSchool&&e.push({label:"Nombre d'enfants inscrits dans un établissement scolaire",value:null!==this.town.minorsInSchool?this.town.minorsInSchool:"inconnu"}),void 0!==this.town.socialOrigins&&(e.push({label:"Origines",value:this.town.socialOrigins.length>0?"":"inconnu"}),this.town.socialOrigins.forEach(t=>{e.push({value:t.label})})),0===e.length?null:{title:"Habitants",rows:e}},justiceSection(){if(!this.town)return null;const e=[],t={[!0]:"oui",[!1]:"non"};if(void 0!==this.town.justiceProcedure&&e.push({label:"Existence d'une procédure judiciaire",value:t[this.town.justiceProcedure]||"inconnu"}),void 0!==this.town.justiceRendered&&e.push({label:"Décision de justice rendue",value:t[this.town.justiceRendered]||"inconnu"}),void 0!==this.town.policeStatus){const t={none:"non demandé",requested:"demandé",granted:"obtenu"};e.push({label:"Concours de la force publique demandé",value:t[this.town.policeStatus]||"inconnu"})}return 0===e.length?null:{title:"Procédure judiciaire d'expulsion",rows:e}},sections(){return[this.caracteristicSection,this.demographySection,this.justiceSection].filter(e=>null!==e)}},mounted(){document.addEventListener("click",this.checkOutsideClick)},destroyed(){document.removeEventListener("click",this.checkOutsideClick)},methods:{hasPermission:bo,formatDate:e=>App.formatDate(e),checkOutsideClick(e){this.town&&e!==this.origin&&(this.$refs.quickviewPanel.$el.contains(e.target)||this.$emit("outside-click",e))},showTown(){const e=this.$router.resolve("/site/"+this.town.id);Xn(e.href)}}},pu=uu,mu=pu,hu=(i("e119"),Object(d["a"])(mu,cu,du,!1,null,"12c43bda",null)),vu=hu.exports,fu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:{active:e.active}},[i("div",{staticClass:"shadow"}),i("simplebar",{ref:"quickviewPanel",staticClass:"quickview",attrs:{"data-simplebar-auto-hide":"false"}},[e.poi?i("header",{staticClass:"quickview-header"},[i("div",{staticClass:"px-4"},[i("div",{staticClass:"text-right"},[i("a",{attrs:{href:"#"},on:{click:function(t){return e.$emit("outside-click")}}},[i("svg",{staticClass:"icon icon-cross"},[i("use",{attrs:{"xlink:href":"#round-cross"}})])])]),i("h1",{staticClass:"quickview-title"},[e._v(" Point de distribution alimentaire ")]),i("div",{staticClass:"text-G600 uppercase text-sm my-2 "},[e._v(" source: soliguide.fr ")]),e.poi.name?i("h4",{staticClass:"my-4"},[e._v(" "+e._s(e.poi.name)+" ")]):e._e(),e.poi.address?i("div",[e._v(" "+e._s(e.poi.address)+" ")]):e._e(),e.poi.phone?i("div",{staticClass:"my-2"},[e._v(" Tel: "+e._s(e.poi.phone)+" ")]):e._e(),e.poi.email?i("div",{staticClass:"my-2"},[e._v(" Email: "+e._s(e.poi.email)+" ")]):e._e(),e.poi.language?i("div",{staticClass:"my-2"},[e._v(" Langue: "+e._s(e.poi.language)+" ")]):e._e(),e.poi.temporarily_closed?i("div",{staticClass:"my-2"},[e._v(" "+e._s(e.poi.temporarily_closed)+" ")]):e._e(),e.poi.temporary_information?i("div",{staticClass:"my-2"},[e._v(" "+e._s(e.poi.temporary_information)+" ")]):e._e(),e.poi.solinum_id?i("a",{staticClass:"my-2",attrs:{target:"_blank",href:"https://soliguide.fr/fiche/"+e.poi.solinum_id},on:{click:e.trackOpenSoliguide}},[e._v(" Voir plus ")]):e._e()])]):e._e()])],1)},_u=[],gu={components:{simplebar:Td["a"]},props:{poi:Object,origin:Event},computed:{active(){return!!this.poi}},mounted(){document.addEventListener("click",this.checkOutsideClick)},destroyed(){document.removeEventListener("click",this.checkOutsideClick)},watch:{active:function(e){e&&this.trackOpenPOI()}},methods:{trackOpenPOI(){this.$piwik.trackEvent("POI","Open POI",this.poi.solinum_id)},trackOpenSoliguide(){this.$piwik.trackEvent("POI","Click See More",this.poi.solinum_id)},checkOutsideClick(e){this.poi&&e!==this.origin&&(this.$refs.quickviewPanel.$el.contains(e.target)||this.$emit("outside-click",e))}}},bu=gu,yu=(i("1c7c"),Object(d["a"])(bu,fu,_u,!1,null,"263a7bb8",null)),Cu=yu.exports;function wu(){return no("/pois")}var ku=i("6ecd"),xu=i.n(ku),Pu=i("9934"),$u=i.n(Pu),Su=i("597c"),Eu=i.n(Su),Tu=i("d89d"),Au=i.n(Tu);function Iu(e){switch(e){case"nation":case"region":return 6;default:case"departement":case"epci":case"city":return 10}}var Ou={components:{NavBar:Qo,FilterGroup:jd,Map:lu,Quickview:vu,POIView:Cu,simplebar:Td["a"]},data(){const{user:e}=fo();return{error:void 0,loading:!1,defaultMapView:{center:[e.organization.location.latitude,e.organization.location.longitude],zoom:Iu(e.organization.location.type)},towns:[],pois:[],quickview:{town:null,originEvent:null},poiview:{poi:null,originEvent:null},permission:go("shantytown.list"),filters:[{faIcon:"tint",label:"Accès à l'eau",id:"accessToWater",options:[{value:!0,label:"Oui",checked:!0,icon:{id:"tint",color:"00a0e3"}},{value:!1,label:"Non",checked:!0,icon:{id:"tint-slash",color:"ADB9C9"}},{value:null,label:"Inconnu",checked:!0,icon:{id:"question",color:"ADB9C9"}}],opened:!0},{icon:xu.a,label:"Types de site",id:"fieldType",options:[],opened:!0},{icon:$u.a,label:"Nombre de personnes",id:"population",options:[{value:null,label:"Inconnu",checked:!0},{value:"-9",label:"Moins de 10 personnes",checked:!0},{value:"10-99",label:"Entre 10 et 99 personnes",checked:!0},{value:"100-",label:"100 personnes et plus",checked:!0}]},{icon:Eu.a,label:"Statut des sites",id:"status",options:[{value:"closed",label:"Disparus",checked:!1},{value:"opened",label:"Existants",checked:!0}]},{icon:$u.a,label:"Type de propriétaire",id:"ownerType",options:fo().owner_types.map(e=>({value:e.id,label:e.label,checked:!0}))},{icon:Au.a,label:"Points d'intérêts",id:"poi",options:[{value:"food_bank",label:"Distribution alimentaire",checked:!0}],opened:!0}]}},computed:{allowedFilters(){return this.permission?this.filters.filter(e=>!e.permissions||e.permissions.every(e=>this.permission[e])):[]},rendererProps(){return{towns:this.visibleTowns,pois:this.visiblePOIs,defaultView:this.defaultMapView}},visiblePOIs(){let e=this.pois;return this.allowedFilters.forEach(t=>{switch(t.id){case"poi":e=e.filter(()=>t.options[0].checked);break;default:}}),e},visibleTowns(){let e=this.towns;return this.allowedFilters.forEach(t=>{switch(t.id){case"accessToWater":{const i=t.options.filter(e=>e.checked).map(e=>e.value);e=e.filter(e=>-1!==i.indexOf(e.accessToWater))}break;case"fieldType":{const i=t.options.filter(e=>e.checked).map(e=>e.value);e=e.filter(e=>e.fieldType&&-1!==i.indexOf(e.fieldType.id))}break;case"population":{const i=t.options.filter(e=>!e.checked).map(e=>e.value);i.forEach(t=>{if(null===t)return void(e=e.filter(e=>null!==e.populationTotal));let[i,s]=t.split("-");i=parseInt(i,10),s=parseInt(s,10),e=e.filter(e=>null===e.populationTotal||(Number.isNaN(i)||Number.isNaN(s)?Number.isNaN(i)?!!Number.isNaN(s)||e.populationTotal>s:e.populationTotal<i:e.populationTotal<i||e.populationTotal>s))})}break;case"status":{const i=t.options.filter(e=>!e.checked).map(e=>e.value);i.forEach(t=>{"closed"===t?e=e.filter(e=>"open"===e.status):"opened"===t&&(e=e.filter(e=>"open"!==e.status))})}break;case"ownerType":{const i=t.options.filter(e=>e.checked).map(e=>e.value);e=e.filter(e=>e.ownerType&&-1!==i.indexOf(e.ownerType.id))}break;default:}}),e}},created(){this.fetchData()},mounted(){window.addEventListener("resize",this.resize)},beforeDestroy(){window.removeEventListener("resize",this.resize)},methods:{sortNumber(e,t){return"inconnu"===e&&"inconnu"===t?0:"inconnu"===e?-1:"inconnu"===t?1:e<t?-1:e>t?1:0},showQuickview(e,t){this.quickview={town:e,originEvent:t.originalEvent}},showPOIView(e,t){this.poiview={poi:e,originEvent:t.originalEvent}},hideQuickview(){this.quickview={town:null,originEvent:null}},hidePOIView(){this.poiview={town:null,originEvent:null}},routeToTown(e){const t=this.$router.resolve("/site/"+e.row.id);Xn(t.href)},resize(){this.$refs.main&&(this.stretchToBottom(this.$refs.main),this.stretchToBottom(this.$refs.filters.$el))},stretchToBottom(e){const t=e.offsetHeight,i=t+(document.body.offsetHeight-(this.absoluteOffsetTop(e)+t));e.style.height=i+"px"},absoluteOffsetTop(e){let t=0,i=e;do{t+=i.offsetTop||0,i=i.offsetParent}while(i);return t},fetchData(){!0!==this.loading&&(this.loading=!0,this.error=void 0,Promise.all([Vr(),wu()]).then(([e,t])=>{const{field_types:i}=fo();this.loading=!1;const s=this.filters.filter(({id:e})=>"fieldType"===e)[0];s.options=[...i.map(e=>({id:e.id,value:e.id,label:e.label,checked:!0}))],this.towns=e,this.pois=t,this.$nextTick(()=>{this.resize(),this.$refs.map.resize()})}).catch(e=>{this.error=e.user_message,this.loading=!1}))}}},qu=Ou,Mu=qu,Du=(i("669e"),Object(d["a"])(Mu,Sd,Ed,!1,null,null,null)),ju=Du.exports,Nu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("NavBar"),i("section",{staticClass:"section section-white"},[i("div",{staticClass:"container"},[e.error?i("div",{staticClass:"notification error full-width"},[i("span",[e._v(e._s(e.error)+". "),i("a",{attrs:{href:"#"},on:{click:e.loadConfig}},[e._v("Réessayer ?")])])]):i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Initialisation de la plateforme en cours...")])])])])],1)},Fu=[],Lu={data(){return{error:null}},components:{NavBar:Qo},mounted(){this.loadConfig()},methods:{loadConfig(){!0!==mo()?(this.error=null,ho().then(()=>{this.redirect()}).catch(e=>{this.error=e.user_message})):this.redirect()},redirect(){const{user:e}=fo();this.track(e),this.$router.push(qf())},track(e){this.$piwik&&(this.$piwik.setUserId(e.id),this.$piwik.setCustomVariable(1,"superuser",e.is_superuser),this.$piwik.setCustomVariable(2,"structure",e.organization.type.abbreviation||e.organization.type.name_singular),this.$piwik.setCustomVariable(3,"niveau_geo",e.organization.location.type),this.$piwik.setCustomVariable(4,"geo_nom",e.organization.location[e.organization.location.type]?e.organization.location[e.organization.location.type].name:null))}}},zu=Lu,Bu=zu,Ru=Object(d["a"])(Bu,Nu,Fu,!1,null,null,null),Vu=Ru.exports,Uu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[i("NavBar"),e.exportIsVisible?i("Export",{attrs:{towns:[],location:e.currentLocation,closedTowns:e.showClosedTowns},on:{close:e.hideExport}}):e._e(),"loading"===e.state?i("section",{staticClass:"section section-white"},[e._m(0)]):e._e(),"error"===e.state?i("section",{staticClass:"section section-white"},[i("div",{staticClass:"container"},[i("div",{staticClass:"notification error full-width"},[i("span",[e._v(e._s(e.error)+". "),i("a",{attrs:{href:"#"},on:{click:e.retryLoading}},[e._v("Réessayer ?")])])])])]):e._e(),"loaded"===e.state?i("section",{staticClass:"section section-white"},[i("div",{staticClass:"container"},[i("header",{staticClass:"townList-header"},[i("div",[i("hgroup",{staticClass:"townList-hgroup"},[i("h3",[e._v("Sites "+e._s(e.pageTitle))]),i("h1",[e._v(e._s(e.locationTitle))])]),i("CollectivityInput",{staticClass:"townList-search",model:{value:e.location,callback:function(t){e.location=t},expression:"location"}}),i("div",{staticClass:"switch"},[i("button",{class:{active:!e.showClosedTowns},on:{click:function(t){return e.showTowns("open")}}},[e._v("Sites existants")]),i("button",{class:{active:e.showClosedTowns},on:{click:function(t){return e.showTowns("closed")}}},[e._v("Sites fermés")])])],1),i("div",{staticClass:"townList-headerRight"},[i("div",{staticClass:"townList-actions"},[e.hasPermission("shantytown.create")?i("router-link",{staticClass:"button secondary",attrs:{to:"/nouveau-site"}},[e._v("Déclarer un site")]):e._e(),e.hasPermission("shantytown.export")&&e.dashboardShantytowns.length>0?i("a",{staticClass:"button button--excel",on:{click:e.showExport}},[i("font-awesome-icon",{attrs:{icon:"file-excel"}}),e._v(" Exporter")],1):e._e()],1),e.showClosedTowns?e._e():i("section",{staticClass:"townList-summary"},[i("header",[i("h1",[e._v("Au total : "),i("span",[e._v(e._s(e.currentLocation.label))])]),e.lastUpdate?i("h2",[e._v("mis à jour le "+e._s(e.formatDate(e.lastUpdate,"d M y")))]):e._e()]),i("div",{staticClass:"townList-figures"},[i("div",[i("span",[e._v(e._s(e.dashboardShantytowns.length))]),i("br"),e._v("sites existants")]),i("div",[i("span",[e._v(e._s(e.populationTotal))]),i("br"),e._v("personnes")]),i("div",[i("span",[e._v(e._s(e.minorsTotal))]),i("br"),e._v("mineurs")]),e.hasJusticePermission?i("div",[i("span",[e._v(e._s(e.justiceTotal))]),e._v(" site(s) avec une"),i("br"),e._v("procédure judiciaire")]):e._e()])])])]),i("div",{staticClass:"rb-pagination"},[i("span",{staticClass:"link",class:{"link--disabled":0===e.currentPage},on:{click:e.previousPage}},[i("font-awesome-icon",{attrs:{icon:"caret-square-left"}}),e._v(" Précédent")],1),i("span",{staticClass:"pagination-pages"},[e._v(e._s(e.pageBeginning)+" - "+e._s(e.pageEnd)+" sur "+e._s(e.filteredShantytowns.length))]),i("span",{staticClass:"link",class:{"link--disabled":e.currentPage===e.lastPage},on:{click:e.nextPage}},[e._v("Suivant "),i("font-awesome-icon",{attrs:{icon:"caret-square-right"}})],1)])]),i("div",{staticClass:"rb-table"},[i("table",{ref:"table",staticClass:"table"},[i("thead",[i("tr",[e._m(1),e._m(2),e._m(3),i("th",{staticClass:"townColumn-fieldType filterable"},[i("TableFilter",{attrs:{visible:"fieldType"===e.currentFilter},on:{"outside-click":e.hideFilter,clean:e.hideFilter},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"fieldType"},[i("i",{style:"background-color: "+t.item.color}),e._v(" "),i("span",[e._v(e._s(t.item.label))])])]}}],null,!1,635955910),model:{value:e.fieldFilterItems,callback:function(t){e.fieldFilterItems=t},expression:"fieldFilterItems"}}),i("span",{class:{active:e.checkedFieldFilterItems>0},on:{click:function(t){return e.toggleFilter("fieldType")}}},[e._v("Type "),e.checkedFieldFilterItems>0?i("span",{staticClass:"badge"},[e._v(e._s(e.checkedFieldFilterItems))]):e._e(),i("font-awesome-icon",{attrs:{icon:"sort-down",size:"2x"}})],1)],1),e._m(4),e.showClosedTowns?i("th",{staticClass:"townColumn-statusDetails filterable"},[i("TableFilter",{attrs:{visible:"status"===e.currentFilter},on:{"outside-click":e.hideFilter,clean:e.hideFilter},model:{value:e.statusFilterItems,callback:function(t){e.statusFilterItems=t},expression:"statusFilterItems"}}),i("span",{class:{active:e.checkedStatusFilterItems>0},on:{click:function(t){return e.toggleFilter("status")}}},[e._v("Cause de la fermeture "),e.checkedStatusFilterItems>0?i("span",{staticClass:"badge"},[e._v(e._s(e.checkedStatusFilterItems))]):e._e(),i("font-awesome-icon",{attrs:{icon:"sort-down",size:"2x"}})],1)],1):e._e(),i("th",{staticClass:"townColumn-population filterable"},[i("TableFilter",{attrs:{visible:"population"===e.currentFilter},on:{"outside-click":e.hideFilter,clean:e.hideFilter},model:{value:e.populationFilterItems,callback:function(t){e.populationFilterItems=t},expression:"populationFilterItems"}}),i("span",{class:{active:e.checkedPopulationFilterItems>0},on:{click:function(t){return e.toggleFilter("population")}}},[e._v("Personnes "),e.checkedPopulationFilterItems>0?i("span",{staticClass:"badge"},[e._v(e._s(e.checkedPopulationFilterItems))]):e._e(),i("font-awesome-icon",{attrs:{icon:"sort-down",size:"2x"}})],1)],1),e._m(5),e._m(6),e._m(7),e.showClosedTowns?e._e():i("th",{staticClass:"townColumn-livingConditions"},[i("span",[e._v("Conditions de vies")])]),e.showClosedTowns?e._e():i("th",{staticClass:"townColumn-census"},[i("span",[e._v("Diagnostic")])]),!e.showClosedTowns&&e.hasJusticePermission?i("th",{staticClass:"townColumn-justice filterable"},[i("TableFilter",{attrs:{visible:"justice"===e.currentFilter},on:{"outside-click":e.hideFilter,clean:e.hideFilter},model:{value:e.justiceFilterItems,callback:function(t){e.justiceFilterItems=t},expression:"justiceFilterItems"}}),i("span",{class:{active:e.checkedJusticeFilterItems>0},on:{click:function(t){return e.toggleFilter("justice")}}},[e._v("Procédure judiciaire "),e.checkedJusticeFilterItems>0?i("span",{staticClass:"badge"},[e._v(e._s(e.checkedJusticeFilterItems))]):e._e(),i("font-awesome-icon",{attrs:{icon:"sort-down",size:"2x"}})],1)],1):e._e(),e.showClosedTowns?i("th",{staticClass:"townColumn-closingSolutions"},[i("span",[e._v("Orientations des ménages")])]):e._e()])]),i("tbody",[0===e.pageContent.length?i("tr",{staticClass:"townRow--empty"},[i("td",{attrs:{colspan:e.showClosedTowns?11:12-(e.hasJusticePermission?0:1)}},[e._v("Il n'existe aucun site correspondant aux filtres sélectionnés")])]):e._e(),e._l(e.pageContent,(function(t,s){return i("tr",{class:s%2===0?"odd":"",on:{click:function(i){return e.routeToTown(t)}}},[i("td",{staticClass:"townColumn-departement"},[e._v(e._s(t.departement.code)+" - "+e._s(t.departement.name))]),i("td",{staticClass:"townColumn-city"},[e._v(e._s(t.city.name))]),i("td",{staticClass:"townColumn-address"},[e._v(e._s(t.usename)+" ")]),i("td",{staticClass:"townColumn-fieldType"},[i("span",{staticClass:"fieldType"},[i("i",{style:"background-color: "+t.fieldType.color}),e._v(" "),i("span",[e._v(e._s(t.fieldType.label))])])]),i("td",{staticClass:"townColumn-status"},[null===t.statusName?i("span",{staticClass:"secondary"},[e._v("NC")]):i("span",[e._v(e._s(t.statusName)+" depuis"),i("br"),e._v("le "+e._s(e.formatDate(t.statusDate,"d/m/y"))),i("br"),e._v(e._s(t.statusSince))])]),e.showClosedTowns?i("td",{staticClass:"townColumn-statusDetails"},[e._v(e._s(t.statusDetails))]):e._e(),i("td",{staticClass:"townColumn-population"},[null===t.populationTotal?i("span",{staticClass:"secondary"},[e._v("NC")]):i("div",[i("span",{staticClass:"primary"},[e._v(e._s(t.populationTotal))]),i("br"),i("span",{staticClass:"secondary"},[e._v("au "+e._s(e.formatDate(t.updatedAt||t.builtAt,"d/m/y")))])])]),i("td",{staticClass:"townColumn-minors"},[null===t.populationMinors?i("span",{staticClass:"secondary"},[e._v("NC")]):i("span",[e._v(e._s(t.populationMinors))])]),i("td",{staticClass:"townColumn-couples"},[null===t.populationCouples?i("span",{staticClass:"secondary"},[e._v("NC")]):i("span",[e._v(e._s(t.populationCouples))])]),i("td",{staticClass:"townColumn-origins"},[0===t.socialOrigins.length?i("span",{staticClass:"secondary"},[e._v("NC")]):i("span",[e._v(e._s(t.socialOrigins.map((function(e){var t=e.label;return t})).join(" / ")))])]),e.showClosedTowns?e._e():i("td",{staticClass:"townColumn-livingConditions"},[i("ul",{staticClass:"list"},[i("li",{class:"listItem-"+e.boolToCss[t.electricityType.value]},[e._v("électricité : "+e._s(e.boolToLabel[t.electricityType.value]))]),i("li",{class:"listItem-"+e.boolToCss[t.accessToWater]},[e._v("eau : "+e._s(e.boolToLabel[t.accessToWater]))]),i("li",{class:"listItem-"+e.boolToCss[t.trashEvacuation]},[e._v("évacuation des déchets : "+e._s(e.boolToLabel[t.trashEvacuation]))])])]),e.showClosedTowns?e._e():i("td",{staticClass:"townColumn-census"},[null===t.censusStatus?i("span",{staticClass:"secondary"},[e._v("NC")]):"done"!==t.censusStatus?i("span",[e._v(e._s(e.censusStatuses[t.censusStatus]))]):i("span",[e._v("Réalisé"),t.censusConductedAt?i("span",[e._v(" le"),i("br"),e._v(e._s(e.formatDate(t.censusConductedAt,"d/m/y")))]):e._e()])]),!e.showClosedTowns&&e.hasJusticePermission?i("td",{staticClass:"townColumn-justice"},[null===t.justiceStatus?i("span",{staticClass:"secondary"},[e._v("NC")]):i("ul",{staticClass:"list list--circle"},e._l(t.justiceStatuses,(function(t){return i("li",[e._v(e._s(t.label)+" "),t.date?i("span",{staticClass:"secondary"},[i("br"),e._v("le "+e._s(e.formatDate(t.date,"d/m/y")))]):e._e()])})),0)]):e._e(),e.showClosedTowns?i("td",{staticClass:"townColumn-closingSolutions"},[0===t.closingSolutions.length?i("span",{staticClass:"secondary"},[e._v("NC")]):i("ul",{staticClass:"list"},e._l(t.closingSolutions,(function(t){return i("li",[e._v(e._s(t.householdsAffected||"NC")+" - "+e._s(e.closingSolutionNames[t.id]))])})),0)]):e._e()])}))],2)])]),e.pageContent.length>2?i("div",{staticClass:"container"},[i("div",{staticClass:"rb-pagination"},[i("span",{staticClass:"link",class:{"link--disabled":0===e.currentPage},on:{click:e.previousPage}},[i("font-awesome-icon",{attrs:{icon:"caret-square-left"}}),e._v(" Précédent")],1),i("span",{staticClass:"pagination-pages"},[e._v(e._s(e.pageBeginning)+" - "+e._s(e.pageEnd)+" sur "+e._s(e.filteredShantytowns.length))]),i("span",{staticClass:"link",class:{"link--disabled":e.currentPage===e.lastPage},on:{click:e.nextPage}},[e._v("Suivant "),i("font-awesome-icon",{attrs:{icon:"caret-square-right"}})],1)])]):e._e()]):e._e()],1)])},Hu=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Chargement des données en cours...")])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("th",{staticClass:"townColumn-departement"},[i("span",[e._v("Département")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("th",{staticClass:"townColumn-city"},[i("span",[e._v("Commune")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("th",{staticClass:"townColumn-address"},[i("span",[e._v("Adresse")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("th",{staticClass:"townColumn-status"},[i("span",[e._v("Date")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("th",{staticClass:"townColumn-minors"},[i("span",[e._v("Mineurs")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("th",{staticClass:"townColumn-couples"},[i("span",[e._v("Ménages")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("th",{staticClass:"townColumn-origins"},[i("span",[e._v("Origines")])])}],Gu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"alert"},[i("div",{ref:"wrapper",staticClass:"alert-wrapper"},[i("header",{staticClass:"alert-header"},[i("hgroup",[i("h1",{staticClass:"alert-title"},[e._v("Exporter les sites "+e._s(e.title)+" :")]),i("h2",{staticClass:"alert-subtitle"},[e._v(e._s(e.location.label))])]),i("div",{staticClass:"alert-actionButtons"},[i("a",{ref:"link",staticStyle:{display:"none"},attrs:{href:"#"}}),i("button",{staticClass:"button secondary",on:{click:e.close}},[e._v("Annuler")]),i("button",{staticClass:"button",on:{click:e.download}},[i("font-awesome-icon",{attrs:{icon:"file-excel"}}),e._v(" Exporter")],1)])]),i("section",{staticClass:"alert-body"},[i("p",[i("strong",[e._v("Les données exportées par défaut")]),i("ul",{staticClass:"list--circle"},[i("li",[e._v("Localisation : département, commune, adresse")]),i("li",[e._v("Site : type de site (terrain / bâti), date d’installation, date de signalement")]),i("li",[e._v("Habitants : nombre de personnes, mineurs, ménages et origines")]),e.closedTowns?i("li",[e._v("Orientations des ménages après la fermeture")]):e._e(),i("li",[e._v("Date de la dernière mise à jour")])])]),i("p",{staticClass:"alert-options"},[e._v("Cochez les informations supplémentaires que vous souhaitez exporter "),i("ul",e._l(e.availableOptions,(function(t){return i("li",[i("span",{class:"option-"+t.id},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.options[t.id],expression:"options[option.id]"}],attrs:{type:"checkbox",id:"option-"+t.id},domProps:{checked:Array.isArray(e.options[t.id])?e._i(e.options[t.id],null)>-1:e.options[t.id]},on:{change:function(i){var s=e.options[t.id],a=i.target,n=!!a.checked;if(Array.isArray(s)){var o=null,r=e._i(s,o);a.checked?r<0&&e.$set(e.options,t.id,s.concat([o])):r>-1&&e.$set(e.options,t.id,s.slice(0,r).concat(s.slice(r+1)))}else e.$set(e.options,t.id,n)}}}),i("label",{attrs:{for:"option-"+t.id}},[e._v(e._s(t.label)),t.description?i("span",[e._v(" "+e._s(t.description))]):e._e()])])])})),0)])])])])},Wu=[],Yu={props:{location:Object,closedTowns:Boolean},data(){return{existingOptions:[{id:"priority",label:"Priorité",description:"(1, 2, 3)",closedTowns:!1},{id:"address_details",label:"Informations d'accès au site",closedTowns:!1},{id:"owner",label:"Propriétaire",description:": type et identité"},{id:"life_conditions",label:"Conditions de vie",description:": accès à l'électricité, l'eau, toilettes, évacuation des déchets"},{id:"demographics",label:"Diagnostic",description:": statut, date, et service en charge"},{id:"justice",label:"Procédures judiciaires",description:": statut et date des étapes",permission:{entity:"shantytown",feature:"export",data:"justice"}},{id:"comments",label:"Commentaires",description:": les 5 derniers",permission:{entity:"shantytown_comment",feature:"list",data:null}},{id:"covid_comments",label:"Commentaires Covid-19",permission:{entity:"covid_comment",feature:"list",data:null}}],options:{priority:!1,address_details:!1,demographics:!1,life_conditions:!1,justice:!1,owner:!1,comments:!1,covid_comments:!1}}},computed:{title(){return this.closedTowns?"fermés":"existants"},availableOptions(){return this.existingOptions.filter(({closedTowns:e})=>void 0===e||this.closedTowns===e).filter(({permission:e})=>{if(void 0===e)return!0;const t=go(`${e.entity}.${e.feature}`);return null!==t&&(null===e.data||!0===t["data_"+e.data])})}},mounted(){document.addEventListener("click",this.checkOutsideClick)},destroyed(){document.removeEventListener("click",this.checkOutsideClick)},methods:{checkOutsideClick(e){0!==this.$refs.wrapper.offsetHeight&&(this.$refs.wrapper.contains(e.target)||this.close())},download(){const{code:e,type:t}=this.location.data;let i=`https://api.resorption-bidonvilles.beta.gouv.fr/towns/export?locationType=${encodeURIComponent(t)}&locationCode=${encodeURIComponent(e)}&closedTowns=${this.closedTowns?"1":"0"}`;const s=this.availableOptions.map(({id:e})=>e).filter(e=>this.options[e]);s.length>0&&(i+="&options="+encodeURIComponent(s.join(","))),uo(i)},close(){this.$emit("close")}}},Ju=Yu,Qu=Ju,Zu=(i("2a38"),Object(d["a"])(Qu,Gu,Wu,!1,null,"7dc4c302",null)),Ku=Zu.exports;function Xu(e){const t=new Date,i=new Date(1e3*e);let s=0;if(t.getFullYear()===i.getFullYear())s=Math.max(0,t.getMonth()-i.getMonth());else if(t.getFullYear()>i.getFullYear()){const e=t.getFullYear()-i.getFullYear();s=12*(e-1)+(t.getMonth()+12-i.getMonth())}return{years:Math.floor(s/12),months:s%12}}const ep=10,tp={closed_by_justice:"Exécution d'une décision de justice",closed_by_admin:"Exécution d'une décision administrative",other:"Autre",unknown:"Raison inconnue"};var ip={components:{NavBar:Qo,CollectivityInput:yl,TableFilter:rl,Export:Ku},data(){const{field_types:e,closing_solutions:t,user:i}=fo(),s=go("shantytown.list"),a={shantytowns:[],error:null,state:null,fieldTypeColors:e.reduce((e,t)=>Object.assign(e,{[t.id]:t.color}),{}),closingSolutionNames:t.reduce((e,t)=>Object.assign(e,{[t.id]:t.label.split("(")[0]}),{}),censusStatuses:{none:"Non prévu",scheduled:"Prévu"},boolToLabel:{[null]:"inconnu",[!0]:"oui",[!1]:"non"},boolToCss:{[null]:"unknown",[!0]:"yes",[!1]:"no"},currentPage:0,fieldFilterItems:e.map(({id:e,label:t,color:i})=>({value:e,label:t,color:i,checked:!1})),populationFilterItems:[{label:"Inconnu",value:null,checked:!1},{label:"Moins de 10 personnes",value:"-9",checked:!1},{label:"Entre 10 et 99 personnes",value:"10-99",checked:!1},{label:"Plus de 100 personnes",value:"100-",checked:!1}],justiceFilterItems:[{label:"Inconnu",value:null,checked:!1},{label:"Aucune",value:"none",checked:!1},{label:"Plainte déposée",value:"ownerComplaint",checked:!1},{label:"Procédure en cours",value:"justiceProcedure",checked:!1},{label:"Décision rendue",value:"justiceRendered",checked:!1}],statusFilterItems:[{label:"Raison inconnue",value:"unknown",checked:!1},{label:"Décision de justice",value:"closed_by_justice",checked:!1},{label:"Décision administrative",value:"closed_by_admin",checked:!1},{label:"Autre",value:"other",checked:!1}],currentFilter:null,hasNationalPermission:"nation"===s.geographic_level,hasJusticePermission:!0===s.data_justice,showClosedTowns:!1,locationTitle:null,defaultLocation:null,location:null,exportIsVisible:!1},n={id:"nation"===i.organization.location.type?null:i.organization.location[i.organization.location.type].code,label:"nation"===i.organization.location.type?"France":i.organization.location[i.organization.location.type].name,category:i.organization.location.type,data:{code:"nation"===i.organization.location.type?null:i.organization.location[i.organization.location.type].code,type:i.organization.location.type}};return!0!==a.hasNationalPermission||"nation"===i.organization.location.type?(a.defaultLocation={...n},a.location=null):(a.defaultLocation={id:null,label:"France",category:"Pays",data:{code:null,type:"nation"}},a.location={...n}),"nation"===a.defaultLocation.data.type?a.locationTitle="National":a.locationTitle=a.defaultLocation.label,a},computed:{pageTitle(){return!0===this.showClosedTowns?"fermés":"existants"},currentLocation(){return this.location||this.defaultLocation},populationTotal(){return this.dashboardShantytowns.reduce((e,{populationTotal:t})=>e+(t||0),0)},minorsTotal(){return this.dashboardShantytowns.reduce((e,{populationMinors:t})=>e+(t||0),0)},justiceTotal(){return this.dashboardShantytowns.filter(({justiceProcedure:e})=>!0===e).length},lastUpdate(){return this.dashboardShantytowns.reduce((e,{updatedAt:t})=>null===e||null!==t&&t>e?t:e,null)},dashboardShantytowns(){return this.shantytowns.filter(e=>this.showClosedTowns?"open"!==e.status:"open"===e.status).filter(e=>{if("nation"===this.currentLocation.data.type)return!0;const t=e[this.currentLocation.data.type];return!t||(t.code===""+this.currentLocation.data.code||t.main===""+this.currentLocation.data.code)})},filteredShantytowns(){const e=this.fieldFilterItems.filter(({checked:e})=>e).map(({value:e})=>e),t=this.populationFilterItems.filter(({checked:e})=>e).map(({value:e})=>e),i=this.justiceFilterItems.filter(({checked:e})=>e).map(({value:e})=>e),s=this.statusFilterItems.filter(({checked:e})=>e).map(({value:e})=>e);return e.length+t.length+i.length+s.length===0?this.dashboardShantytowns:this.dashboardShantytowns.filter(a=>!(e.length>0&&!this.checkFieldType(a,e))&&(!(t.length>0&&!this.checkPopulation(a,t))&&(!(i.length>0&&!this.checkJustice(a,i))&&!(s.length>0&&!this.checkStatus(a,s)))))},pageContent(){return this.filteredShantytowns.slice(this.currentPage*ep,this.currentPage*ep+ep)},lastPage(){return Math.max(0,Math.ceil(this.filteredShantytowns.length/ep)-1)},pageBeginning(){return this.filteredShantytowns.length>0?this.currentPage*ep+1:0},pageEnd(){return Math.min(this.pageBeginning-1+ep,this.filteredShantytowns.length)},checkedFieldFilterItems(){return this.fieldFilterItems.filter(({checked:e})=>e).length},checkedPopulationFilterItems(){return this.populationFilterItems.filter(({checked:e})=>e).length},checkedJusticeFilterItems(){return this.justiceFilterItems.filter(({checked:e})=>e).length},checkedStatusFilterItems(){return this.statusFilterItems.filter(({checked:e})=>e).length}},created(){this.load()},watch:{location(){this.currentPage=0},filteredShantytowns(){this.currentPage=0}},methods:{load(){-1!==[null,"error"].indexOf(this.state)&&(this.state="loading",this.error=null,Vr().then(e=>{this.shantytowns=e.map(this.enrichShantytown),this.state="loaded"}).catch(({user_message:e})=>{this.error=e,this.state="error"}))},enrichShantytown(e){let t=!0;"Inconnu"===e.electricityType.label?t=null:"Non"===e.electricityType.label&&(t=!1);const i=[];switch(!0===e.justiceChallenged||!0===e.justiceRendered?(i.push({label:"Décision rendue",date:e.justiceRenderedAt}),!0===e.justiceChallenged&&i.push({label:"Contentieux"})):!0===e.justiceProcedure&&i.push({label:"Procédure en cours"}),!0===e.ownerComplaint&&i.push({label:"Plainte déposée"}),e.policeStatus){case"none":i.push({label:"Concours de la force publique non demandé"});break;case"requested":i.push({label:"Concours de la force publique demandé",date:e.policeRequestedAt});break;case"granted":i.push({label:"Concours de la force publique accordé",date:e.policeGrantedAt});break;default:case null:i.push({label:"Concours de la force publique : NC"});break}let s,a;const n=[];if("open"===e.status?e.builtAt?(s="Existe",a=e.builtAt):e.declaredAt?(s="Signalé",a=e.declaredAt):(s=null,a=null):(s="Fermé",a=e.closedAt),null!==a){const{years:e,months:t}=Xu(a);e>0&&n.push(`${e} an${e>1?"s":""}`),t>0&&n.push(t+" mois")}const o=e.closingSolutions.reduce((e,t)=>t.householdsAffected?(e||0)+t.householdsAffected:e,null);return{...e,statusName:s,statusDate:a,statusSince:n.join(" "),statusDetails:tp[e.status],fieldType:{...e.fieldType,color:this.fieldTypeColors[e.fieldType.id]},electricityType:{...e.electricityType,value:t},justiceStatuses:i,totalSolutions:o}},retryLoading(){this.load()},formatDate(...e){return window.App.formatDate.apply(window,e)},previousPage(){this.currentPage=Math.max(0,this.currentPage-1)},nextPage(){this.currentPage=Math.min(this.lastPage,this.currentPage+1)},routeToTown(e){const t=this.$router.resolve("/site/"+e.id);Xn(t.href)},toggleFilter(e){this.currentFilter===e?this.currentFilter=null:this.currentFilter=e},hideFilter(){this.currentFilter=null},checkFieldType(e,t){return-1!==t.indexOf(e.fieldType.id)},checkPopulation(e,t){return t.some(t=>{if(null===t)return null===e.populationTotal;if(null===e.populationTotal)return!1;const[i,s]=t.split("-");return!(""!==i&&parseInt(i,10)>e.populationTotal)&&!(""!==s&&parseInt(s,10)<e.populationTotal)})},checkJustice(e,t){return t.some(t=>"ownerComplaint"===t?!0===e.ownerComplaint:!0===e.justiceRendered?"justiceRendered"===t:!0===e.justiceProcedure?"justiceProcedure"===t:null===t)},checkStatus(e,t){return-1!==t.indexOf(e.status)},showTowns(e){this.showClosedTowns!==("closed"===e)&&(this.showClosedTowns="closed"===e,this.currentPage=0,this.cleanFilters())},cleanFilters(){const e=["fieldFilterItems","populationFilterItems","justiceFilterItems","statusFilterItems"];e.forEach(e=>{for(let t=0;t<this[e].length;t+=1)this[e][t].checked=!1})},showExport(){setTimeout(()=>{this.exportIsVisible=!0},100)},hideExport(){this.exportIsVisible=!1},hasPermission(...e){return bo(...e)}}},sp=ip,ap=sp,np=(i("4f37"),Object(d["a"])(ap,Uu,Hu,!1,null,"42c968f1",null)),op=np.exports,rp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[i("NavBar"),i("Form",e._b({ref:"form",on:{complete:e.onComplete,stepcomplete:e.onStepComplete},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},"Form",e.formDefinition,!1))],1)])},lp=[],cp={components:{NavBar:Qo,Form:Oc},data(){const{field_types:e,owner_types:t,social_origins:i,electricity_types:s}=fo(),a=[{value:"none",label:"Non prévu"},{value:"scheduled",label:"Prévu"},{value:"done",label:"Réalisé"},{value:null,label:"Inconnu"}],n=[{value:1,label:"Oui"},{value:0,label:"Non"},{value:-1,label:"Inconnu"}],o=[{value:"none",label:"Non demandé"},{value:"requested",label:"Demandé"},{value:"granted",label:"Obtenu"},{value:null,label:"Inconnu"}],r={title:"Déclaration d'un site",description:"Ce formulaire vous permet de déclarer un site identifié sur votre territoire (bidonville ou squat). Il est divisé en quatre onglets : caractéristiques, démographie, conditions de vie et procédure judiciaire d'expulsion des occupants. Lorsque le symbole (*) apparaît en rouge au début de l'intitulé de la question, cela signifie qu'il s'agit d'une question obligatoire. Il n'est pas possible de valider le formulaire sans y avoir répondu.",steps:[{title:"Caractéristiques du site",sections:[{title:"Caractéristiques",inputs:{address:{type:"addressWithLocation",label:"Localisation géographique",description:"Saisissez ici l'adresse du site, puis précisez sa position en déplaçant le point sur la carte.",mandatory:!0},name:{type:"text",label:"Appellation du site",description:"Exemples : Entrepôt de la Poste, Rond-point du centre...",mandatory:!1,specificProps:{maxlength:35}},detailed_address:{type:"text",label:"Informations d'accès",description:"Saisissez ici toutes les informations qui, en plus de l'adresse, peuvent être utiles pour l'accès au site.",mandatory:!1},priority:{type:"radio",options:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3}],label:"Niveau de priorité du site",description:"1 étant le niveau de priorité le plus haut.<br/>Le niveau de priorité est un indicateur réservé aux correspondants des services de l’État.",mandatory:!1},built_at:{type:"date",label:"Date d'installation du site",mandatory:!0},declared_at:{type:"date",label:"Date de signalement du site",mandatory:!1},field_type:{type:"radio",options:e.map(({id:e,label:t})=>({label:t,value:e})),label:"Type de site",mandatory:!0},owner_type:{type:"radio",options:t.map(({id:e,label:t})=>({label:t,value:e})),label:"Type de propriétaire",mandatory:!0},owner:{type:"text",label:"Identité du propriétaire",condition({owner_type:e}){return e&&"Inconnu"!==t.find(({id:t})=>t===e).label}}}},{title:"Habitants",inputs:{census_status:{type:"radio",options:a,label:"Statut du diagnostic social",description:"Un diagnostic social vise à identifier les situations et besoins des familles et personnes, de repérer le contexte territorial et les acteurs en présence.",mandatory:!0},census_conducted_at:{type:"date",label:"Date du diagnostic",mandatory:!0,condition({census_status:e}){return-1!==["scheduled","done"].indexOf(e)}},census_conducted_by:{type:"text",label:"Service ou opérateur en charge du diagnostic",mandatory:!0,condition({census_status:e}){return-1!==["scheduled","done"].indexOf(e)}},population_total:{type:"number",label:"Nombre de personnes",description:"Laissez ce champ vide si l'information est inconnue",mandatory:!1},population_couples:{type:"number",label:"Nombre de ménages",description:"Laissez ce champ vide si l'information est inconnue",mandatory:!1},population_minors:{type:"number",label:"Nombre de mineurs",description:"Laissez ce champ vide si l'information est inconnue",mandatory:!1},population_minors_0_3:{type:"number",label:"0 - 3 ans",mandatory:!1},population_minors_3_6:{type:"number",label:"3 - 6 ans",mandatory:!1},population_minors_6_12:{type:"number",label:"6 - 12 ans",mandatory:!1},population_minors_12_16:{type:"number",label:"12 - 16 ans",mandatory:!1},population_minors_16_18:{type:"number",label:"16 - 18 ans",mandatory:!1},minors_in_school:{type:"number",label:"Nombre d'enfants inscrits dans un établissement scolaire",mandatory:!1},social_origins:{type:"checkbox",options:i.map(({id:e,label:t})=>({label:t,value:e})),label:"Origines",description:"Ne rien cocher si l'information est inconnue",mandatory:!1}}},{title:"Conditions de vie",inputs:{electricity_type:{type:"radio",options:s.map(({id:e,label:t})=>({label:t,value:e})),label:"Accès à l'électricité",mandatory:!0},electricity_comments:{type:"textarea",label:"Modalités d'accès",description:"Exemples : groupe électrogène, raccordement à une usine...",mandatory:!1},access_to_water:{type:"radio",options:n,label:"Accès à l'eau",mandatory:!0},water_comments:{type:"textarea",label:"Modalités d'accès",description:"Exemples: Citerne de 100 litres remplie par les pompiers tous les jours, 3 robinets raccordés par la collectivité, borne incendie à 200 mètres...",mandatory:!1},access_to_sanitary:{type:"radio",options:n,label:"Accès à des toilettes",mandatory:!0},sanitary_comments:{type:"textarea",label:"Modalités d'accès",description:"Exemples : 3 toilettes sèches, toilettes raccordés au réseau, un bloc sanitaire fourni par la ville...",mandatory:!1},trash_evacuation:{type:"radio",options:n,label:"Évacuation des déchets",mandatory:!0}}},...bo("shantytown.create.data_justice")?[{title:"Procédure judiciaire d'expulsion des occupants",inputs:{owner_complaint:{type:"radio",options:n,label:"Dépôt de plainte par le propriétaire",mandatory:!0},justice_procedure:{type:"radio",options:n,label:"Existence d'une procédure judiciaire",mandatory:!0},justice_rendered:{type:"radio",options:n,label:"Décision de justice rendue",mandatory:!0,condition({justice_procedure:e}){return 1===e}},justice_rendered_by:{type:"text",label:"Origine de la décision",mandatory:!0,condition({justice_procedure:e,justice_rendered:t}){return 1===e&&1===t}},justice_rendered_at:{type:"date",label:"Date de la décision",mandatory:!0,condition({justice_procedure:e,justice_rendered:t}){return 1===e&&1===t}},justice_challenged:{type:"radio",options:n,label:"Contentieux relatif à la décision de justice",mandatory:!0,condition({justice_procedure:e,justice_rendered:t}){return 1===e&&1===t}},police_status:{type:"radio",options:o,label:"Concours de la force publique",mandatory:!0},police_requested_at:{type:"date",label:"Date de la demande du CFP",mandatory:!0,condition({police_status:e}){return-1!==["requested","granted"].indexOf(e)}},police_granted_at:{type:"date",label:"Date d'octroi du CFP",mandatory:!0,condition({police_status:e}){return"granted"===e}},bailiff:{type:"text",label:"Nom de l'étude d'huissiers",mandatory:!1}}}]:[]],wording:{submit:"Déclarer le site",error:"La déclaration du site a échoué",success:"La déclaration du site a réussi"},submit:e=>{const t=["built_at","declared_at","census_conducted_at","justice_rendered_at","police_requested_at","police_granted_at"];t.forEach(t=>{const i=e[t];i&&Object.assign(e,{[t]:`${i.getFullYear()}-${(""+(i.getMonth()+1)).padStart(2,"0")}-${(""+i.getDate()).padStart(2,"0")}`})});const i=Hr(e);return i.then(({plans:e})=>{r.steps[1].sections[0].inputs.plans.options=e.map(({id:e,name:t,type:i})=>({label:t||i,value:e}))}),i}}]};return{data:{},formDefinition:r}},methods:{onStepComplete(e,t){0===e&&(t.plans&&0!==t.plans.length||this.$nextTick(()=>{this.$refs.form.goToNextStep(null)}))},onComplete(e,[{town:{id:t}}]){this.$router.push("/site/"+t)}}},dp=cp,up=dp,pp=(i("5a39"),Object(d["a"])(up,rp,lp,!1,null,"40c10962",null)),mp=pp.exports,hp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("NavBar"),e.loading||e.error?i("section",{staticClass:"section section-white"},[e.loading||e.error?i("div",{staticClass:"container"},[e.loading?i("div",[e._m(0)]):e.error?i("div",[i("div",{staticClass:"notification error full-width"},[i("span",[e._v(e._s(e.error)+". "),i("a",{attrs:{href:"#"},on:{click:e.fetchData}},[e._v("Réessayer ?")])])])]):e._e()]):e._e()]):i("section",{ref:"wrapper",staticClass:"section section-white town-wrapper"},[null!==e.commentToBeDeleted?i("CommentDeletion",{ref:"commentDeletionPopin",attrs:{comment:e.commentToBeDeleted},on:{close:e.closeCommentDeletion,deleted:e.onCommentDeleted}}):e._e(),"close"===e.mode?i("div",{staticClass:"popin"},[i("div",{ref:"wrapper",staticClass:"popin-wrapper"},[i("div",[i("p",{staticClass:"popin-close"},[i("span",{staticClass:"link",on:{click:e.closePopin}},[i("font-awesome-icon",{attrs:{icon:"times",size:"2x"}})],1)]),i("section",[i("h2",[e._v("Disparition du site")]),i("div",{staticClass:"form__group"},[i("label",{class:{error:e.fieldErrors.closed_at}},[e._v("Date de disparition du site :")]),e.fieldErrors.closed_at?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.closed_at,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),i("datepicker",{attrs:{"clear-button":!0,language:e.dateLanguage,"monday-first":!0,"disabled-dates":{from:new Date},"full-month-name":!0,format:"dd MMMM yyyy"},model:{value:e.edit.closedAt,callback:function(t){e.$set(e.edit,"closedAt",t)},expression:"edit.closedAt"}})],1),i("div",{staticClass:"form__group"},[i("fieldset",[i("legend",{class:{error:e.fieldErrors.closed_with_solutions}},[i("strong",[e._v("Est-ce que ce site a été résorbé définitivement ? :")])]),i("p",{staticClass:"question-info"},[e._v("C’est-à-dire sans réinstallation illicite et avec un accompagnement de la majorité des personnes vers des solutions pérennes")]),e.fieldErrors.closed_with_solutions?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.closed_with_solutions,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),e._l(e.closedWithSolutionsValues,(function(t,s){return i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.closedWithSolutions,expression:"edit.closedWithSolutions"}],attrs:{type:"radio",name:"closed_with_solutions",id:"status"+s},domProps:{value:t.value,checked:e._q(e.edit.closedWithSolutions,t.value)},on:{change:function(i){return e.$set(e.edit,"closedWithSolutions",t.value)}}}),i("label",{staticClass:"label-inline",attrs:{for:"status"+s}},[e._v(e._s(t.label))])])}))],2)]),i("div",{staticClass:"form__group"},[i("fieldset",[i("legend",{class:{error:e.fieldErrors.status}},[i("strong",[e._v("Cause de la disparition :")])]),e.fieldErrors.status?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.status,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),e._l(e.statusValues,(function(t,s){return i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.status,expression:"edit.status"}],attrs:{type:"radio",name:"status",id:"status"+s},domProps:{value:t.value,checked:e._q(e.edit.status,t.value)},on:{change:function(i){return e.$set(e.edit,"status",t.value)}}}),i("label",{staticClass:"label-inline",attrs:{for:"status"+s}},[e._v(e._s(t.label))])])}))],2)]),i("div",{staticClass:"form__group"},[i("fieldset",[i("legend",{class:{error:e.fieldErrors.solutions}},[i("strong",[e._v("Orientations des ménages :")])]),e._l(e.closingSolutions,(function(t,s){return i("fieldset",[i("legend",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.solutions[t.id].checked,expression:"edit.solutions[value.id].checked"}],attrs:{type:"checkbox",name:"closingSolution",id:"closingSolution"+s},domProps:{value:t.id,checked:Array.isArray(e.edit.solutions[t.id].checked)?e._i(e.edit.solutions[t.id].checked,t.id)>-1:e.edit.solutions[t.id].checked},on:{change:function(i){var s=e.edit.solutions[t.id].checked,a=i.target,n=!!a.checked;if(Array.isArray(s)){var o=t.id,r=e._i(s,o);a.checked?r<0&&e.$set(e.edit.solutions[t.id],"checked",s.concat([o])):r>-1&&e.$set(e.edit.solutions[t.id],"checked",s.slice(0,r).concat(s.slice(r+1)))}else e.$set(e.edit.solutions[t.id],"checked",n)}}}),i("label",{staticClass:"label-inline",attrs:{for:"closingSolution"+s}},[e._v(e._s(t.label))])]),i("div",{staticClass:"solution-people",class:{visible:e.edit.solutions[t.id].checked}},[e.fieldErrors.solutions&&e.fieldErrors.solutions[t.id]?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.solutions[t.id],(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),i("p",[e._v("Nombre de ménages concernés :"),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.solutions[t.id].householdsAffected,expression:"edit.solutions[value.id].householdsAffected"}],attrs:{type:"number"},domProps:{value:e.edit.solutions[t.id].householdsAffected},on:{input:function(i){i.target.composing||e.$set(e.edit.solutions[t.id],"householdsAffected",i.target.value)}}})]),i("p",[e._v("Nombre de personnes concernées :"),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.solutions[t.id].peopleAffected,expression:"edit.solutions[value.id].peopleAffected"}],attrs:{type:"number"},domProps:{value:e.edit.solutions[t.id].peopleAffected},on:{input:function(i){i.target.composing||e.$set(e.edit.solutions[t.id],"peopleAffected",i.target.value)}}})])])])}))],2)]),e.editError?i("div",{staticClass:"notification error"},[e._v(e._s(e.editError)+".")]):e._e(),i("div",{staticClass:"form__group"},[i("button",{staticClass:"button",on:{click:e.submitClose}},[e._v("Valider")]),i("button",{staticClass:"button secondary",on:{click:e.closePopin}},[e._v("Annuler")])])])])])]):e._e(),i("header",{ref:"header",staticClass:"town-header"},[i("div",{staticClass:"container"},[i("div",{staticClass:"town-name"},[i("div",{staticClass:"town-reference"},[i("h1",[i("span",{attrs:{"data-cy-data":"address"}},[e._v("Site "+e._s(e.town.addressSimple))]),e._v(" "),e.town.name?i("span",{staticClass:"town-usename",attrs:{"data-cy-data":"name"}},[e._v("« "+e._s(e.town.name)+" »")]):e._e(),i("span",{class:"town-status "+e.town.status},[e._v(e._s(e.status))])]),i("h2",[i("span",{attrs:{"data-cy-data":"city"}},[e._v(e._s(e.town.city.name))])])]),i("div",{staticClass:"town-actionButtons"},["open"===e.town.status&&"edit"!==e.mode&&e.hasPermission("shantytown.close",e.town)?i("button",{staticClass:"button secondary",on:{click:e.setCloseMode}},[e._v("Fermer le site")]):e._e(),"open"===e.town.status&&"edit"!==e.mode&&e.hasPermission("shantytown.update",e.town)?i("button",{staticClass:"button",on:{click:e.setEditMode}},[e._v("Mettre à jour")]):e._e(),"edit"!==e.mode&&e.hasPermission("shantytown.delete",e.town)?i("button",{staticClass:"button warning",attrs:{"data-cy-button":"delete"},on:{click:e.destroy}},[e._v("Supprimer le site")]):e._e(),"edit"===e.mode?i("button",{staticClass:"button",on:{click:e.submit}},[e._v("Sauvegarder")]):e._e(),"edit"===e.mode?i("button",{staticClass:"button warning",on:{click:e.setViewMode}},[e._v("Annuler")]):e._e()])]),i("div",{staticClass:"town-info"},[e.town.changelog.length>0?i("p",{staticClass:"town-links"},[i("span",{staticClass:"link",attrs:{"data-group":"sidePanelLink"},on:{click:function(t){return e.showAside("changelog")}}},[i("font-awesome-icon",{attrs:{icon:"history"}}),e._v(" Modifié le "+e._s(e.formatDate(e.town.updatedAt,"d M y"))+" - voir l'historique")],1)]):e._e(),e.hasPermission("shantytown_comment.list",e.town)?i("p",{staticClass:"town-links"},[i("span",{staticClass:"link",attrs:{"data-group":"sidePanelLink"},on:{click:function(t){return e.showAside("comments")}}},[i("font-awesome-icon",{attrs:{icon:"comment"}}),e._v(" "+e._s(e.town.comments.regular.length)+" commentaire"+e._s(e.town.comments.regular.length>1?"s":""))],1)]):e._e(),e.hasPermission("covid_comment.list")?i("p",{staticClass:"town-links town-links--covid"},[i("span",{staticClass:"link",attrs:{"data-group":"sidePanelLink"},on:{click:function(t){return e.showAside("covidComments")}}},[i("font-awesome-icon",{attrs:{icon:"comment"}}),e._v(" "+e._s(e.town.comments.covid.length)+" commentaire"+e._s(e.town.comments.covid.length>1?"s":"")+" COVID-19")],1)]):e._e()])])]),i("div",{ref:"main",staticClass:"town-main"},[i("div",{staticClass:"sidepanel",class:{"sidepanel--visible":null!==e.sidePanel}},[i("div",{staticClass:"sidepanel-shadow"}),i("div",{ref:"aside",staticClass:"sidepanel-wrapper"},[i("div",{staticClass:"sidepanel-actions"},[i("span",{on:{click:e.hideAside}},[i("font-awesome-icon",{attrs:{icon:"times",size:"2x"}})],1)]),"changelog"===e.sidePanel?i("div",[i("header",{staticClass:"sidepanel-header"},[i("h1",{staticClass:"sidepanel-title"},[i("font-awesome-icon",{attrs:{icon:"history"}}),e._v(" Historique des modifications")],1)]),i("div",{staticClass:"sidepanel-content"},e._l(e.town.changelog,(function(t){return i("div",{staticClass:"sidepanel-section"},[i("article",{staticClass:"userpost userpost--changelog"},[i("header",{staticClass:"userpost-header"},[i("p",{staticClass:"userpost-date"},[i("time",[e._v(e._s(e.formatDate(t.date,"d M y à h:i")))])]),i("h1",{staticClass:"userpost-title"},[i("router-link",{attrs:{to:"/annuaire/"+t.author.organization.id}},[i("font-awesome-icon",{attrs:{icon:"user"}}),i("span",[e._v(e._s(t.author.last_name.toUpperCase())+" "+e._s(t.author.first_name))])],1)],1)]),e._l(t.diff,(function(t){return i("p",{staticClass:"changelog"},[i("span",{staticClass:"changelog-name"},[e._v(e._s(t.field)+" :")]),i("br"),i("span",{staticClass:"changelog-oldValue",class:{"changelog-value--unknown":!t.oldValue}},[e._v(e._s(t.oldValue||"non renseigné"))]),e._v(", "),i("span",{staticClass:"changelog-newValue",class:{"changelog-value--unknown":!t.newValue}},[e._v(e._s(t.newValue||"non renseigné"))])])}))],2)])})),0)]):e._e(),"comments"===e.sidePanel?i("div",[i("header",{staticClass:"sidepanel-header"},[i("h1",{staticClass:"sidepanel-title"},[i("font-awesome-icon",{attrs:{icon:"comment"}}),e._v(" Commentaires")],1)]),i("div",{staticClass:"sidepanel-content"},[i("div",{staticClass:"sidepanel-section"},[e.hasPermission("shantytown_comment.create",e.town)?i("div",{staticClass:"comment-form"},[i("h1",[e._v("Ajouter un commentaire")]),i("p",[e._v("Merci de respecter les règles de confidentialité. Ne pas citer l’identité des individus (Nom, âge, sexe, origine...)")]),e.commentErrors.description?i("p",{staticClass:"error"},[i("ul",e._l(e.commentErrors.description,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),i("div",{staticClass:"input__group"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newComment,expression:"newComment"}],domProps:{value:e.newComment},on:{input:function(t){t.target.composing||(e.newComment=t.target.value)}}})]),i("p",[i("button",{staticClass:"button large",on:{click:e.addComment}},[e._v("Ajouter le commentaire")])])]):e._e()]),0===e.town.comments.regular.length?i("div",{staticClass:"sidepanel-section"},[i("p",[e._v("Aucun commentaire enregistré pour le moment")])]):e._e(),e._l(e.town.comments.regular,(function(t){return i("div",{staticClass:"sidepanel-section"},[i("article",{staticClass:"userpost userpost--comment"},[i("header",{staticClass:"userpost-header"},[i("p",{staticClass:"userpost-date"},[i("time",[e._v(e._s(e.formatDate(t.createdAt,"d M y à h:i")))])]),i("h1",{staticClass:"userpost-title"},[i("router-link",{attrs:{to:"/annuaire/"+t.createdBy.organizationId}},[i("font-awesome-icon",{attrs:{icon:"user"}}),i("span",[e._v(e._s(t.createdBy.lastName.toUpperCase())+" "+e._s(t.createdBy.firstName))])],1),i("span",{staticClass:"userpost-actions"},[e.canEditComment(t)?i("font-awesome-icon",{staticClass:"userpost-action--edit",attrs:{icon:"pencil-alt"},on:{click:function(i){return e.editComment(t)}}}):e._e(),e.canDeleteComment(t)?i("font-awesome-icon",{staticClass:"userpost-action--delete",attrs:{icon:"trash-alt"},on:{click:function(i){return e.deleteComment(t)}}}):e._e()],1)],1)]),e.commentEdit.commentId===t.id?i("div",[e.commentEdit.error?i("p",{staticClass:"error"},[i("ul",[i("li",[e._v(e._s(e.commentEdit.error))])])]):e._e(),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.commentEdit.value,expression:"commentEdit.value"}],attrs:{disabled:e.commentEdit.pending},domProps:{value:e.commentEdit.value},on:{input:function(t){t.target.composing||e.$set(e.commentEdit,"value",t.target.value)}}}),i("p",[i("button",{staticClass:"button",on:{click:function(i){return e.sendEditComment(t)}}},[e._v("Modifier")]),i("button",{staticClass:"button warning",on:{click:e.cancelEditComment}},[e._v("Annuler")])])]):i("p",[e._v(e._s(t.description))])])])}))],2)]):e._e(),"covidComments"===e.sidePanel?i("div",[i("header",{staticClass:"sidepanel-header"},[i("h1",{staticClass:"sidepanel-title"},[i("font-awesome-icon",{attrs:{icon:"comment"}}),e._v(" Commentaires COVID-19")],1)]),i("div",{staticClass:"sidepanel-content"},[i("div",{staticClass:"sidepanel-section"},[i("div",{staticClass:"comment-form"},[i("h1",[e._v("Ajouter un commentaire COVID-19")]),i("p",[e._v("Merci de préciser votre action, ses modalités, et le nombre de personnes avec des symptômes.")]),i("p",[e._v("Merci de respecter les règles de confidentialité. Ne pas citer l’identité des individus (Nom, âge, sexe, origine...)")]),e.covidErrors.length>0?i("p",{staticClass:"covid-header error"},[i("span",{staticClass:"error"},[e._v("Le fomulaire comporte des erreurs :")]),i("ul",e._l(e.covidErrors,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),i("div",{staticClass:"covid-header"},[e._m(1),i("datepicker",{attrs:{language:e.dateLanguage,"monday-first":!0,"disabled-dates":{to:e.town?new Date(1e3*e.town.builtAt):void 0,from:new Date},"full-month-name":!0,format:"dd MMMM yyyy"},model:{value:e.covidComment.date,callback:function(t){e.$set(e.covidComment,"date",t)},expression:"covidComment.date"}})],1),e._m(2),i("div",{staticClass:"input__group"},[i("label",{attrs:{for:"covid-equipeMaraude"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.covidComment.equipe_maraude,expression:"covidComment.equipe_maraude"}],staticClass:"input input--checkbox",attrs:{type:"checkbox",id:"covid-equipeMaraude",name:"covid-equipeMaraude"},domProps:{checked:Array.isArray(e.covidComment.equipe_maraude)?e._i(e.covidComment.equipe_maraude,null)>-1:e.covidComment.equipe_maraude},on:{change:function(t){var i=e.covidComment.equipe_maraude,s=t.target,a=!!s.checked;if(Array.isArray(i)){var n=null,o=e._i(i,n);s.checked?o<0&&e.$set(e.covidComment,"equipe_maraude",i.concat([n])):o>-1&&e.$set(e.covidComment,"equipe_maraude",i.slice(0,o).concat(i.slice(o+1)))}else e.$set(e.covidComment,"equipe_maraude",a)}}}),e._v(" Équipe de maraude ")])]),i("div",{staticClass:"input__group"},[i("label",{attrs:{for:"covid-equipeSanitaire"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.covidComment.equipe_sanitaire,expression:"covidComment.equipe_sanitaire"}],staticClass:"input input--checkbox",attrs:{type:"checkbox",id:"covid-equipeSanitaire",name:"covid-equipeSanitaire"},domProps:{checked:Array.isArray(e.covidComment.equipe_sanitaire)?e._i(e.covidComment.equipe_sanitaire,null)>-1:e.covidComment.equipe_sanitaire},on:{change:function(t){var i=e.covidComment.equipe_sanitaire,s=t.target,a=!!s.checked;if(Array.isArray(i)){var n=null,o=e._i(i,n);s.checked?o<0&&e.$set(e.covidComment,"equipe_sanitaire",i.concat([n])):o>-1&&e.$set(e.covidComment,"equipe_sanitaire",i.slice(0,o).concat(i.slice(o+1)))}else e.$set(e.covidComment,"equipe_sanitaire",a)}}}),e._v(" Équipe sanitaire ")])]),i("div",{staticClass:"input__group"},[i("label",{attrs:{for:"covid-equipeAccompagnement"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.covidComment.equipe_accompagnement,expression:"covidComment.equipe_accompagnement"}],staticClass:"input input--checkbox",attrs:{type:"checkbox",id:"covid-equipeAccompagnement",name:"covid-equipeAccompagnement"},domProps:{checked:Array.isArray(e.covidComment.equipe_accompagnement)?e._i(e.covidComment.equipe_accompagnement,null)>-1:e.covidComment.equipe_accompagnement},on:{change:function(t){var i=e.covidComment.equipe_accompagnement,s=t.target,a=!!s.checked;if(Array.isArray(i)){var n=null,o=e._i(i,n);s.checked?o<0&&e.$set(e.covidComment,"equipe_accompagnement",i.concat([n])):o>-1&&e.$set(e.covidComment,"equipe_accompagnement",i.slice(0,o).concat(i.slice(o+1)))}else e.$set(e.covidComment,"equipe_accompagnement",a)}}}),e._v(" Équipe d'accompagnement ")])]),i("div",{staticClass:"input__group"},[i("label",{attrs:{for:"covid-distributionAlimentaire"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.covidComment.distribution_alimentaire,expression:"covidComment.distribution_alimentaire"}],staticClass:"input input--checkbox",attrs:{type:"checkbox",id:"covid-distributionAlimentaire",name:"covid-distributionAlimentaire"},domProps:{checked:Array.isArray(e.covidComment.distribution_alimentaire)?e._i(e.covidComment.distribution_alimentaire,null)>-1:e.covidComment.distribution_alimentaire},on:{change:function(t){var i=e.covidComment.distribution_alimentaire,s=t.target,a=!!s.checked;if(Array.isArray(i)){var n=null,o=e._i(i,n);s.checked?o<0&&e.$set(e.covidComment,"distribution_alimentaire",i.concat([n])):o>-1&&e.$set(e.covidComment,"distribution_alimentaire",i.slice(0,o).concat(i.slice(o+1)))}else e.$set(e.covidComment,"distribution_alimentaire",a)}}}),e._v(" Distribution d'aide alimentaire ")])]),e._m(3),i("div",{staticClass:"input__group"},[i("label",{attrs:{for:"covid-personnesOrientees"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.covidComment.personnes_orientees,expression:"covidComment.personnes_orientees"}],staticClass:"input input--checkbox",attrs:{type:"checkbox",id:"covid-personnesOrientees",name:"covid-personnesOrientees"},domProps:{checked:Array.isArray(e.covidComment.personnes_orientees)?e._i(e.covidComment.personnes_orientees,null)>-1:e.covidComment.personnes_orientees},on:{change:function(t){var i=e.covidComment.personnes_orientees,s=t.target,a=!!s.checked;if(Array.isArray(i)){var n=null,o=e._i(i,n);s.checked?o<0&&e.$set(e.covidComment,"personnes_orientees",i.concat([n])):o>-1&&e.$set(e.covidComment,"personnes_orientees",i.slice(0,o).concat(i.slice(o+1)))}else e.$set(e.covidComment,"personnes_orientees",a)}}}),e._v(" Personne(s) orientée(s) vers un centre d'hébergement spécialisé (desserrement) ")])]),i("div",{staticClass:"input__group"},[i("label",{attrs:{for:"covid-personnesAvecSymptomes"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.covidComment.personnes_avec_symptomes,expression:"covidComment.personnes_avec_symptomes"}],staticClass:"input input--checkbox",attrs:{type:"checkbox",id:"covid-personnesAvecSymptomes",name:"covid-personnesAvecSymptomes"},domProps:{checked:Array.isArray(e.covidComment.personnes_avec_symptomes)?e._i(e.covidComment.personnes_avec_symptomes,null)>-1:e.covidComment.personnes_avec_symptomes},on:{change:function(t){var i=e.covidComment.personnes_avec_symptomes,s=t.target,a=!!s.checked;if(Array.isArray(i)){var n=null,o=e._i(i,n);s.checked?o<0&&e.$set(e.covidComment,"personnes_avec_symptomes",i.concat([n])):o>-1&&e.$set(e.covidComment,"personnes_avec_symptomes",i.slice(0,o).concat(i.slice(o+1)))}else e.$set(e.covidComment,"personnes_avec_symptomes",a)}}}),e._v(" Personne(s) avec des symptômes Covid-19 ")])]),i("div",{staticClass:"input__group"},[i("label",{attrs:{for:"covid-besoinAction"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.covidComment.besoin_action,expression:"covidComment.besoin_action"}],staticClass:"input input--checkbox",attrs:{type:"checkbox",id:"covid-besoinAction",name:"covid-v"},domProps:{checked:Array.isArray(e.covidComment.besoin_action)?e._i(e.covidComment.besoin_action,null)>-1:e.covidComment.besoin_action},on:{change:function(t){var i=e.covidComment.besoin_action,s=t.target,a=!!s.checked;if(Array.isArray(i)){var n=null,o=e._i(i,n);s.checked?o<0&&e.$set(e.covidComment,"besoin_action",i.concat([n])):o>-1&&e.$set(e.covidComment,"besoin_action",i.slice(0,o).concat(i.slice(o+1)))}else e.$set(e.covidComment,"besoin_action",a)}}}),e._v(" Besoin d'une action prioritaire ")])]),i("div",{staticClass:"input__group"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.covidComment.description,expression:"covidComment.description"}],domProps:{value:e.covidComment.description},on:{input:function(t){t.target.composing||e.$set(e.covidComment,"description",t.target.value)}}})]),i("p",[i("button",{staticClass:"button large",on:{click:e.addCovidComment}},[e._v("Ajouter le commentaire")])])])]),0===e.town.comments.covid.length?i("div",{staticClass:"sidepanel-section"},[i("p",[e._v("Aucun commentaire enregistré pour le moment")])]):e._e(),e._l(e.town.comments.covid,(function(t){return i("div",{staticClass:"sidepanel-section"},[i("article",{staticClass:"userpost userpost--comment"},[i("header",{staticClass:"userpost-header"},[i("p",{staticClass:"userpost-date"},[e._v("Publié le : "),i("time",[e._v(e._s(e.formatDate(t.createdAt,"d M y à h:i")))])]),i("p",{staticClass:"userpost-date"},[e._v("Date de l'intervention : "),i("time",[e._v(e._s(e.formatDate(t.covid.date,"d M y")))])]),i("h1",{staticClass:"userpost-title"},[i("router-link",{attrs:{to:"/annuaire/"+t.createdBy.organizationId}},[i("font-awesome-icon",{attrs:{icon:"user"}}),i("span",[e._v(e._s(t.createdBy.lastName.toUpperCase())+" "+e._s(t.createdBy.firstName))])],1)],1)]),e._l(e.covidTags,(function(s){return!0===t.covid[s.prop]?i("p",{staticClass:"covidTag"},[i("span",{class:"rbTag rbTag--"+s.type},[e._v(e._s(s.label))])]):e._e()})),i("p",[e._v(e._s(t.description))])],2)])}))],2)]):e._e()])]),i("div",{staticClass:"container"},[null!==e.deleteError?i("div",{staticClass:"notification error full-width"},[i("span",[e._v(e._s(e.deleteError))])]):e._e(),"details"===e.view?i("div",["view"===e.mode?i("div",[i("div",{staticClass:"panel"},[e._m(4),i("div",{staticClass:"form__group"},[e.town.priority?i("p",[i("strong",[e._v("Niveau de priorité du site :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"priority"}},[e._v(e._s(e.town.priority))])]):e._e(),void 0!==e.town.builtAt?i("p",[i("strong",[e._v("Date d'installation du site :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"built_at"}},[e._v(e._s(null!==e.town.builtAt?e.formatDate(e.town.builtAt):"Inconnue"))])]):e._e(),void 0!==e.town.declaredAt?i("p",[i("strong",[e._v("Date de signalement du site :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"declared_at"}},[e._v(e._s(null!==e.town.declaredAt?e.formatDate(e.town.declaredAt):"Inconnue"))])]):e._e(),"open"!==e.town.status&&void 0!==e.town.closedAt?i("p",[i("strong",[e._v("Date de disparition du site :")]),e._v(" "+e._s(null!==e.town.closedAt?e.formatDate(e.town.closedAt):"Inconnue")+" ")]):e._e(),"open"!==e.town.status?i("p",[i("strong",[e._v("Cause de la disparition :")]),e._v(" "+e._s(e.statusLabel)+" ")]):e._e(),"open"!==e.town.status&&void 0!==e.town.closingSolutions?i("p",[i("strong",[e._v("Orientation des ménages :")]),0===e.town.closingSolutions.length?i("span",[e._v(" aucune")]):e._e(),e.town.closingSolutions.length>0?i("ul",e._l(e.town.closingSolutions,(function(t){return i("li",[i("span",[e._v(e._s(e.closingSolutions.find((function(e){return e.id===t.id})).label))]),i("ul",e._l(e.formatSolution(t),(function(t){return i("li",[e._v(e._s(t))])})),0)])})),0):e._e()]):e._e()])]),i("div",{staticClass:"panel"},[e._m(5),i("div",{staticClass:"form__group"},[void 0!==e.town.address?i("p",[i("strong",[e._v("Adresse :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"address"}},[e._v(e._s(e.town.address))])]):e._e(),void 0!==e.town.addressDetails?i("p",[i("strong",[e._v("Informations d'accès :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"address_details"}},[e._v(e._s(e.town.addressDetails))])]):e._e(),i("Map",{attrs:{"display-searchbar":!1,towns:[e.town],"default-view":e.center}}),void 0!==e.town.fieldType?i("p",[i("strong",[e._v("Type de site :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"field_type"}},[e._v(e._s(e.town.fieldType.label))])]):e._e(),void 0!==e.town.ownerType?i("p",[i("strong",[e._v("Type de propriétaire :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"owner_type"}},[e._v(e._s(e.town.ownerType.label))])]):e._e(),void 0!==e.town.owner?i("p",[i("strong",[e._v("Propriétaire :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"owner"}},[e._v(e._s(e.town.owner||"Inconnu"))])]):e._e()],1)]),i("div",{staticClass:"panel"},[e._m(6),i("div",{staticClass:"form__group"},[void 0!==e.town.censusStatus?i("p",[i("strong",[e._v("Statut du diagnostic :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"census_status"}},[e._v(e._s("done"===e.town.censusStatus?"Réalisé":"scheduled"===e.town.censusStatus?"Prévu":"none"===e.town.censusStatus?"Non prévu":"Inconnu"))])]):e._e(),"done"===e.town.censusStatus||"scheduled"===e.town.censusStatus?i("p",[i("strong",[e._v("Date du diagnostic :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"census_conducted_at"}},[e._v(e._s(null!==e.town.censusConductedAt?e.formatDate(e.town.censusConductedAt):"Inconnue"))])]):e._e(),"done"===e.town.censusStatus||"scheduled"===e.town.censusStatus?i("p",[i("strong",[e._v("Opérateur en charge du diagnostic :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"census_conducted_by"}},[e._v(e._s(e.town.censusConductedBy||"Inconnu"))])]):e._e(),void 0!==e.town.populationTotal?i("p",[i("strong",[e._v("Nombre de personnes :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"population_total"}},[e._v(e._s(null!==e.town.populationTotal?e.town.populationTotal:"inconnu"))])]):e._e(),void 0!==e.town.populationCouples?i("p",[i("strong",[e._v("Nombre de ménages :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"population_couples"}},[e._v(e._s(null!==e.town.populationCouples?e.town.populationCouples:"inconnu"))])]):e._e(),void 0!==e.town.populationMinors?i("p",[i("strong",[e._v("Nombre de mineurs :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"population_minors"}},[e._v(e._s(null!==e.town.populationMinors?e.town.populationMinors:"inconnu"))])]):e._e(),void 0!==e.town.populationMinors0To3?i("p",[i("strong",[e._v("0 - 3 ans :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"population_minors_0_3"}},[e._v(e._s(null!==e.town.populationMinors0To3?e.town.populationMinors0To3:"inconnu"))])]):e._e(),void 0!==e.town.populationMinors3To6?i("p",[i("strong",[e._v("3 - 6 ans :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"population_minors_3_6"}},[e._v(e._s(null!==e.town.populationMinors3To6?e.town.populationMinors3To6:"inconnu"))])]):e._e(),void 0!==e.town.populationMinors6To12?i("p",[i("strong",[e._v("6 - 12 ans :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"population_minors_6_12"}},[e._v(e._s(null!==e.town.populationMinors6To12?e.town.populationMinors6To12:"inconnu"))])]):e._e(),void 0!==e.town.populationMinors12To16?i("p",[i("strong",[e._v("12 - 16 ans :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"population_minors_12_16"}},[e._v(e._s(null!==e.town.populationMinors12To16?e.town.populationMinors12To16:"inconnu"))])]):e._e(),void 0!==e.town.populationMinors16To18?i("p",[i("strong",[e._v("16 - 18 ans :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"population_minors_16_18"}},[e._v(e._s(null!==e.town.populationMinors16To18?e.town.populationMinors16To18:"inconnu"))])]):e._e(),void 0!==e.town.minorsInSchool?i("p",[i("strong",[e._v("Nombre d'enfants inscrits dans un établissement scolaire :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"minors_in_school"}},[e._v(e._s(null!==e.town.minorsInSchool?e.town.minorsInSchool:"inconnu"))])]):e._e(),void 0!==e.town.socialOrigins?i("p",{attrs:{"data-cy-data":"social_origins"}},[i("strong",[e._v("Origines :")]),e.town.socialOrigins.length>0?i("ul",e._l(e.town.socialOrigins,(function(t){return i("li",[e._v(e._s(t.label))])})),0):i("span",[e._v("inconnues")])]):e._e()])]),i("div",{staticClass:"panel"},[e._m(7),i("div",{staticClass:"form__group"},[i("p",[i("strong",[e._v("Accès à l'électricité:")]),e._v(" "),i("span",{attrs:{"data-cy-data":"electricity_type"}},[e._v(e._s(e.town.electricityType.label))])]),e.town.electricityComments?i("p",[i("strong",[e._v("Modalités d'accès à l'électricité :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"electricity_comments"}},[e._v(e._s(e.town.electricityComments))])]):e._e(),void 0!==e.town.accessToWater?i("p",[i("strong",[e._v("Accès à l'eau :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"access_to_water"}},[e._v(e._s(null!==e.town.accessToWater?e.town.accessToWater?"Oui":"Non":"Inconnu"))])]):e._e(),e.town.waterComments?i("p",[i("strong",[e._v("Modalités d'accès à l'eau :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"water_comments"}},[e._v(e._s(e.town.waterComments))])]):e._e(),void 0!==e.town.accessToSanitary?i("p",[i("strong",[e._v("Accès aux toilettes :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"access_to_sanitary"}},[e._v(e._s(null!==e.town.accessToSanitary?e.town.accessToSanitary?"Oui":"Non":"Inconnu"))])]):e._e(),e.town.sanitaryComments?i("p",[i("strong",[e._v("Modalités d'accès aux toilettes :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"sanitary_comments"}},[e._v(e._s(e.town.sanitaryComments))])]):e._e(),void 0!==e.town.trashEvacuation?i("p",[i("strong",[e._v("Évacuation des déchets :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"trash_evacuation"}},[e._v(e._s(null!==e.town.trashEvacuation?e.town.trashEvacuation?"Oui":"Non":"Inconnu"))])]):e._e()])]),e.hasPermission("shantytown.list.data_justice",e.town)?i("div",{staticClass:"panel"},[e._m(8),i("div",{staticClass:"form__group"},[void 0!==e.town.ownerComplaint?i("p",[i("strong",[e._v("Dépôt de plainte par le propriétaire :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"owner_complaint"}},[e._v(e._s(null===e.town.ownerComplaint?"Inconnu":e.town.ownerComplaint?"Oui":"Non"))])]):e._e(),void 0!==e.town.justiceProcedure?i("p",[i("strong",[e._v("Existence d’une procédure judiciaire :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"justice_procedure"}},[e._v(e._s(null===e.town.justiceProcedure?"Inconnu":e.town.justiceProcedure?"Oui":"Non"))])]):e._e(),e.town.justiceProcedure&&void 0!==e.town.justiceRendered?i("p",[i("strong",[e._v("Décision de justice rendue :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"justice_rendered"}},[e._v(e._s(null===e.town.justiceRendered?"Inconnu":e.town.justiceRendered?"Oui":"Non"))])]):e._e(),e.town.justiceRendered&&void 0!==e.town.justiceRenderedBy?i("p",[i("strong",[e._v("Origine de la décision :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"justice_rendered_by"}},[e._v(e._s(e.town.justiceRenderedBy||"Inconnue"))])]):e._e(),e.town.justiceRendered&&void 0!==e.town.justiceRenderedAt?i("p",[i("strong",[e._v("Date de la décision :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"justice_rendered_at"}},[e._v(e._s(null!==e.town.justiceRenderedAt?e.formatDate(e.town.justiceRenderedAt):"Inconnue"))])]):e._e(),e.town.justiceRendered&&void 0!==e.town.justiceChallenged?i("p",[i("strong",[e._v("Contentieux relatif à la décision de justice :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"justice_challenged"}},[e._v(e._s(null===e.town.justiceChallenged?"Inconnu":e.town.justiceChallenged?"Oui":"Non"))])]):e._e(),void 0!==e.town.policeStatus?i("p",[i("strong",[e._v("Concours de la force publique :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"police_status"}},[e._v(e._s("granted"===e.town.policeStatus?"Obtenu":"requested"===e.town.policeStatus?"Demandé":"Inconnu"))])]):e._e(),"requested"===e.town.policeStatus||"granted"===e.town.policeStatus?i("p",[i("strong",[e._v("Date de la demande du CFP :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"police_requested_at"}},[e._v(e._s(null!==e.town.policeRequestedAt?e.formatDate(e.town.policeRequestedAt):"Inconnue"))])]):e._e(),"requested"===e.town.policeStatus||"granted"===e.town.policeStatus?i("p",[i("strong",[e._v("Date d'octroi du CFP :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"police_granted_at"}},[e._v(e._s(null!==e.town.policeGrantedAt?e.formatDate(e.town.policeGrantedAt):"Inconnue"))])]):e._e(),void 0!==e.town.bailiff?i("p",[i("strong",[e._v("Nom de l'étude d'huissiers :")]),e._v(" "),i("span",{attrs:{"data-cy-data":"bailiff"}},[e._v(e._s(e.town.bailiff||"Inconnues"))])]):e._e()])]):e._e()]):e._e(),"edit"===e.mode?i("div",[i("div",{staticClass:"panel"},[e._m(9),i("div",{staticClass:"form__group"},[i("label",{class:{error:e.fieldErrors.priority}},[e._v("Niveau de priorité du site :")]),e._m(10),e.fieldErrors.priority?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.priority,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),i("select",{directives:[{name:"model",rawName:"v-model",value:e.edit.priority,expression:"edit.priority"}],attrs:{"data-cy-field":"priority"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.edit,"priority",t.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"1"}},[e._v("1")]),i("option",{attrs:{value:"2"}},[e._v("2")]),i("option",{attrs:{value:"3"}},[e._v("3")])])]),i("div",{staticClass:"form__group"},[i("label",{class:{error:e.fieldErrors.built_at}},[e._v("Date d'installation du site :")]),e.fieldErrors.built_at?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.built_at,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),i("datepicker",{attrs:{"data-cy-field":"built_at",language:e.dateLanguage,"monday-first":!0,"disabled-dates":{from:new Date},"full-month-name":!0,format:"dd MMMM yyyy"},model:{value:e.edit.builtAt,callback:function(t){e.$set(e.edit,"builtAt",t)},expression:"edit.builtAt"}})],1),i("div",{staticClass:"form__group"},[i("label",{class:{error:e.fieldErrors.declared_at}},[e._v("Date de signalement du site :")]),e.fieldErrors.declared_at?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.declared_at,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),i("datepicker",{attrs:{"data-cy-field":"declared_at",language:e.dateLanguage,"monday-first":!0,"disabled-dates":{from:new Date},"full-month-name":!0,format:"dd MMMM yyyy",clearButton:"true"},model:{value:e.edit.declaredAt,callback:function(t){e.$set(e.edit,"declaredAt",t)},expression:"edit.declaredAt"}})],1)]),i("div",{staticClass:"panel"},[e._m(11),i("div",{staticClass:"form__group"},[i("label",{class:{error:e.fieldErrors.address}},[e._v("Localisation géographique")]),e.fieldErrors.address?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.address,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),i("p",[e._v("Saisissez ici l'adresse du site, puis précisez sa position en déplaçant le point sur la carte.")]),i("AddressWithLocation",{attrs:{"data-cy-field":"address"},model:{value:e.edit.address,callback:function(t){e.$set(e.edit,"address",t)},expression:"edit.address"}})],1),i("div",{staticClass:"form__group"},[i("label",[e._v("Appellation du site :")]),e.fieldErrors.name?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.name,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),i("p",[e._v("Exemples : Entrepôt de la Poste, Rond-point du centre...")]),i("div",{staticClass:"input__group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.name,expression:"edit.name"}],attrs:{"data-cy-field":"name",type:"text",maxlength:"35"},domProps:{value:e.edit.name},on:{input:function(t){t.target.composing||e.$set(e.edit,"name",t.target.value)}}})])]),i("div",{staticClass:"form__group"},[i("label",[e._v("Informations d'accès :")]),i("p",[e._v("Saisissez ici toutes les informations qui, en plus de l'adresse, peuvent être utiles pour l'accès au site :")]),i("div",{staticClass:"input__group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.detailedAddress,expression:"edit.detailedAddress"}],attrs:{"data-cy-field":"address_details",type:"text"},domProps:{value:e.edit.detailedAddress},on:{input:function(t){t.target.composing||e.$set(e.edit,"detailedAddress",t.target.value)}}})])]),i("div",{staticClass:"form__group"},[i("fieldset",[i("legend",{class:{error:e.fieldErrors.field_type}},[e._v("Type de site :")]),e.fieldErrors.field_type?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.field_type,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),e._l(e.fieldTypes,(function(t,s){return i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.fieldType,expression:"edit.fieldType"}],attrs:{"data-cy-field":"field_type","data-cy-label":t.label,type:"radio",id:"fieldType"+s},domProps:{value:t.id,checked:e._q(e.edit.fieldType,t.id)},on:{change:function(i){return e.$set(e.edit,"fieldType",t.id)}}}),i("label",{staticClass:"label-inline",attrs:{for:"fieldType"+s}},[e._v(e._s(t.label))])])}))],2)]),i("div",{staticClass:"form__group"},[i("fieldset",[i("legend",{class:{error:e.fieldErrors.owner_type}},[e._v("Type de propriétaire :")]),e.fieldErrors.owner_type?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.owner_type,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),e._l(e.ownerTypes,(function(t,s){return i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.ownerType,expression:"edit.ownerType"}],attrs:{"data-cy-field":"owner_type","data-cy-label":t.label,type:"radio",id:"ownerType"+s},domProps:{value:t.id,checked:e._q(e.edit.ownerType,t.id)},on:{change:function(i){return e.$set(e.edit,"ownerType",t.id)}}}),i("label",{staticClass:"label-inline",attrs:{for:"ownerType"+s}},[e._v(e._s(t.label))])])}))],2)]),e.ownerTypes.find((function(t){return"Inconnu"!==t.label&&t.id===e.edit.ownerType}))?i("div",{staticClass:"form__group"},[i("fieldset",[i("legend",{class:{error:e.fieldErrors.owner}},[e._v("Identité du propriétaire :")]),e.fieldErrors.owner?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.owner,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),i("div",{staticClass:"input__group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.owner,expression:"edit.owner"}],attrs:{"data-cy-field":"owner",type:"text"},domProps:{value:e.edit.owner},on:{input:function(t){t.target.composing||e.$set(e.edit,"owner",t.target.value)}}})])])]):e._e()]),i("div",{staticClass:"panel"},[e._m(12),i("div",{staticClass:"form__group"},[i("label",{class:{error:e.fieldErrors.census_status}},[e._v("Statut du diagnostic social :")]),e.fieldErrors.census_status?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.census_status,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),i("p",[e._v("Un diagnostic social vise à identifier les situations et besoins des familles et personnes, de repérer le contexte territorial et les acteurs en présence.")]),e._l(e.diagnosisValues,(function(t,s){return i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.census_status,expression:"edit.census_status"}],attrs:{"data-cy-field":"census_status","data-cy-label":t.label,type:"radio",name:"diagnosis",id:"diagnosis"+s},domProps:{value:t.value,checked:e._q(e.edit.census_status,t.value)},on:{change:function(i){return e.$set(e.edit,"census_status",t.value)}}}),i("label",{staticClass:"label-inline",attrs:{for:"diagnosis"+s}},[e._v(e._s(t.label))])])}))],2),"scheduled"===e.edit.census_status||"done"===e.edit.census_status?i("div",{staticClass:"form__group"},[i("label",{class:{error:e.fieldErrors.census_conducted_at}},[e._v("Date du diagnostic :")]),e.fieldErrors.census_conducted_at?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.census_conducted_at,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),i("datepicker",{attrs:{"data-cy-field":"census_conducted_at",language:e.dateLanguage,"monday-first":!0,"full-month-name":!0,format:"dd MMMM yyyy"},model:{value:e.edit.census_conducted_at,callback:function(t){e.$set(e.edit,"census_conducted_at",t)},expression:"edit.census_conducted_at"}})],1):e._e(),"scheduled"===e.edit.census_status||"done"===e.edit.census_status?i("div",{staticClass:"form__group"},[i("fieldset",[i("legend",{class:{error:e.fieldErrors.census_conducted_by}},[e._v("Service ou opérateur en charge du diagnostic :")]),e.fieldErrors.census_conducted_by?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.census_conducted_by,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),i("div",{staticClass:"input__group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.census_conducted_by,expression:"edit.census_conducted_by"}],attrs:{"data-cy-field":"census_conducted_by",type:"text"},domProps:{value:e.edit.census_conducted_by},on:{input:function(t){t.target.composing||e.$set(e.edit,"census_conducted_by",t.target.value)}}})])])]):e._e(),i("div",{staticClass:"form__group"},[i("label",{class:{error:e.fieldErrors.population_total}},[e._v("Nombre de personnes :")]),e.fieldErrors.population_total?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.population_total,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),i("p",[e._v("Laissez ce champ vide si l'information est inconnue")]),i("div",{staticClass:"input__group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.populationTotal,expression:"edit.populationTotal"}],attrs:{"data-cy-field":"population_total",type:"number"},domProps:{value:e.edit.populationTotal},on:{input:function(t){t.target.composing||e.$set(e.edit,"populationTotal",t.target.value)}}})])]),i("div",{staticClass:"form__group"},[i("label",{class:{error:e.fieldErrors.population_couples}},[e._v("Nombre de ménages :")]),e.fieldErrors.population_couples?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.population_couples,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),i("p",[e._v("Laissez ce champ vide si l'information est inconnue")]),i("div",{staticClass:"input__group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.populationCouples,expression:"edit.populationCouples"}],attrs:{"data-cy-field":"population_couples",type:"number"},domProps:{value:e.edit.populationCouples},on:{input:function(t){t.target.composing||e.$set(e.edit,"populationCouples",t.target.value)}}})])]),i("div",{staticClass:"form__group"},[i("label",{class:{error:e.fieldErrors.population_minors}},[e._v("Nombre de mineurs :")]),e.fieldErrors.population_minors?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.population_minors,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),i("p",[e._v("Laissez ce champ vide si l'information est inconnue")]),i("div",{staticClass:"input__group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.populationMinors,expression:"edit.populationMinors"}],attrs:{"data-cy-field":"population_minors",type:"number"},domProps:{value:e.edit.populationMinors},on:{input:function(t){t.target.composing||e.$set(e.edit,"populationMinors",t.target.value)}}})])]),i("div",{staticClass:"form__group"},[i("label",{class:{error:e.fieldErrors.population_minors_0_3}},[e._v("0 - 3 ans :")]),e.fieldErrors.population_minors_0_3?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.population_minors_0_3,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),i("p",[e._v("Laissez ce champ vide si l'information est inconnue")]),i("div",{staticClass:"input__group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.populationMinors0To3,expression:"edit.populationMinors0To3"}],attrs:{"data-cy-field":"population_minors_0_3",type:"number"},domProps:{value:e.edit.populationMinors0To3},on:{input:function(t){t.target.composing||e.$set(e.edit,"populationMinors0To3",t.target.value)}}})])]),i("div",{staticClass:"form__group"},[i("label",{class:{error:e.fieldErrors.population_minors_3_6}},[e._v("3 - 6 ans :")]),e.fieldErrors.population_minors_3_6?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.population_minors_3_6,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),i("p",[e._v("Laissez ce champ vide si l'information est inconnue")]),i("div",{staticClass:"input__group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.populationMinors3To6,expression:"edit.populationMinors3To6"}],attrs:{"data-cy-field":"population_minors_3_6",type:"number"},domProps:{value:e.edit.populationMinors3To6},on:{input:function(t){t.target.composing||e.$set(e.edit,"populationMinors3To6",t.target.value)}}})])]),i("div",{staticClass:"form__group"},[i("label",{class:{error:e.fieldErrors.population_minors_6_12}},[e._v("6 - 12 ans :")]),e.fieldErrors.population_minors_6_12?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.population_minors_6_12,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),i("p",[e._v("Laissez ce champ vide si l'information est inconnue")]),i("div",{staticClass:"input__group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.populationMinors6To12,expression:"edit.populationMinors6To12"}],attrs:{"data-cy-field":"population_minors_6_12",type:"number"},domProps:{value:e.edit.populationMinors6To12},on:{input:function(t){t.target.composing||e.$set(e.edit,"populationMinors6To12",t.target.value)}}})])]),i("div",{staticClass:"form__group"},[i("label",{class:{error:e.fieldErrors.population_minors_12_16}},[e._v("12 - 16 ans :")]),e.fieldErrors.population_minors_12_16?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.population_minors_12_16,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),i("p",[e._v("Laissez ce champ vide si l'information est inconnue")]),i("div",{staticClass:"input__group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.populationMinors12To16,expression:"edit.populationMinors12To16"}],attrs:{"data-cy-field":"population_minors_12_16",type:"number"},domProps:{value:e.edit.populationMinors12To16},on:{input:function(t){t.target.composing||e.$set(e.edit,"populationMinors12To16",t.target.value)}}})])]),i("div",{staticClass:"form__group"},[i("label",{class:{error:e.fieldErrors.population_minors_16_18}},[e._v("16 - 18 ans :")]),e.fieldErrors.population_minors_16_18?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.population_minors_16_18,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),i("p",[e._v("Laissez ce champ vide si l'information est inconnue")]),i("div",{staticClass:"input__group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.populationMinors16To18,expression:"edit.populationMinors16To18"}],attrs:{"data-cy-field":"population_minors_16_18",type:"number"},domProps:{value:e.edit.populationMinors16To18},on:{input:function(t){t.target.composing||e.$set(e.edit,"populationMinors16To18",t.target.value)}}})])]),i("div",{staticClass:"form__group"},[i("label",{class:{error:e.fieldErrors.minors_in_school}},[e._v("Nombre d'enfants inscrits dans un établissement scolaire :")]),e.fieldErrors.minors_in_school?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.minors_in_school,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),i("p",[e._v("Laissez ce champ vide si l'information est inconnue")]),i("div",{staticClass:"input__group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.minorsInSchool,expression:"edit.minorsInSchool"}],attrs:{"data-cy-field":"minors_in_school",type:"number"},domProps:{value:e.edit.minorsInSchool},on:{input:function(t){t.target.composing||e.$set(e.edit,"minorsInSchool",t.target.value)}}})])]),i("div",{staticClass:"form__group"},[i("fieldset",[i("legend",[e._v("Origines :")]),i("div",[i("p",[e._v("Ne rien cocher si l'information est inconnue")]),e._l(e.socialOrigins,(function(t,s){return i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.origins,expression:"edit.origins"}],attrs:{"data-cy-field":"social_origins","data-cy-label":t.label,type:"checkbox",id:"socialOrigins"+s},domProps:{value:t.id,checked:Array.isArray(e.edit.origins)?e._i(e.edit.origins,t.id)>-1:e.edit.origins},on:{change:function(i){var s=e.edit.origins,a=i.target,n=!!a.checked;if(Array.isArray(s)){var o=t.id,r=e._i(s,o);a.checked?r<0&&e.$set(e.edit,"origins",s.concat([o])):r>-1&&e.$set(e.edit,"origins",s.slice(0,r).concat(s.slice(r+1)))}else e.$set(e.edit,"origins",n)}}}),i("label",{staticClass:"label-inline",attrs:{for:"socialOrigins"+s}},[e._v(e._s(t.label))])])}))],2)])])]),i("div",{staticClass:"panel"},[e._m(13),i("div",{staticClass:"form__group"},[i("fieldset",[i("legend",{class:{error:e.fieldErrors.electricity_type}},[e._v("Accès à l'électricité :")]),e.fieldErrors.electricity_type?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.electricity_type,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),e._l(e.electricityTypes,(function(t,s){return i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.electricityType,expression:"edit.electricityType"}],attrs:{"data-cy-field":"electricity_type","data-cy-label":t.label,type:"radio",name:"electricityType",id:"electricityType"+s},domProps:{value:t.id,checked:e._q(e.edit.electricityType,t.id)},on:{change:function(i){return e.$set(e.edit,"electricityType",t.id)}}}),i("label",{staticClass:"label-inline",attrs:{for:"electricityType"+s}},[e._v(e._s(t.label))])])}))],2)]),i("div",{staticClass:"form__group"},[i("fieldset",[i("legend",{class:{error:e.fieldErrors.electricity_comments}},[e._v("Modalités d'accès :")]),i("p",[e._v("Exemples : groupe électrogène, raccordement à une usine...")]),e.fieldErrors.electricity_comments?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.electricity_comments,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.edit.electricityComments,expression:"edit.electricityComments"}],staticClass:"input input--textarea",attrs:{"data-cy-field":"electricity_comments"},domProps:{value:e.edit.electricityComments},on:{input:function(t){t.target.composing||e.$set(e.edit,"electricityComments",t.target.value)}}})])]),i("div",{staticClass:"form__group"},[i("fieldset",[i("legend",{class:{error:e.fieldErrors.access_to_water}},[e._v("Accès à l'eau :")]),e.fieldErrors.access_to_water?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.access_to_water,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),e._l(e.yesnoValues,(function(t,s){return i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.accessToWater,expression:"edit.accessToWater"}],attrs:{"data-cy-field":"access_to_water","data-cy-label":t.label,type:"radio",name:"accessToWater",id:"accessToWater"+s},domProps:{value:t.value,checked:e._q(e.edit.accessToWater,t.value)},on:{change:function(i){return e.$set(e.edit,"accessToWater",t.value)}}}),i("label",{staticClass:"label-inline",attrs:{for:"accessToWater"+s}},[e._v(e._s(t.label))])])}))],2)]),i("div",{staticClass:"form__group"},[i("fieldset",[i("legend",{class:{error:e.fieldErrors.water_comments}},[e._v("Modalités d'accès :")]),i("p",[e._v("Exemples: Citerne de 100 litres remplie par les pompiers tous les jours, 3 robinets raccordés par la collectivité, borne incendie à 200 mètres...")]),e.fieldErrors.water_comments?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.water_comments,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.edit.waterComments,expression:"edit.waterComments"}],staticClass:"input input--textarea",attrs:{"data-cy-field":"water_comments"},domProps:{value:e.edit.waterComments},on:{input:function(t){t.target.composing||e.$set(e.edit,"waterComments",t.target.value)}}})])]),i("div",{staticClass:"form__group"},[i("fieldset",[i("legend",{class:{error:e.fieldErrors.access_to_sanitary}},[e._v("Accès à des toilettes :")]),e.fieldErrors.access_to_sanitary?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.access_to_sanitary,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),e._l(e.yesnoValues,(function(t,s){return i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.accessToSanitary,expression:"edit.accessToSanitary"}],attrs:{"data-cy-field":"access_to_sanitary","data-cy-label":t.label,type:"radio",name:"accessToSanitary",id:"accessToSanitary"+s},domProps:{value:t.value,checked:e._q(e.edit.accessToSanitary,t.value)},on:{change:function(i){return e.$set(e.edit,"accessToSanitary",t.value)}}}),i("label",{staticClass:"label-inline",attrs:{for:"accessToSanitary"+s}},[e._v(e._s(t.label))])])}))],2)]),i("div",{staticClass:"form__group"},[i("fieldset",[i("legend",{class:{error:e.fieldErrors.sanitary_comments}},[e._v("Modalités d'accès :")]),i("p",[e._v("Exemples : 3 toilettes sèches, toilettes raccordés au réseau, un bloc sanitaire fourni par la ville...")]),e.fieldErrors.sanitary_comments?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.sanitary_comments,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.edit.sanitaryComments,expression:"edit.sanitaryComments"}],staticClass:"input input--textarea",attrs:{"data-cy-field":"sanitary_comments"},domProps:{value:e.edit.sanitaryComments},on:{input:function(t){t.target.composing||e.$set(e.edit,"sanitaryComments",t.target.value)}}})])]),i("div",{staticClass:"form__group"},[i("fieldset",[i("legend",{class:{error:e.fieldErrors.trash_evacuation}},[e._v("Évacuation des déchets :")]),e.fieldErrors.trash_evacuation?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.trash_evacuation,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),e._l(e.yesnoValues,(function(t,s){return i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.trashEvacuation,expression:"edit.trashEvacuation"}],attrs:{"data-cy-field":"trash_evacuation","data-cy-label":t.label,type:"radio",name:"trashEvacuation",id:"trashEvacuation"+s},domProps:{value:t.value,checked:e._q(e.edit.trashEvacuation,t.value)},on:{change:function(i){return e.$set(e.edit,"trashEvacuation",t.value)}}}),i("label",{staticClass:"label-inline",attrs:{for:"trashEvacuation"+s}},[e._v(e._s(t.label))])])}))],2)])]),e.hasPermission("shantytown.update.data_justice",e.town)?i("div",{staticClass:"panel"},[e._m(14),i("div",{staticClass:"form__group"},[i("label",{class:{error:e.fieldErrors.owner_complaint}},[e._v("Dépôt de plainte par le propriétaire :")]),e.fieldErrors.owner_complaint?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.owner_complaint,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),e._l(e.yesnoValues,(function(t,s){return i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.owner_complaint,expression:"edit.owner_complaint"}],attrs:{"data-cy-field":"owner_complaint","data-cy-label":t.label,type:"radio",name:"ownerComplaint",id:"ownerComplaint"+s},domProps:{value:t.value,checked:e._q(e.edit.owner_complaint,t.value)},on:{change:function(i){return e.$set(e.edit,"owner_complaint",t.value)}}}),i("label",{staticClass:"label-inline",attrs:{for:"ownerComplaint"+s}},[e._v(e._s(t.label))])])}))],2),i("div",{staticClass:"form__group"},[i("label",{class:{error:e.fieldErrors.justice_procedure}},[e._v("Procédure judiciaire en cours :")]),e.fieldErrors.justice_procedure?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.justice_procedure,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),e._l(e.yesnoValues,(function(t,s){return i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.justiceProcedure,expression:"edit.justiceProcedure"}],attrs:{"data-cy-field":"justice_procedure","data-cy-label":t.label,type:"radio",name:"justiceProcedure",id:"justiceProcedure"+s},domProps:{value:t.value,checked:e._q(e.edit.justiceProcedure,t.value)},on:{change:function(i){return e.$set(e.edit,"justiceProcedure",t.value)}}}),i("label",{staticClass:"label-inline",attrs:{for:"justiceProcedure"+s}},[e._v(e._s(t.label))])])}))],2),1===e.edit.justiceProcedure?i("div",{staticClass:"form__group"},[i("label",{class:{error:e.fieldErrors.justice_rendered}},[e._v("Décision de justice rendue :")]),e.fieldErrors.justice_rendered?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.justice_rendered,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),e._l(e.yesnoValues,(function(t,s){return i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.justice_rendered,expression:"edit.justice_rendered"}],attrs:{"data-cy-field":"justice_rendered","data-cy-label":t.label,type:"radio",name:"justiceRendered",id:"justiceRendered"+s},domProps:{value:t.value,checked:e._q(e.edit.justice_rendered,t.value)},on:{change:function(i){return e.$set(e.edit,"justice_rendered",t.value)}}}),i("label",{staticClass:"label-inline",attrs:{for:"justiceRendered"+s}},[e._v(e._s(t.label))])])}))],2):e._e(),1===e.edit.justiceProcedure&&1===e.edit.justice_rendered?i("div",{staticClass:"form__group"},[i("fieldset",[i("legend",{class:{error:e.fieldErrors.justice_rendered_by}},[e._v("Origine de la décision :")]),e.fieldErrors.justice_rendered_by?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.justice_rendered_by,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),i("div",{staticClass:"input__group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.justice_rendered_by,expression:"edit.justice_rendered_by"}],attrs:{"data-cy-field":"justice_rendered_by",type:"text"},domProps:{value:e.edit.justice_rendered_by},on:{input:function(t){t.target.composing||e.$set(e.edit,"justice_rendered_by",t.target.value)}}})])])]):e._e(),1===e.edit.justiceProcedure&&1===e.edit.justice_rendered?i("div",{staticClass:"form__group"},[i("label",{class:{error:e.fieldErrors.justice_rendered_at}},[e._v("Date de la décision :")]),e.fieldErrors.justice_rendered_at?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.justice_rendered_at,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),i("datepicker",{attrs:{"data-cy-field":"justice_rendered_at",language:e.dateLanguage,"monday-first":!0,"disabled-dates":{from:new Date},"full-month-name":!0,format:"dd MMMM yyyy"},model:{value:e.edit.justice_rendered_at,callback:function(t){e.$set(e.edit,"justice_rendered_at",t)},expression:"edit.justice_rendered_at"}})],1):e._e(),1===e.edit.justiceProcedure&&1===e.edit.justice_rendered?i("div",{staticClass:"form__group"},[i("label",{class:{error:e.fieldErrors.justice_challenged}},[e._v("Contentieux relatif à la décision de justice :")]),e.fieldErrors.justice_challenged?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.justice_challenged,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),e._l(e.yesnoValues,(function(t,s){return i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.justice_challenged,expression:"edit.justice_challenged"}],attrs:{"data-cy-field":"justice_challenged","data-cy-label":t.label,type:"radio",name:"justiceChallenged",id:"justiceChallenged"+s},domProps:{value:t.value,checked:e._q(e.edit.justice_challenged,t.value)},on:{change:function(i){return e.$set(e.edit,"justice_challenged",t.value)}}}),i("label",{staticClass:"label-inline",attrs:{for:"justiceChallenged"+s}},[e._v(e._s(t.label))])])}))],2):e._e(),i("div",{staticClass:"form__group"},[i("label",{class:{error:e.fieldErrors.police_status}},[e._v("Concours de la force publique :")]),e.fieldErrors.police_status?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.police_status,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),e._l(e.cfpValues,(function(t,s){return i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.police_status,expression:"edit.police_status"}],attrs:{"data-cy-field":"police_status","data-cy-label":t.label,type:"radio",name:"cfp",id:"cfp"+s},domProps:{value:t.value,checked:e._q(e.edit.police_status,t.value)},on:{change:function(i){return e.$set(e.edit,"police_status",t.value)}}}),i("label",{staticClass:"label-inline",attrs:{for:"cfp"+s}},[e._v(e._s(t.label))])])}))],2),"requested"===e.edit.police_status||"granted"===e.edit.police_status?i("div",{staticClass:"form__group"},[i("label",{class:{error:e.fieldErrors.police_requested_at}},[e._v("Date de la demande du CFP :")]),e.fieldErrors.police_requested_at?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.police_requested_at,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),i("datepicker",{attrs:{"data-cy-field":"police_requested_at",language:e.dateLanguage,"monday-first":!0,"disabled-dates":{from:new Date},"full-month-name":!0,format:"dd MMMM yyyy"},model:{value:e.edit.police_requested_at,callback:function(t){e.$set(e.edit,"police_requested_at",t)},expression:"edit.police_requested_at"}})],1):e._e(),"granted"===e.edit.police_status?i("div",{staticClass:"form__group"},[i("label",{class:{error:e.fieldErrors.police_granted_at}},[e._v("Date d'octroi du CFP :")]),e.fieldErrors.police_granted_at?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.police_granted_at,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),i("datepicker",{attrs:{"data-cy-field":"police_granted_at",language:e.dateLanguage,"monday-first":!0,"disabled-dates":{from:new Date},"full-month-name":!0,format:"dd MMMM yyyy"},model:{value:e.edit.police_granted_at,callback:function(t){e.$set(e.edit,"police_granted_at",t)},expression:"edit.police_granted_at"}})],1):e._e(),i("div",{staticClass:"form__group"},[i("fieldset",[i("legend",{class:{error:e.fieldErrors.bailiff}},[e._v("Nom de l'étude d'huissiers :")]),e.fieldErrors.bailiff?i("p",{staticClass:"error"},[i("ul",e._l(e.fieldErrors.bailiff,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),i("div",{staticClass:"input__group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.bailiff,expression:"edit.bailiff"}],attrs:{"data-cy-field":"bailiff",type:"text"},domProps:{value:e.edit.bailiff},on:{input:function(t){t.target.composing||e.$set(e.edit,"bailiff",t.target.value)}}})])])])]):e._e(),e.editError?i("div",{staticClass:"notification error"},[e._v(e._s(e.editError)+".")]):e._e(),i("div",{staticClass:"form__group"},[i("button",{staticClass:"button large",attrs:{"data-cy-field":"submit"},on:{click:e.submit}},[e._v("Sauvegarder")])])]):e._e()]):"actions"===e.view?i("div",e._l(e.town.actions,(function(t){return i("div",{staticClass:"panel"},[i("div",{staticClass:"panel__header"},[i("h3",[i("router-link",{attrs:{to:"/action/"+t.id}},[e._v(e._s(t.name))]),e._v(" - "),i("small",{staticClass:"panel__header-extra"},[e._v("Débutée le "+e._s(e.formatDate(t.startedAt)))])],1)]),i("p",[i("strong",[e._v("Type de l'action :")]),e._v(" "+e._s(t.type))]),e._m(15,!0),i("p",[e._v(e._s(t.description||"Aucun détails fournis"))])])})),0):e._e()])])],1)],1)},vp=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Chargement des données en cours...")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("label",[i("strong",[e._v("Date de votre intervention :")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",{staticClass:"covid-header"},[i("strong",[e._v("Préciser votre intervention :")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",{staticClass:"covid-header"},[i("strong",[e._v("Signaler si nécessaire :")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"panel__header"},[i("h3",[e._v("1. Situation du site")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"panel__header"},[i("h3",[e._v("2. Localisation")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"panel__header"},[i("h3",[e._v("3. Habitants")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"panel__header"},[i("h3",[e._v("4. Conditions de vie")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"panel__header"},[i("h3",[e._v("5. Procédure judiciaire d’expulsion des occupants")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"panel__header"},[i("h3",[e._v("1. Situation du site")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",[e._v("1 étant le niveau de priorité le plus haut"),i("br"),e._v("Le niveau de priorité est un indicateur réservé aux correspondants des services de l’État.")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"panel__header"},[i("h3",[e._v("2. Localisation")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"panel__header"},[i("h3",[e._v("3. Habitants")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"panel__header"},[i("h3",[e._v("4. Conditions de vie")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"panel__header"},[i("h3",[e._v("5. Procédure judiciaire d’expulsion des occupants")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",[i("strong",[e._v("Détails de l'action :")])])}],fp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"popin popin--commentDeletion"},[i("div",{ref:"wrapper",staticClass:"popin-wrapper"},[i("div",["pending"!==e.status?i("p",{staticClass:"popin-close"},[i("span",{staticClass:"link",on:{click:e.close}},[i("font-awesome-icon",{attrs:{icon:"times",size:"2x"}})],1)]):e._e(),i("div",{staticClass:"popin-header"},[i("span",{staticClass:"popin-icon"},[i("font-awesome-icon",{attrs:{icon:"trash-alt",size:"lg"}})],1),i("h1",{staticClass:"popin-title"},[e._v("Confirmez-vous la suppression du commentaire ?")])]),i("div",{staticClass:"popin-body"},[i("div",{staticClass:"comment"},[i("header",{staticClass:"comment-header"},[e._v(e._s(e.date)+" à "+e._s(e.time))]),i("ul",[i("li",{staticClass:"comment-author"},[i("span",[i("font-awesome-icon",{attrs:{icon:"user"}})],1),e._v(" "+e._s(e.comment.author.name))]),i("li",{staticClass:"comment-comment"},[i("span",[i("font-awesome-icon",{attrs:{icon:"comment"}})],1),e._v(" Commentaire")]),i("li",{staticClass:"comment-shantytown"},[i("span",[i("font-awesome-icon",{attrs:{icon:"map-pin"}})],1),e._v(" Site : "+e._s(e.address))])]),i("div",{staticClass:"comment-content",domProps:{innerHTML:e._s(e.comment.content)}})]),i("h1",{staticClass:"popin-h1"},[e._v("Pourquoi souhaitez-vous supprimer ce commentaire ?")]),null!==e.error?i("p",{staticClass:"error"},[e._v(e._s(e.error))]):e._e(),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],attrs:{placeholder:"Précisez la raison de la suppression à l'auteur, un mail lui sera envoyé"},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}}),i("div",{staticClass:"commentDeletionButtons"},["pending"!==e.status?i("button",{staticClass:"button secondary",on:{click:e.close}},[e._v("Annuler")]):e._e(),i("button",{staticClass:"button primary",attrs:{disabled:"pending"===e.status},on:{click:e.deleteComment}},["pending"!==e.status?i("span",[e._v("Oui, confirmer")]):i("span",[i("img",{attrs:{src:"/img/spinner_light.svg",width:"20"}})])])])])])])])},_p=[],gp={props:{comment:{type:Object,required:!0}},data(){return{status:null,error:null,message:""}},computed:{date(){return App.formatDate(this.comment.date,"d/m/y")},time(){return App.formatDate(this.comment.date,"h:i")},address(){return`${this.comment.shantytown.usename}, ${this.comment.shantytown.city}`}},mounted(){setTimeout(()=>{document.addEventListener("click",this.checkOutsideClick)},500)},destroyed(){document.removeEventListener("click",this.checkOutsideClick)},methods:{checkOutsideClick(e){this.$refs.wrapper.contains(e.target)||this.close()},close(){"pending"!==this.status&&this.$emit("close")},deleteComment(){"pending"!==this.status&&(this.status="pending",this.error=null,Kr(this.comment.shantytown.id,this.comment.id,this.message).then(()=>{this.status=null,this.message="",this.$emit("deleted")}).catch(({user_message:e})=>{this.status=null,this.error=e}))}}},bp=gp,yp=bp,Cp=(i("6501"),Object(d["a"])(yp,fp,_p,!1,null,"38509d0a",null)),wp=Cp.exports;function kp(e){return!0===e?1:!1===e?0:-1}var xp={components:{NavBar:Qo,Map:lu,AddressWithLocation:zr,Datepicker:tr["default"],simplebar:Td["a"],CommentDeletion:wp},data(){return{userId:fo().user.id,loading:!1,error:null,town:null,view:"details",mode:"view",editError:null,deleteError:null,fieldErrors:{},electricityTypes:fo().electricity_types,fieldTypes:fo().field_types,ownerTypes:fo().owner_types,socialOrigins:fo().social_origins,closingSolutions:fo().closing_solutions,dateLanguage:zi["fr"],yesnoValues:[{value:1,label:"Oui"},{value:0,label:"Non"},{value:-1,label:"Inconnu"}],closedWithSolutionsValues:[{value:!0,label:"Oui"},{value:!1,label:"Non"}],statusValues:[{value:"closed_by_justice",label:"Exécution d'une décision de justice"},{value:"closed_by_admin",label:"Exécution d'une décision administrative"},{value:"other",label:"Autre"},{value:"unknown",label:"Raison inconnue"}],diagnosisValues:[{value:"none",label:"Non prévu"},{value:"scheduled",label:"Prévu"},{value:"done",label:"Réalisé"},{value:null,label:"Inconnu"}],cfpValues:[{value:"none",label:"Non demandé"},{value:"requested",label:"Demandé"},{value:"granted",label:"Obtenu"},{value:null,label:"Inconnu"}],newComment:"",covidComment:{date:new Date,description:"",equipe_maraude:!1,equipe_sanitaire:!1,equipe_accompagnement:!1,distribution_alimentaire:!1,personnes_orientees:!1,personnes_avec_symptomes:!1,besoin_action:!1},covidTags:[{prop:"equipe_maraude",label:"Équipe de maraude",type:"warning"},{prop:"equipe_sanitaire",label:"Équipe sanitaire",type:"warning"},{prop:"equipe_accompagnement",label:"Équipe d'accompagnement",type:"warning"},{prop:"distribution_alimentaire",label:"Distribution d'aide alimentaire",type:"warning"},{prop:"personnes_orientees",label:"Personne(s) orientée(s) vers un centre d'hébergement spécialisé (desserrement)",type:"error"},{prop:"personnes_avec_symptomes",label:"Personne(s) avec des symptômes Covid-19",type:"error"},{prop:"besoin_action",label:"Besoin d'une action prioritaire",type:"error"}],sidePanel:null,commentError:null,commentErrors:{},covidErrors:[],edit:null,commentEdit:{commentId:null,value:null,pending:!1,error:null},asideTimeout:null,commentToBeDeleted:null}},computed:{status(){if(null===this.town)return null;switch(this.town.status){case"open":return"existe";case"closed_by_justice":case"closed_by_admin":case"other":case"unknown":return"yes"===this.town.closedWithSolutions?"résorbé":"disparu";default:return"inconnu"}},statusLabel(){if(null===this.town)return"inconnu";switch(this.town.status){case"closed_by_justice":return"Exécution d'une décision de justice";case"closed_by_admin":return"Exécution d'une décision administrative";case"other":return"Autre";default:return"inconnu"}},center(){return{center:[this.town.latitude,this.town.longitude],zoom:15}},hasAccessToWater(){return!!this.edit&&1===this.edit.accessToWater},hasAccessToElectricity(){if(!this.edit)return!1;const e=this.electricityTypes.find(({id:e})=>e===this.edit.electricityType);return e&&-1!==e.label.indexOf("Oui")}},mounted(){this.scroll=window.pageYOffset,window.addEventListener("scroll",this.stickTheHeader)},destroyed(){window.removeEventListener("scroll",this.stickTheHeader),document.body.removeEventListener("click",this.checkClickOutsideAside)},created(){this.fetchData()},methods:{showAside(e){this.sidePanel=e,this.asideTimeout=setTimeout(()=>{document.body.addEventListener("click",this.checkClickOutsideAside)},100)},hideAside(){clearTimeout(this.asideTimeout),this.sidePanel=null,document.body.removeEventListener("click",this.checkClickOutsideAside)},checkClickOutsideAside(e){this.$refs.commentDeletionPopin&&this.$refs.commentDeletionPopin.$el.contains(e.target)||this.$refs.aside.contains(e.target)||"sidePanelLink"===e.target.dataset.group||this.hideAside()},hasPermission:e=>bo(e),offsetTop(e){let t=e,i=0;while(null!==t)i+=t.offsetTop,t=t.offsetParent;return i},stickTheHeader(){const e=window.pageYOffset<this.scroll;this.scroll=window.pageYOffset,void 0!==this.$refs.main&&void 0!==this.$refs.header&&(!0===e?window.pageYOffset-this.$refs.main.offsetTop<=0&&this.$refs.wrapper.classList.remove("sticky"):window.pageYOffset>this.offsetTop(this.$refs.header)&&this.$refs.wrapper.classList.add("sticky"))},formatDate:(...e)=>App.formatDate(...e),fetchData(){!0!==this.loading&&(this.loading=!0,this.error=null,Ur(this.$route.params.id).then(e=>{this.loading=!1,this.town=e,this.resetEdit()}).catch(e=>{this.error=e.user_message,this.loading=!1}))},setViewMode(){this.mode="view"},setEditMode(){bo("shantytown.update")&&(this.setView("details"),this.resetEdit(),this.mode="edit")},setCloseMode(){bo("shantytown.close")&&(this.resetEdit(),this.mode="close")},closePopin(){this.resetEdit(),this.mode="view"},resetEdit(){this.editError=null,this.fieldErrors={},null!==this.town?this.edit={priority:this.town.priority,name:this.town.name,address:{address:{city:this.town.city.name,citycode:this.town.city.code,label:this.town.address},location:{coordinates:[this.town.latitude,this.town.longitude],zoom:16}},detailedAddress:this.town.addressDetails,declaredAt:null!==this.town.declaredAt?1e3*this.town.declaredAt:null,builtAt:null!==this.town.builtAt?1e3*this.town.builtAt:null,closedAt:null!==this.town.closedAt?1e3*this.town.closedAt:null,status:"open"!==this.town.status?this.town.status:null,fieldType:this.town.fieldType.id,ownerType:this.town.ownerType.id,owner:this.town.owner,owner_complaint:kp(this.town.ownerComplaint),justiceProcedure:kp(this.town.justiceProcedure),justice_rendered:kp(this.town.justiceRendered),justice_rendered_by:this.town.justiceRenderedBy,justice_rendered_at:null!==this.town.justiceRenderedAt?1e3*this.town.justiceRenderedAt:null,justice_challenged:kp(this.town.justiceChallenged),police_status:this.town.policeStatus,police_requested_at:null!==this.town.policeRequestedAt?1e3*this.town.policeRequestedAt:null,police_granted_at:null!==this.town.policeGrantedAt?1e3*this.town.policeGrantedAt:null,bailiff:this.town.bailiff,census_status:this.town.censusStatus,census_conducted_at:null!==this.town.censusConductedAt?1e3*this.town.censusConductedAt:null,census_conducted_by:this.town.censusConductedBy,populationTotal:this.town.populationTotal,populationCouples:this.town.populationCouples,populationMinors:this.town.populationMinors,populationMinors0To3:this.town.populationMinors0To3,populationMinors3To6:this.town.populationMinors3To6,populationMinors6To12:this.town.populationMinors6To12,populationMinors12To16:this.town.populationMinors12To16,populationMinors16To18:this.town.populationMinors16To18,minorsInSchool:this.town.minorsInSchool,origins:this.town.socialOrigins.map(e=>e.id),electricityType:this.town.electricityType.id,electricityComments:this.town.electricityComments||"",accessToSanitary:kp(this.town.accessToSanitary),sanitaryComments:this.town.sanitaryComments||"",accessToWater:kp(this.town.accessToWater),waterComments:this.town.waterComments||"",trashEvacuation:kp(this.town.trashEvacuation),solutions:this.town.closingSolutions?this.closingSolutions.reduce((e,t)=>{const i=Object.assign(e,{}),s=this.town.closingSolutions.find(e=>e.id===t.id);return i[t.id]={checked:void 0!==s,peopleAffected:s&&s.peopleAffected,householdsAffected:s&&s.householdsAffected},i},{}):[]}:this.edit=null},setView(e){this.setViewMode(),this.view=e},submit(){this.editError=null,this.fieldErrors={};const e=this.edit.address&&this.edit.address.location&&this.edit.address.location.coordinates,{address:t}=this.edit.address||{};function i(e){return e?(e instanceof Date||(e=new Date(e)),`${e.getFullYear()}-${(""+(e.getMonth()+1)).padStart(2,"0")}-${(""+e.getDate()).padStart(2,"0")}`):null}Gr(this.town.id,{name:this.edit.name,priority:this.edit.priority||null,coordinates:e.join(","),city:t&&t.city,citycode:t&&t.citycode,address:t&&t.label,detailed_address:this.edit.detailedAddress,declared_at:i(this.edit.declaredAt),built_at:i(this.edit.builtAt),census_status:this.edit.census_status,census_conducted_at:-1!==["scheduled","done"].indexOf(this.edit.census_status)?i(this.edit.census_conducted_at):null,census_conducted_by:-1!==["scheduled","done"].indexOf(this.edit.census_status)?this.edit.census_conducted_by:"",population_total:this.edit.populationTotal||null,population_couples:this.edit.populationCouples||null,population_minors:this.edit.populationMinors||null,population_minors_0_3:this.edit.populationMinors0To3||null,population_minors_3_6:this.edit.populationMinors3To6||null,population_minors_6_12:this.edit.populationMinors6To12||null,population_minors_12_16:this.edit.populationMinors12To16||null,population_minors_16_18:this.edit.populationMinors16To18||null,minors_in_school:this.edit.minorsInSchool||null,electricity_type:this.edit.electricityType,electricity_comments:this.edit.electricityComments,access_to_sanitary:this.edit.accessToSanitary,sanitary_comments:this.edit.sanitaryComments,access_to_water:this.edit.accessToWater,water_comments:this.edit.waterComments,trash_evacuation:this.edit.trashEvacuation,owner_complaint:this.edit.owner_complaint,justice_procedure:this.edit.justiceProcedure,justice_rendered:1===this.edit.justiceProcedure?this.edit.justice_rendered:void 0,justice_rendered_by:1===this.edit.justiceProcedure&&1===this.edit.justice_rendered?this.edit.justice_rendered_by:"",justice_rendered_at:1===this.edit.justiceProcedure&&1===this.edit.justice_rendered?i(this.edit.justice_rendered_at):null,justice_challenged:1===this.edit.justiceProcedure&&1===this.edit.justice_rendered?this.edit.justice_challenged:void 0,police_status:this.edit.police_status,police_requested_at:-1!==["requested","granted"].indexOf(this.edit.police_status)?i(this.edit.police_requested_at):null,police_granted_at:-1!==["granted"].indexOf(this.edit.police_status)?i(this.edit.police_granted_at):null,bailiff:this.edit.bailiff,social_origins:this.edit.origins,field_type:this.edit.fieldType,owner_type:this.edit.ownerType,owner:this.edit.owner}).then(()=>(Sc({group:"notifications",type:"success",title:"Site correctement sauvegardé",text:"Le site a bien été modifié"}),this.loading=!0,this.error=null,Ur(this.$route.params.id).then(e=>{this.loading=!1,this.town=e,this.setViewMode(),this.resetEdit()}).catch(e=>{this.error=e.user_message,this.loading=!1}))).catch(e=>{this.editError=e.user_message,this.fieldErrors=e.fields||{}})},submitClose(){this.editError=null,this.fieldErrors={},Wr(this.town.id,{closed_at:this.edit.closedAt,closed_with_solutions:this.edit.closedWithSolutions,status:this.edit.status,solutions:Object.keys(this.edit.solutions).filter(e=>this.edit.solutions[e].checked).map(e=>({id:e,peopleAffected:this.edit.solutions[e].peopleAffected?parseInt(this.edit.solutions[e].peopleAffected,10):null,householdsAffected:this.edit.solutions[e].householdsAffected?parseInt(this.edit.solutions[e].householdsAffected,10):null}))}).then(()=>(Sc({group:"notifications",type:"success",title:"Site correctement fermé",text:"Le site a bien été marqué comme fermé"}),this.loading=!0,this.error=null,Ur(this.$route.params.id).then(e=>{this.loading=!1,this.town=e,this.setViewMode(),this.resetEdit()}).catch(e=>{this.error=e.user_message,this.loading=!1}))).catch(e=>{this.editError=e.user_message,this.fieldErrors=e.fields||{}})},destroy(){const e=confirm("Êtes-vous sûr ? Cette suppression est irréversible");!0===e&&Yr(this.$route.params.id).then(()=>{this.$router.push("/liste-des-sites")}).catch(e=>{this.deleteError=e.user_message})},addComment(){bo("shantytown_comment.create")&&(this.commentError=null,this.commentErrors={},Jr(this.$route.params.id,{description:this.newComment}).then(e=>{this.town.comments.regular=e.comments,this.newComment="",this.newStep=""}).catch(e=>{this.commentError=e.user_message,this.commentErrors=e.fields||{}}))},addCovidComment(){this.covidErrors=[],Qr(this.$route.params.id,this.covidComment).then(e=>{this.town.comments.covid=e,this.covidComment={date:new Date,description:"",equipe_maraude:!1,equipe_sanitaire:!1,equipe_accompagnement:!1,distribution_alimentaire:!1,personnes_orientees:!1,personnes_avec_symptomes:!1,besoin_action:!1}}).catch(e=>{const t=e.fields||{};this.covidErrors=Object.keys(t).reduce((e,i)=>[...e,...t[i]],[])})},formatSolution(e){const t=[];if(null!==e.householdsAffected){const i=e.householdsAffected>1?"s":"";t.push(`${e.householdsAffected} ménage${i} concerné${i}`)}if(null!==e.peopleAffected){const i=e.peopleAffected>1?"s":"";t.push(`${e.peopleAffected} personne${i} concernée${i}`)}return t.length>0?t:["aucun détail sur le nombre de ménages/personnes concernés"]},canEditComment(e){return bo("shantytown_comment.create")||e.createdBy.id===this.userId},canDeleteComment(e){return bo("shantytown_comment.delete")||e.createdBy.id===this.userId},editComment(e){this.commentEdit.commentId=e.id,this.commentEdit.value=e.description,this.commentEdit.pending=!1,this.commentEdit.error=null},deleteComment(e){this.commentToBeDeleted={id:e.id,date:e.createdAt,shantytown:{id:this.town.id,usename:this.town.usename,city:this.town.city.name},author:{name:`${e.createdBy.firstName} ${e.createdBy.lastName.toUpperCase()}`},content:e.description}},sendEditComment(e){!1===this.commentEdit.pending&&(this.commentEdit.pending=!0,this.commentEdit.error=null,Zr(this.$route.params.id,e.id,{description:this.commentEdit.value}).then(e=>{this.town.comments.regular=e.comments,this.commentEdit.commentId=null,this.commentEdit.value=null,this.commentEdit.pending=!1,this.commentEdit.error=null,Sc({group:"notifications",type:"success",title:"Opération réussie",text:"Le commentaire a bien été modifié"})}).catch(e=>{this.commentEdit.pending=!1,this.commentEdit.error=e.user_message}))},cancelEditComment(){setTimeout(()=>{!1===this.commentEdit.pending&&(this.commentEdit.commentId=null,this.commentEdit.value=null,this.commentEdit.pending=!1,this.commentEdit.error=null)},100)},closeCommentDeletion(){setTimeout(()=>{this.commentToBeDeleted=null},100)},onCommentDeleted(){this.town.comments.regular=this.town.comments.regular.filter(({id:e})=>e!==this.commentToBeDeleted.id),this.commentToBeDeleted=null,Sc({group:"notifications",type:"success",title:"Commentaire supprimé",text:"L'auteur du commentaire en a été notifié par email"})}}},Pp=xp,$p=Pp,Sp=(i("bdf1"),Object(d["a"])($p,hp,vp,!1,null,"4f6083a5",null)),Ep=Sp.exports,Tp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[i("NavBar"),e.preloading&&!e.preloadError?i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Chargement des données en cours...")])]):e.preloading&&e.preloadError?i("div",{staticClass:"notification error full-width"},[i("span",[e._v(e._s(e.preloadError)+". "),i("a",{attrs:{href:"#"},on:{click:e.preload}},[e._v("Réessayer ?")])])]):i("div",[i("Form",e._b({ref:"form",on:{complete:e.onComplete},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}},"Form",e.formDefinition,!1)),i("p",[e._v("Plus d'informations sur les droits d'accès et les utilisateurs de la plateforme"),i("br"),i("router-link",{staticClass:"link",attrs:{to:"/typologie-des-acces"}},[i("font-awesome-icon",{attrs:{icon:"file-pdf"}}),e._v(" Guide des accès et de l'administrateur")],1),i("br"),i("router-link",{staticClass:"link",attrs:{to:"/charte-d-engagement"}},[i("font-awesome-icon",{attrs:{icon:"file-pdf"}}),e._v(" Charte d'engagement de l'utilisateur")],1)],1)],1)],1)])},Ap=[],Ip={components:{NavBar:Qo,Form:Oc},data(){const e={first_name:"",last_name:"",password:""},t={title:"Modifier vos données personnelles",description:"Vous pouvez compléter votre profil d'utilisateur et modifier votre mot de passe sur cette page.",steps:[{title:"",sections:[{title:"",inputs:{first_name:{label:"Votre prénom",mandatory:!0,type:"text"},last_name:{label:"Votre nom de famille",mandatory:!0,type:"text"},password:{label:"Mot de passe",description:"Laissez ce champ vide si vous souhaitez conserver votre mot de passe actuel.<br/><br/>Votre mot de passe doit comporter au minimum 12 caractères, une majuscule, une minuscule, et un caractère non alphabétique (exemples : '.' ';' ',' '_' '!' '?', ...)<br/>Nous vous recommandons de choisir <strong>une phrase intelligible en guise de mot de passe</strong> : plus simple à retenir qu'une suite de caractères aléatoires, et plus sécurisée.",mandatory:!1,type:"password"}}}],wording:{submit:"Modifier",error:"Les modifications n'ont pas été appliquées",success:"Les modifications ont bien été prises en compte"},submit:Ao}]};return{preloading:!0,preloadError:null,loading:!1,formData:e,formDefinition:t}},created(){this.preload()},methods:{preload(){this.preloadError=null,this.preloading=!0,this.fetchData().then(()=>{this.preloading=!1}).catch(e=>{this.preloadError=e.user_message})},fetchData(){return To().then(e=>{this.formData.first_name=e.first_name,this.formData.last_name=e.last_name,this.formData.password=""})},onComplete(){this.preload()}}},Op=Ip,qp=Op,Mp=(i("9985"),Object(d["a"])(qp,Tp,Ap,!1,null,"dd1c1884",null)),Dp=Mp.exports,jp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[i("NavBar"),i("section",{staticClass:"section section-white"},[i("div",{staticClass:"container"},[i("h1",[e._v("Liste des utilisateurs")]),"loading"===e.state?i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Chargement des données en cours...")])]):e._e(),"error"===e.state?i("div",{staticClass:"notification error full-width"},[i("span",[e._v(e._s(e.error)+". "),i("a",{attrs:{href:"#"},on:{click:e.retryLoading}},[e._v("Réessayer ?")])])]):e._e(),"loaded"===e.state?i("div",[i("header",{staticClass:"userList-header"},[i("router-link",{staticClass:"link",attrs:{to:"/typologie-des-acces"}},[i("font-awesome-icon",{attrs:{icon:"file-pdf"}}),e._v(" Guide des accès et de l'administrateur")],1),i("router-link",{staticClass:"link",attrs:{to:"/charte-d-engagement"}},[i("font-awesome-icon",{attrs:{icon:"file-pdf"}}),e._v(" Charte d'engagement de l'utilisateur")],1),i("router-link",{staticClass:"button",attrs:{to:"/nouvel-utilisateur"}},[e._v("Ajouter un utilisateur")])],1),i("Table",e._b({on:{"on-row-click":e.routeToUserValidation},scopedSlots:e._u([{key:"table-row",fn:function(t){return["status"===t.column.id?i("span",[i("font-awesome-icon",{staticClass:"user-statusIcon",class:"user-statusIcon--"+t.formattedRow[t.column.field].icon,attrs:{icon:t.formattedRow[t.column.field].icon}}),e._v(" "),i("span",{domProps:{innerHTML:e._s(t.formattedRow[t.column.field].label)}})],1):"role"===t.column.id?i("span",[i("span",{staticClass:"role"},[e._v(e._s(t.formattedRow[t.column.field]))])]):"validate"===t.column.id?i("span",[i("span",[i("font-awesome-icon",{staticClass:"user-validateIcon",attrs:{icon:"arrow-right"},on:{click:e.routeToUserValidation}})],1)]):i("span",{class:"userList-row--"+t.column.id},[e._v(e._s(t.formattedRow[t.column.field]))])]}}],null,!1,1614286866)},"Table",e.tableProperties,!1))],1):e._e()])])],1)])},Np=[],Fp=i("f617"),Lp=(i("dac4"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"alert"},[i("div",{ref:"wrapper",staticClass:"wrapper"},[i("div",{staticClass:"alert-close"},[i("div",{staticClass:"alert-close-wrapper"},[i("img",{attrs:{src:"/img/cross.svg",alt:"",width:"20"},on:{click:e.close}})])]),e._t("default")],2)])}),zp=[],Bp={mounted(){document.addEventListener("click",this.checkOutsideClick)},destroyed(){document.removeEventListener("click",this.checkOutsideClick)},methods:{checkOutsideClick(e){0!==this.$refs.wrapper.offsetHeight&&(this.$refs.wrapper.contains(e.target)||this.close())},close(){this.$emit("close")}}},Rp=Bp,Vp=Rp,Up=(i("aaf3"),Object(d["a"])(Vp,Lp,zp,!1,null,"70f3cb96",null)),Hp=Up.exports,Gp={components:{NavBar:Qo,Table:Fp["a"],Modal:Hp},data(){const{token_expires_in:e}=fo();return{tokenExpiresIn:e,users:[],error:null,state:null}},computed:{tableProperties(){return{columns:[{id:"lastName",label:"NOM",field:e=>e.last_name.toUpperCase()},{id:"firstName",label:"PRÉNOM",field:"first_name"},{id:"organization",label:"STRUCTURE",field:e=>null!==e.organization.type.abbreviation?`${e.organization.type.abbreviation} (${e.organization.name})`:null!==e.organization.abbreviation?`${e.organization.abbreviation} (${e.organization.name})`:e.organization.name},{id:"location",label:"TERRITOIRE",field:e=>{if("nation"===e.organization.location.type)return"National";const t=e.organization.location[e.organization.location.type];return t?"departement"===e.organization.location.type?`${t.name} (${t.code})`:t.name:""}},{id:"role",label:"TYPE D'ACCÈS",field:"role",width:"230px",thClass:"userList-column--role",tdClass:"userList-column--role"},{id:"status",label:"STATUT DU COMPTE",field:e=>"active"===e.status?"local_admin"===e.role_id?{icon:"user-shield",label:"<strong>Administrateur local</strong>"}:"national_admin"===e.role_id?{icon:"user-shield",label:"<strong>Administrateur national</strong>"}:{icon:"user-check",label:"<strong>Compte activé</strong> le "+App.formatDate(e.activated_on,"d M y")}:null!==e.last_activation_link_sent_on?Date.now()-1e3*e.activation_link_expires_on>=0?{icon:"unlink",label:"<strong>Lien expiré</strong> le "+App.formatDate(e.activation_link_expires_on,"d M y")}:{icon:"paper-plane",label:"<strong>Accès envoyé</strong> le "+App.formatDate(e.last_activation_link_sent_on,"d M y")}:{icon:"flag",label:"<strong>Demandé</strong> le "+App.formatDate(e.created_at,"d M y")}},{id:"validate",label:"",field:()=>!0}],rows:this.users,"row-style-class":e=>"active"!==e.status&&null===e.last_activation_link_sent_on?"userList-row userList-row--highlight":"userList-row","sort-options":{enabled:!0},"search-options":{enabled:!0,placeholder:"Rechercher par utilisateur, structure, territoire, ou type d'accès"}}}},created(){this.load()},methods:{load(){-1!==[null,"error"].indexOf(this.state)&&(this.state="loading",this.error=null,Io().then(e=>{this.users=e.filter(({status:e})=>"inactive"!==e),this.state="loaded"}).catch(({user_message:e})=>{this.error=e,this.state="error"}))},retryLoading(){this.load()},routeToUserValidation(e){const t=this.$router.resolve("/nouvel-utilisateur/"+e.row.id);Xn(t.href)}}},Wp=Gp,Yp=Wp,Jp=(i("5e31"),Object(d["a"])(Yp,jp,Np,!1,null,null,null)),Qp=Jp.exports,Zp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[e.isPopup?e._e():i("NavBar"),"loading"===e.state?i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Chargement des données en cours...")])]):e._e(),"error"===e.state?i("div",{staticClass:"notification error full-width"},[i("span",[e._v(e._s(e.loadingError)+". "),i("span",{on:{click:e.retryLoading}},[e._v("Réessayer ?")])])]):e._e(),"loaded"===e.state?i("div",[i("Form",e._b({ref:"form",on:{complete:e.onComplete},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}},"Form",e.formDefinition,!1))],1):e._e()],1)])},Kp=[],Xp=(e,t)=>({data(){const i={},s={title:e.title,descriptionTitle:"",description:e.description,steps:[{wording:e.stepWording,sections:[{title:"Informations personnelles",inputs:{last_name:{label:"NOM",mandatory:!0,type:"text"},first_name:{label:"Prénom",mandatory:!0,type:"text"},email:{label:"Courriel",mandatory:!0,type:"text"}}},{title:e.organizationTitle,inputs:{organization_category:{label:e.organization,mandatory:!0,type:"radio",options:[]},organization_type:{label:"Précisez le type de structure",mandatory:!0,type:"select",options:[],condition({organization_category:e}){return"public_establishment"===e}},organization_public:{label:"Territoire de rattachement",mandatory:!0,type:"select",options:[],condition:({organization_category:e,organization_type:t})=>"public_establishment"===e&&void 0!==t},territorial_collectivity:{label:"Nom de la structure",mandatory:!0,type:"collectivity",condition({organization_category:e}){return"territorial_collectivity"===e}},association:{label:"Nom de la structure",mandatory:!0,type:"select",options:[],condition({organization_category:e}){return"association"===e}},new_association_name:{label:"Précisez le nom complet",mandatory:!0,type:"text",condition({organization_category:e,association:t}){return"association"===e&&"Autre"===t}},new_association_abbreviation:{label:"Précisez l'acronyme, si besoin",mandatory:!1,type:"text",condition({organization_category:e,association:t}){return"association"===e&&"Autre"===t}},departement:{label:"Territoire de rattachement",mandatory:!0,type:"select",options:[],condition({organization_category:e}){return"association"===e}},organization_administration:{label:"Nom de la structure",mandatory:!0,type:"select",options:[],condition({organization_category:e}){return"administration"===e}},position:{label:e.position,mandatory:!0,type:"text",condition({organization_category:e}){return void 0!==e}}}}],submit:e=>t({...e,legal:e.legal&&1===e.legal.length&&!0===e.legal[0]})}]};return{state:null,loadingError:null,formData:i,formDefinition:s}},watch:{"formData.organization_type":function(){this.$refs.form.getInputById("organization_public").options=[],Gc(this.formData.organization_type).then(({organizations:e})=>{this.$refs.form.getInputById("organization_public").options=e.map(e=>{const t=e.location_type;let i=e[t+"_name"];return"nation"===t?i="France":"departement"===t&&(i=`${e[t+"_code"]} - ${e[t+"_name"]}`),{value:e.id,label:i}}),this.formData.organization_public=void 0})}},methods:{load(){-1!==[null,"error"].indexOf(this.state)&&(this.state="loading",this.loadingError=null,Promise.all([Vc(),Uc("public_establishment"),Hc("administration"),Hc("association"),_r()]).then(([{categories:t},{types:i},{organizations:s},{organizations:a},{departements:n}])=>{this.formDefinition.steps[0].sections[1].inputs.organization_category.options=t.map(({uid:e,name_singular:t})=>({value:e,label:t})),this.formDefinition.steps[0].sections[1].inputs.organization_type.options=i.filter(({numberOfOrganizations:e})=>e>0).filter(({name_singular:e})=>"Gendarmerie nationale"!==e).map(({id:e,name_singular:t,abbreviation:i})=>({value:e,label:i||t})),this.formDefinition.steps[0].sections[1].inputs.organization_administration.options=s.map(({id:e,name:t})=>({value:e,label:t}));const o=[];this.formDefinition.steps[0].sections[1].inputs.association.options=[{label:"Autres cas",options:[{value:"Autre",label:e.associationIsMissing}]},{label:"Associations connues",options:a.filter(e=>-1===o.indexOf(e.name)&&(o.push(e.name),!0)).map(({name:e,abbreviation:t})=>({value:e,label:null!==t?`${t} (${e})`:e}))}],this.formDefinition.steps[0].sections[1].inputs.departement.options=n.map(({code:e,name:t})=>({value:e,label:`${e} - ${t}`})),this.state="loaded"}).catch(({user_message:e})=>{this.loadingError=e,this.state="error"}))}}});const em=Xp({title:"Créer un utilisateur",organizationTitle:"Structure",organization:"Quelle est la structure de l'utilisateur ?",position:"Fonction de l'utilisateur",associationIsMissing:"L'association de l'utilisateur n'est pas dans cette liste",stepWording:{submit:"Continuer",error:"L'utilisateur n'a pas pu être créé",success:"L'utilisateur a bien été créé"}},Eo);var tm={components:{NavBar:Qo,Form:Oc},data(){const e=em.data();return e.isPopup=void 0!==this.$route.query.association_name,e.formDefinition.steps[0].sections.push({inputs:{legal:{label:"",mandatory:!1,type:"checkbox",options:[{value:!0,label:"Je certifie que ces données personnelles ont été saisies avec l'accord de leur propriétaire"}]}}}),void 0!==this.$route.query.association_name&&(e.formDefinition.steps[0].sections[1].inputs.organization_category.disabled=!0,e.formDefinition.steps[0].sections[1].inputs.association.disabled=!0,e.formDefinition.steps[0].sections[1].inputs.departement.disabled=!0),e},watch:Object.assign(em.watch,{state(){"loaded"===this.state&&void 0!==this.$route.query.association_name&&(this.formData.organization_category="association",this.formData.association=this.$route.query.association_name,this.formData.departement=this.$route.query.association_departement)}}),mounted(){this.load()},methods:Object.assign(em.methods,{retryLoading(){this.load()},onComplete(e){if(this.isPopup)return window.opener.postMessage(e,"*"),void window.close();this.$router.push("/nouvel-utilisateur/"+e.id)}})},im=tm,sm=im,am=(i("3415"),Object(d["a"])(sm,Zp,Kp,!1,null,"17835908",null)),nm=am.exports,om=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[i("NavBar"),"loading"===e.state?i("section",{staticClass:"section section-white",attrs:{id:"form"}},[e._m(0)]):e._e(),"error"===e.state?i("div",{staticClass:"notification error full-width"},[i("p",[i("font-awesome-icon",{attrs:{icon:"times"}}),e._v(" "),i("strong",[e._v("Une erreur est survenue")])],1),i("p",[i("span",{domProps:{innerHTML:e._s(e.error.replace(/\n/g,"<br/>"))}})]),i("p",[i("a",{attrs:{href:"#"},on:{click:e.retryLoading}},[e._v("Réessayer ?")])])]):e._e(),"loaded"===e.state?i("div",[i("Form",e._b({ref:"form",on:{complete:e.onComplete},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}},"Form",e.formDefinition,!1))],1):e._e()],1)])},rm=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Chargement des données en cours...")])])])}],lm={components:{NavBar:Qo,Form:Oc},data(){const e={email:""},t={title:"Activation de votre compte utilisateur",descriptionTitle:"",description:"Vous vous apprêtez à activer votre compte utilisateur, veuillez choisir votre mot de passe de connexion.",steps:[{title:"",sections:[{title:"",inputs:{email:{label:"Votre email",mandatory:!1,type:"text",disabled:!0},password:{label:"Définissez votre mot de passe",description:"Votre mot de passe doit comporter au minimum 12 caractères, une majuscule, une minuscule, et un caractère non alphabétique (exemples : '.' ';' ',' '_' '!' '?', ...)<br/>Nous vous recommandons de choisir <strong>une phrase intelligible en guise de mot de passe</strong> : plus simple à retenir qu'une suite de caractères aléatoires, et plus sécurisée.",mandatory:!0,type:"password"}}}],wording:{submit:"Activer mon compte",error:"Votre compte n'a pas pu être activé",success:"Vous pouvez désormais vous connecter à la plateforme"},submitPrefix:'En cliquant sur "Activer mon compte", j\'accepte les <a href="/#/conditions-d-utilisation">conditions générales d\'utilisation</a> et de partager mes données (nom, prénom, courriel, structure et lorsque renseigné, numéro de téléphone) aux utilisateurs de la plateforme via l’annuaire',submit:e=>No(this.user.id,Object.assign(e,{token:this.$route.params.token}))}]};return{state:null,error:null,user:null,formData:e,formDefinition:t}},created(){this.load()},methods:{load(){-1!==[null,"error"].indexOf(this.state)&&(this.state="loading",this.error=null,Do(this.$route.params.token).then(e=>{this.user=e,this.formData.email=e.email,this.state="loaded"}).catch(({user_message:e})=>{this.error=e,this.state="error"}))},retryLoading(){this.load()},onComplete(){this.$router.push("/")}}},cm=lm,dm=cm,um=(i("771a"),Object(d["a"])(dm,om,rm,!1,null,"043c7c3f",null)),pm=um.exports,mm=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[i("NavBar"),i("section",{staticClass:"section section-white"},[i("div",{staticClass:"container container--userValidation"},["loading"===e.state?i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Chargement des données en cours...")])]):e._e(),"error"===e.state?i("div",{staticClass:"notification error full-width"},[i("span",[e._v(e._s(e.error)+". "),i("a",{attrs:{href:"#"},on:{click:e.retryLoading}},[e._v("Réessayer ?")])])]):e._e(),"loaded"===e.state?i("section",{staticClass:"userValidation"},[e.user&&"active"!==e.user.status?i("h1",[e._v("Demande d'accès")]):e.user?i("h1",[e._v("Fiche utilisateur")]):e._e(),i("div",{staticClass:"userValidation-main"},[i("aside",{staticClass:"userInfo"},[i("section",{staticClass:"userInfo-section"},[i("hgroup",[i("h1",[e._v(e._s(e.user.last_name.toUpperCase())+" "+e._s(e.user.first_name))]),i("h3",[e._v("Structure")]),i("h2",[e._v(e._s(e.user.organization.name))])]),i("p",[e._v(e._s(e.user.position)),i("br"),i("span",{staticClass:"email"},[e._v(e._s(e.user.email))])])]),i("section",{staticClass:"userInfo-section"},[e.isExpired?i("p",{staticClass:"userHistory-item"},[i("span",[i("font-awesome-icon",{staticClass:"user-statusIcon",attrs:{icon:"unlink"}}),e._v(" "),i("strong",[e._v("Lien expiré")]),e._v(" le "+e._s(e.formatDate(e.user.activation_link_expires_on,"d M y")))],1),i("br"),e._v("Un lien d'activation est valable "+e._s(e.tokenExpiresIn)+" jours"),i("br")]):e._e(),e.user.last_activation_link_sent_on?i("p",{staticClass:"userHistory-item"},[i("span",[i("font-awesome-icon",{staticClass:"user-statusIcon",attrs:{icon:"paper-plane"}}),e._v(" "),i("strong",[e._v("Accès envoyé")]),e._v(" le "+e._s(e.formatDate(e.user.last_activation_link_sent_on,"d M y")))],1),i("br")]):e._e(),i("p",{staticClass:"userHistory-item"},[i("span",[i("font-awesome-icon",{staticClass:"user-statusIcon user-statusIcon--flag",attrs:{icon:"flag"}}),e._v(" "),i("strong",[e._v("Demandé")]),e._v(" le "+e._s(e.formatDate(e.user.created_at,"d M y")))],1)])]),i("section",{staticClass:"userInfo-section",domProps:{innerHTML:e._s((e.user.access_request_message||"").replace("\n","<br/>"))}})]),i("main",{staticClass:"userPermissions"},[i("hgroup",{staticClass:"userPermissions-header"},[i("h1",[e._v("Accès")]),i("h2",{staticClass:"role"},[e._v(e._s(e.user.role))])]),i("p",[e._v(e._s(e.permission.description)),i("br")]),i("p",[e._v("Ainsi, l'utilisateur peut :")]),e.hasPermissionsFor("national")?i("UserPermissions",{attrs:{title:"À l'échelle nationale",items:e.permission.national_permissions}}):e._e(),e.hasPermissionsFor("local")?i("UserPermissions",{attrs:{title:"Sur le territoire d'intervention",items:e.permission.local_permissions}}):e._e(),e.options.length>0?i("div",[i("h1",{staticClass:"userPermissions-sectionTitle"},[e._v("Options")]),e.user.organization.active?e._e():i("p",[e._v("Pour cette structure, je souhaite :")]),i("ul",{staticClass:"userOptionsList"},e._l(e.options,(function(t,s){return i("li",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedOptions[t.id],expression:"checkedOptions[option.id]"}],attrs:{type:"checkbox",id:"option-"+s,disabled:e.user.organization.active},domProps:{value:t.id,checked:Array.isArray(e.checkedOptions[t.id])?e._i(e.checkedOptions[t.id],t.id)>-1:e.checkedOptions[t.id]},on:{change:function(i){var s=e.checkedOptions[t.id],a=i.target,n=!!a.checked;if(Array.isArray(s)){var o=t.id,r=e._i(s,o);a.checked?r<0&&e.$set(e.checkedOptions,t.id,s.concat([o])):r>-1&&e.$set(e.checkedOptions,t.id,s.slice(0,r).concat(s.slice(r+1)))}else e.$set(e.checkedOptions,t.id,n)}}}),i("label",{staticClass:"label-inline",attrs:{for:"option-"+s}},[e._v(e._s(t.label))])])})),0)]):e._e()],1)]),e.validation.error?i("div",{staticClass:"userValidation-error notification error"},[e._v(e._s(e.validation.error))]):e._e(),i("footer",{staticClass:"userValidationFooter"},["active"===e.user.status?i("p",{staticClass:"userValidationFooter-remove"},["loading"!==e.validation.state?i("span",{on:{click:e.remove}},[e._v("Supprimer l'accès")]):e._e()]):e._e(),"new"!==e.user.status||e.user.last_activation_link_sent_on?e._e():i("p",{staticClass:"userValidationFooter-deny"},["loading"!==e.validation.state?i("span",{on:{click:e.deny}},[e._v("Refuser l'accès")]):e._e()]),"new"===e.user.status?i("p",{staticClass:"userValidationFooter-allow"},[i("button",{staticClass:"button",attrs:{disabled:"loading"===e.validation.state,readonly:"loading"===e.validation.state},on:{click:e.validate}},["loading"===e.validation.state?i("img",{attrs:{src:"/img/spinner_light.svg",width:"20"}}):i("span",[e._v("Envoyer un accès")])]),i("br"),e._m(0)]):e._e()])]):e._e()])])],1)])},hm=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",[e._v("L'utilisateur va recevoir"),i("br"),e._v("un mail avec un lien d'activation")])}],vm=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("h1",{staticClass:"userPermissions-sectionTitle"},[e._v(e._s(e.title))]),i("ul",{staticClass:"userPermissionsList"},e._l(e.parsedItems,(function(t){var s;return i("li",{class:(s={"userPermissionsList-item":!0},s["userPermissionsList-item--"+t.type]=!0,s["userPermissionsList-item--subsection"]=!0===t.subsection,s)},[i("span",{domProps:{innerHTML:e._s(t.label.replace(/%(.+?)%/gi,"<em>$1</em>"))}}),t.comments?i("span",{staticClass:"userPermissionsList-comments"},[i("br"),e._v(e._s(t.comments))]):e._e()])})),0)])},fm=[];const _m={view:"eye",edit:"pencil-alt",deny:"times"};var gm={props:{title:{type:String,required:!0},items:{type:Array,required:!0}},computed:{parsedItems(){return this.items.reduce((e,t)=>(t.length>0&&Object.assign(t[0],{subsection:!0}),[...e,...t.map(this.resolveIcon)]),[])}},methods:{resolveIcon(e){return{...e,icon:_m[e.type]}}}},bm=gm,ym=bm,Cm=(i("18f7"),Object(d["a"])(ym,vm,fm,!1,null,null,null)),wm=Cm.exports;let km;var xm={components:{NavBar:Qo,Table:Fp["a"],UserPermissions:wm},data(){let e;return({permissions_description:km,activation_token_expires_in:e}=fo()),{user:null,error:null,state:null,loading:!1,validation:{state:null,error:null},checkedOptions:{},tokenExpiresIn:e/3600/24}},computed:{permission(){return this.user?km[this.user.role_id]:null},options(){return null!==this.user&&this.permission?this.permission.options:[]},isExpired(){const e=Date.now();return null!==this.user&&"active"!==this.user.status&&null!==this.user.activation_link_expires_on&&e-1e3*this.user.activation_link_expires_on>0}},created(){this.load()},methods:{formatDate(...e){return App.formatDate.call(App,...e)},load(){-1!==[null,"error"].indexOf(this.state)&&(this.state="loading",this.error=null,Oo(this.$route.params.id).then(e=>{this.user=e,this.checkedOptions=this.options.reduce((t,i)=>Object.assign(t,{[i.id]:-1!==e.permission_options.indexOf(i.id)}),{}),this.state="loaded"}).catch(({user_message:e})=>{this.error=e,this.state="error"}))},retryLoading(){this.load()},hasPermissionsFor(e){return this.permission&&this.permission[e+"_permissions"]&&this.permission[e+"_permissions"].length>0},validate(){"loading"!==this.validation.state&&(this.validation.state="loading",this.validation.error=null,qo(this.$route.params.id,{options:this.checkedOptions}).then(()=>{this.validation.state=null,Sc({group:"notifications",type:"success",title:"Accès envoyé",text:"Un accès a été envoyé à l'utilisateur"}),this.$router.push("/liste-des-utilisateurs")}).catch(({user_message:e})=>{this.validation.state=null,this.validation.error=e}))},deny(){"loading"!==this.validation.state&&(this.validation.state="loading",this.validation.error=null,Mo(this.$route.params.id).then(()=>{this.validation.state=null,Sc({group:"notifications",type:"success",title:"Accès refusé",text:"L'utilisateur a été supprimé de la base"}),this.$router.push("/liste-des-utilisateurs")}).catch(({user_message:e})=>{this.validation.state=null,this.validation.error=e}))},remove(){"loading"!==this.validation.state&&window.confirm("Êtes-vous sûr de vouloir supprimer cet accès ?")&&(this.validation.state="loading",this.validation.error=null,zo(this.$route.params.id).then(()=>{this.validation.state=null,Sc({group:"notifications",type:"success",title:"Accès supprimé",text:"L'utilisateur a été supprimé de la base"}),this.$router.push("/liste-des-utilisateurs")}).catch(({user_message:e})=>{this.validation.state=null,this.validation.error=e}))}}},Pm=xm,$m=Pm,Sm=(i("2207"),Object(d["a"])($m,mm,hm,!1,null,null,null)),Em=Sm.exports,Tm=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[i("NavBar"),i("section",{staticClass:"section section-white"},[i("div",{staticClass:"container"},[i("Form",e._b({on:{complete:e.onComplete},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}},"Form",e.formDefinition,!1))],1)])],1)])},Am=[],Im={components:{NavBar:Qo,Form:Oc},data(){const{user:{id:e,email:t}}=fo();return{formData:{email:t},formDefinition:{title:"Résorption Bidonvilles a été mise à jour",description:"La plateforme a été mise à jour en septembre 2019. A présent, il est possible pour les correspondants d'ouvrir des accès à un plus grand nombre d'acteurs.",steps:[{sections:[{title:"Pour compléter le futur annuaire, merci de renseigner les champs suivants",inputs:{email:{type:"text",mandatory:!1,label:"Votre email",disabled:!0},position:{type:"text",mandatory:!0,label:"Votre fonction"},phone:{type:"text",mandatory:!1,label:"Votre numéro de téléphone",specificProps:{maxlength:10}}}},{title:"Pour bénéficier de la mise à jour, merci de créer un nouveau mot de passe",inputs:{password:{type:"password",mandatory:!0,label:"Définissez votre nouveau mot de passe",description:"Votre mot de passe doit comporter au minimum 12 caractères, une majuscule, une minuscule, et un caractère non alphabétique (exemples : '.' ';' ',' '_' '!' '?', ...)<br/>Nous vous recommandons de choisir <strong>une phrase intelligible en guise de mot de passe</strong> : plus simple à retenir qu'une suite de caractères aléatoires, et plus sécurisée."}}}],wording:{submit:"Mettre à jour",error:"Votre compte n'a pas pu être mis à jour",success:"Votre compte a ben été mis à jour"},submit:t=>Lo(e,t)}]}}},methods:{onComplete(){ho().then(()=>{this.$router.push({path:"/"})}).catch(()=>{window.location.reload()})}}},Om=Im,qm=Om,Mm=(i("e517"),Object(d["a"])(qm,Tm,Am,!1,null,null,null)),Dm=Mm.exports,jm=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[i("NavBar"),i("section",{staticClass:"section section-white requestNewPassword"},[i("div",{staticClass:"container"},[i("Form",e._b({on:{complete:e.onComplete},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}},"Form",e.formDefinition,!1))],1)])],1)])},Nm=[],Fm={components:{NavBar:Qo,Form:Oc},data(){return{formData:{},formDefinition:{title:"Renouvellement de mot de passe",description:"Si vous avez perdu votre mot de passe, vous pouvez demander à en définir un nouveau.",steps:[{sections:[{inputs:{email:{type:"text",label:"Votre courriel",description:"Saisissez ici le courriel associé au compte Résorption Bidonvilles pour lequel vous souhaitez renouveler le mot de passe",mandatory:!0}}}],wording:{submit:"Renouveller mon mot de passe",success:"Un mail vous a été adressé avec les instructions",error:"La demande de renouvellement a échoué"},submit:({email:e})=>Bo(e)}]}}},methods:{onComplete(){this.$router.push({path:"/"})}}},Lm=Fm,zm=Lm,Bm=(i("0ff0"),Object(d["a"])(zm,jm,Nm,!1,null,null,null)),Rm=Bm.exports,Vm=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[i("NavBar"),i("section",{staticClass:"section section-white",attrs:{id:"form"}},[i("div",{staticClass:"container"},["loading"===e.state?i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Chargement des données en cours...")])]):e._e(),"error"===e.state?i("div",{staticClass:"notification error full-width"},[i("p",[i("font-awesome-icon",{attrs:{icon:"times"}}),e._v(" "),i("strong",[e._v("Une erreur est survenue")])],1),i("p",[i("span",{domProps:{innerHTML:e._s(e.error.replace(/\n/g,"<br/>"))}})]),i("p",[i("a",{attrs:{href:"#"},on:{click:e.retryLoading}},[e._v("Réessayer ?")])])]):e._e(),"loaded"===e.state?i("div",[i("Form",e._b({ref:"form",on:{complete:e.onComplete},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}},"Form",e.formDefinition,!1))],1):e._e()])])],1)])},Um=[],Hm={components:{NavBar:Qo,Form:Oc},data(){const e={email:""},t={title:"Définition d'un nouveau mot de passe",description:"Le formulaire suivant vous permet de choisir un nouveau mot de passe",steps:[{title:"",sections:[{title:"",inputs:{email:{label:"Votre email",mandatory:!1,type:"text",disabled:!0},password:{label:"Définissez votre mot de passe",description:"Votre mot de passe doit comporter au minimum 12 caractères, une majuscule, une minuscule, et un caractère non alphabétique (exemples : '.' ';' ',' '_' '!' '?', ...)<br/>Nous vous recommandons de choisir <strong>une phrase intelligible en guise de mot de passe</strong> : plus simple à retenir qu'une suite de caractères aléatoires, et plus sécurisée.",mandatory:!0,type:"password"}}}],wording:{submit:"Changer de mot de passe",error:"Votre mot de passe n'a pas pu être changé",success:"Votre nouveau mot de passe a été changé"},submit:e=>Fo(this.user.id,Object.assign(e,{token:this.$route.params.token}))}]};return{state:null,error:null,user:null,formData:e,formDefinition:t}},created(){this.load()},methods:{load(){-1!==[null,"error"].indexOf(this.state)&&(this.state="loading",this.error=null,jo(this.$route.params.token).then(e=>{this.user=e,this.formData.email=e.email,this.state="loaded"}).catch(({user_message:e})=>{this.error=e,this.state="error"}))},retryLoading(){this.load()},onComplete(){this.$router.push("/")}}},Gm=Hm,Wm=Gm,Ym=(i("f12c"),Object(d["a"])(Wm,Vm,Um,!1,null,null,null)),Jm=Ym.exports,Qm=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[i("NavBar"),i("section",["loaded"!==e.state?i("div",{staticClass:"container"},["loading"===e.state?i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Chargement des données en cours...")])]):e._e(),"error"===e.state?i("div",{staticClass:"notification error full-width"},[i("span",[e._v(e._s(e.error)+". "),i("span",{on:{click:e.retryLoading}},[e._v("Réessayer ?")])])]):e._e()]):e._e(),"loaded"===e.state?i("div",[i("header",{staticClass:"pageHeader"},[i("div",{staticClass:"pageHeader-wrapper"},[i("section",{staticClass:"pageHeader-main"},[i("section",{staticClass:"pageHeader-info"},[i("h1",{staticClass:"pageHeader-title"},[e._v("Dispositifs - "+e._s(e.locationTitle))])]),i("aside",{staticClass:"pageHeader-buttons"},[e.hasPermission("plan.create")?i("router-link",{staticClass:"button",attrs:{to:"/nouveau-dispositif"}},[i("font-awesome-icon",{attrs:{icon:"pencil-alt"}}),i("span",[e._v("Déclarer un dispositif")])],1):e._e()],1)])])]),i("div",{staticClass:"container plansList-body"},[i("CollectivityInput",{staticClass:"planList-search",model:{value:e.location,callback:function(t){e.location=t},expression:"location"}}),i("Table",{attrs:{columns:e.columns,content:e.pageContent,emptyLabel:"Aucun dispositif sur ce territoire"},on:{click:e.routeToPlan},scopedSlots:e._u([{key:"name",fn:function(t){return[i("strong",[e._v(e._s(t.row.name))]),i("br"),t.row.expected_to_end_at?i("span",[e._v("du "+e._s(e.formatDate(t.row.started_at/1e3))),i("br"),e._v("au "+e._s(e.formatDate(t.row.expected_to_end_at/1e3))),i("br"),e._v(e._s(e.dateDiff(t.row.started_at,t.row.expected_to_end_at)))]):i("span",[e._v("depuis le "+e._s(e.formatDate(t.row.started_at/1e3)))]),i("br"),e._l(t.row.topics,(function(t){return i("p",[i("span",{staticClass:"rbTag"},[e._v(e._s(t.name))])])}))]}},{key:"departement",fn:function(t){return[e._v(e._s(t.row.departement.code))]}},{key:"location",fn:function(t){return["shantytowns"===t.row.location_type.id?i("span",e._l(t.row.shantytowns,(function(t){return i("span",[e._v("- "+e._s(t.usename)),i("br")])})),0):e._e(),"location"===t.row.location_type.id?i("span",[e._v(e._s(t.row.location.label))]):e._e(),"housing"===t.row.location_type.id?i("span",[e._v("Dans le logement")]):e._e(),"other"===t.row.location_type.id?i("span",[e._v(e._s(t.row.location_details))]):e._e()]}},{key:"government",fn:function(t){return[i("router-link",{staticClass:"user",attrs:{to:"/annuaire/"+t.row.government_contacts[0].organization.id}},[e._v(e._s(t.row.government_contacts[0].name)),i("br"),e._v(e._s(t.row.government_contacts[0].organization.name))])]}},{key:"operator",fn:function(t){return[i("router-link",{staticClass:"user",attrs:{to:"/annuaire/"+t.row.operator_contacts[0].organization.id}},[e._v(e._s(t.row.operator_contacts[0].name)),i("br"),e._v(e._s(t.row.operator_contacts[0].organization.name))])]}}],null,!1,1173401747)})],1)]):e._e()])],1)])},Zm=[];function Km(){return no("/plans")}async function Xm(e){return no("/plans/"+e)}async function eh(e){return oo("/plans",e)}async function th(e,t){return oo("/plans/"+e,t)}async function ih(e,t){return oo(`/plans/${e}/states`,t)}async function sh(e,t){return lo("/plans/"+e,{operation:"close",data:t})}var ah={components:{NavBar:Qo,Table:ml,CollectivityInput:yl},data(){const{user:e}=fo(),t=go("plan.list"),i="nation"===t.geographic_level,s={locationTitle:null,defaultLocation:null,location:null};let a=e.organization.location.type;"epci"!==a&&"city"!==a||(a="departement");const n={id:"nation"===a?null:e.organization.location[a].code,label:"nation"===a?"France":e.organization.location[a].name,category:a,data:{code:"nation"===a?null:e.organization.location[a].code,type:a}};return!0!==i||"nation"===a?(s.defaultLocation={...n},s.location=null):(s.defaultLocation={id:null,label:"France",category:"Pays",data:{code:null,type:"nation"}},s.location={...n}),"nation"===s.defaultLocation.data.type?s.locationTitle="National":s.locationTitle=s.defaultLocation.label,Object.assign(s,{plans:[],error:null,state:null})},computed:{currentLocation(){return this.location||this.defaultLocation},columns(){return[{id:"name",label:"Nom du dispositif"},{id:"departement",label:"Dpt"},{id:"location",label:"Lieu"},{id:"government",label:"Service de l'état"},{id:"operator",label:"Opérateur"}]},pageContent(){return this.plans.filter(({closed_at:e})=>null===e).filter(e=>{if("nation"===this.currentLocation.data.type)return!0;const t=e[this.currentLocation.data.type];return t&&t.code===""+this.currentLocation.data.code})}},created(){this.load()},methods:{dateDiff(...e){return App.dateDiff(...e)},formatDate(...e){return window.App.formatDate(...e)},load(){-1!==[null,"error"].indexOf(this.state)&&(this.state="loading",this.error=null,Km().then(e=>{this.plans=e,this.state="loaded"}).catch(({user_message:e})=>{this.error=e,this.state="error"}))},retryLoading(){this.load()},routeToPlan({id:e}){const t=this.$router.resolve("/dispositif/"+e);Xn(t.href)},hasPermission(...e){return bo(...e)}}},nh=ah,oh=nh,rh=(i("1a64"),Object(d["a"])(oh,Qm,Zm,!1,null,"ca8ce470",null)),lh=rh.exports,ch=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("NavBar"),"loading"===e.loading.status?i("section",{staticClass:"section section-white"},[e._m(0)]):e._e(),"failed"===e.loading.status?i("section",{staticClass:"section section-white"},[i("div",{staticClass:"container"},[i("div",{staticClass:"notification error full-width"},[i("span",[e._v(e._s(e.loading.error)+". "),i("a",{attrs:{href:"#"},on:{click:e.load}},[e._v("Réessayer ?")])])])])]):e._e(),"completed"===e.loading.status?i("Form",e._b({ref:"form",on:{complete:e.onComplete},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}},"Form",e.formDefinition,!1)):e._e()],1)},dh=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Chargement des données en cours...")])])])}];function uh(e){return no(`/regions/${e}/departements`)}function ph(e){return no(`/epci/${e}/departements`)}var mh={components:{NavBar:Qo,Form:Oc},data(){const{user:e,topics:t}=fo(),i={user:e,formData:{association:[]},loading:{status:null,error:null}},s=this,a=this.$refs,n={type:"hidden",label:"Personne référente dans la structure",description:"Aucune personne de cette structure n'est encore enregistrée sur la plateforme résorption bidonville.",mandatory:!0,condition({association:e}){return void 0!==e&&e.length>0&&0===a.form.getInputById("contact").options.length&&!1===s.loadingAssociationContacts}};return i.formDefinition={title:"Déclarer un dispositif",descriptionTitle:"Qu'est-ce qu'un dispositif ?",description:"C’est une action mise en place et financée en partie ou en totalité par un acteur public. Sa finalité est la résorption des bidonvilles.<br/><strong>Qui doit le déclarer ?</strong> Le service de l'Etat à l'initiative du dispositif doit le déclarer. L'acteur de terrain sera en charge de renseigner les informations relatives à l'action menée.",steps:[{title:"Dispositf",wording:{error:"La déclaration du dispositif a échoué",submit:"Déclarer le dispositif"},sections:[{title:"Intervention",icon:"list",inputs:{name:{type:"text",label:"Nom du dispositif",mandatory:!0},departement:{type:"select",label:"Département d'intervention",mandatory:!0},startedAt:{type:"date",label:"Date de début",mandatory:!0},expectedToEndAt:{type:"date",label:"Date de fin prévue (facultatif)",mandatory:!1},in_and_out:{type:"radio",label:"Ce dispositif implique-t-il un système d'entrées et de sorties des personnes ?",mandatory:!0,options:[{value:1,label:"Oui"},{value:0,label:"Non"}]},topics:{type:"checkbox",label:"Champs d'intervention",description:"Les thématiques sélectionnées définissent l'action que vous menez et les indicateurs de suivi associés.",mandatory:!0,options:t.map(({uid:e,name:t})=>({value:e,label:t}))},goals:{type:"textarea",label:"Objectifs",mandatory:!0,specificProps:{placeholder:"Précisez les objectifs, les enjeux, le contexte du dispositif\n\nPar exemple : résorber le bidonville, scolariser 80% des enfants identités en bidonvilles..."}}}},{title:"Lieu",icon:"map-pin",inputs:{locationType:{type:"radio",label:"L'action se déroule dans le cadre suivant",mandatory:!0,options:[{value:"shantytowns",label:"sur site(s) : bidonville ou squat"},{value:"location",label:"sur terrain d'insertion"},{value:"housing",label:"dans le logement"},{value:"other",label:"dans plusieurs lieux (hébergement, permanence, rue...)"}]},locationShantytowns:{type:"townList",label:"Sites concernés",description:`Merci de sélectionner les sites concernés par le dispositif.<br/>Si vous ne trouvez pas un site, vous pouvez <a href="${this.$router.resolve("/nouveau-site").href}" clas="link">déclarer un nouveau site</a>.`,mandatory:!0,condition({locationType:e}){return"shantytowns"===e}},locationAddress:{type:"addressWithLocation",label:"Adresse du terrain d'insertion",mandatory:!0,condition({locationType:e}){return"location"===e}},locationDetails:{type:"text",label:"Préciser",mandatory:!0,condition({locationType:e}){return"other"===e}}}},{title:"Contacts",inputs:{government:{type:"autocompleter",label:"Personne au service de l'état en charge du pilotage",mandatory:!0,specificProps:{autocompleter:e=>{const t=Yc("public_establishment"),i=t.then(({users:t})=>t.filter(({first_name:t,last_name:i})=>[t,i].some(t=>e.split(" ").every(e=>-1!==t.toLowerCase().indexOf(e.toLowerCase())))).map(({id:e,first_name:t,last_name:i})=>({id:e,label:`${t} ${i.toUpperCase()}`})));return i.abort=t.abort,i},showCategory:!1,allowMultiple:!1,float:!0}},association:{type:"autocompleter",label:"Opérateur ou service en charge de l'intervention",mandatory:!0,specificProps:{autocompleter:e=>{const t=Hc("association"),i=t.then(({organizations:t})=>t.filter(({name:t,abbreviation:i})=>e.split(" ").every(e=>-1!==t.toLowerCase().indexOf(e.toLowerCase()))||null!==i&&i.toLowerCase().indexOf(e.toLowerCase())>=0).map(e=>({id:e.id,label:e.name,category:`${e.departement_code} - ${e.departement_name}`,data:{name:e.name,departement:e.departement_code}})));return i.abort=t.abort,i},showCategory:!0,allowMultiple:!1,float:!0}},contact:{type:"select",label:"Personne référente dans la structure",mandatory:!0,options:[],condition({association:e}){return void 0!==e&&e.length>0&&this.options.length>0}},contact_missing:n}},{title:"Financements",inputs:{finances:{type:"planFunding",label:"Financements",mandatory:!1}}}],submit:eh}]},bo("user.create")&&(window.createUser=this.createUser,n.description+='<br/><a class="link" onclick="createUser()">Vous pouvez créer un compte utilisateur en cliquant ici.</span>'),"public_establishment"===e.organization.category.uid&&(i.formData.government=[{id:e.id,label:`${e.first_name} ${e.last_name.toUpperCase()}`}]),i},watch:{"formData.association":function(){this.loadingAssociationContacts=!0,this.$refs.form.getInputById("contact").options=[],0!==this.formData.association.length&&Wc(this.formData.association[0].id).then(({users:e})=>{this.$refs.form.getInputById("contact").options=e.map(({id:e,first_name:t,last_name:i})=>({value:e,label:`${t} ${i.toUpperCase()}`})),this.loadingAssociationContacts=!1})}},mounted(){this.load(),window.addEventListener("message",({data:e})=>{this.$refs.form.getInputById("contact").options=[{value:e.id,label:`${e.first_name} ${e.last_name.toUpperCase()}`}],this.formData.contact=e.id,this.loadingAssociationContacts=!1,Sc({group:"notifications",type:"success",title:"Utilisateur créé",text:"La personne référente est désormais sélectionnée"})},!1)},methods:{getDepartementsForCurrentUser(){const e={city:1,epci:2,departement:3,region:4,nation:5},t=this.user.permissions.plan.create.geographic_level,i=this.user.organization.location.type;let s;switch(s="local"===t||e[i]>e[t]?i:t,s){case"nation":{const{departements:e}=fo();return Promise.resolve(e)}case"region":return uh(this.user.organization.location.region.code).then(({departements:e})=>e);default:return Promise.resolve([this.user.organization.location.departement])}},load(){"loading"!==this.loading.status&&"completed"!==this.loading.status&&(this.loading.status="loading",this.loading.error=null,this.getDepartementsForCurrentUser().then(e=>{this.loading.status="completed",this.$nextTick(()=>{const t=this.$refs.form.getInputById("departement");t.options=e.map(({code:e,name:t})=>({label:`${e} - ${t}`,value:e}))})}).catch(e=>{this.loading.status="failed",this.loading.error=e}))},createUser(){const{name:e,departement:t}=this.formData.association[0].data,{href:i}=this.$router.resolve("/nouvel-utilisateur");window.open(`${i}?association_name=${encodeURIComponent(e)}&association_departement=${t}`,"newUser","menubar=no, status=no")},onComplete(e,[{id:t}]){Sc({group:"notifications",type:"success",title:"Dispositif correctement déclaré",text:"Le dispositif a bien été ajouté en base de données"}),this.$router.push("/dispositif/"+t)}}},hh=mh,vh=hh,fh=(i("83c6"),Object(d["a"])(vh,ch,dh,!1,null,null,null)),_h=fh.exports,gh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[i("NavBar"),"hidden"!==e.closingAlertStatus?i("div",{staticClass:"alert"},[i("div",{ref:"wrapper",staticClass:"alert-wrapper"},[i("header",{staticClass:"alert-header"},[i("hgroup",[i("h1",{staticClass:"alert-title"},[e._v("Confirmez-vous la fermeture du dispositif "+e._s(e.plan.name)+" ?")])]),i("div",{staticClass:"alert-actionButtons"},[i("button",{staticClass:"button secondary",attrs:{disabled:"pending"===e.closingStatus},on:{click:function(t){return e.setClosingAlertStatus("hidden")}}},[e._v("Annuler")]),"step1"===e.closingAlertStatus?i("button",{staticClass:"button",on:{click:e.checkClosing}},[e._v("Suite")]):e._e(),"step2"===e.closingAlertStatus?i("button",{staticClass:"button",attrs:{disabled:"pending"===e.closingStatus},on:{click:e.close}},[e._v("Valider")]):e._e()])]),i("section",{staticClass:"alert-body"},["step1"===e.closingAlertStatus?i("div",[i("p",[e._v("Avant de fermer définitivement le dispositif, assurez-vous que les indicateurs de suivi renseignés par l'opérateur sont à jour."),null!==e.plan.last_update?i("span",[e._v(" Pour information, la dernière mise à jour des indicateurs a eu lieu le "+e._s(e.formatDate(e.plan.last_update/1e3,"d/m/y"))+".")]):e._e(),i("br"),e._v("Merci de renseigner les dépenses exécutées de l'année en cours et des années précédentes si nécessaire")]),i("PlanFunding",{attrs:{inputMode:"closing",minYear:e.minYear},model:{value:e.closingData.finances,callback:function(t){e.$set(e.closingData,"finances",t)},expression:"closingData.finances"}})],1):i("div",[i("p",[i("Input",{attrs:{id:"closedAt",mandatory:!0,type:"date",label:"Date de fermeture du dispositif",description:"La date de fermeture du dispositif doit être postérieure - ou égale - à la dernière date de mise à jour des indicateurs.",disabled:"pending"===e.closingStatus},model:{value:e.closingData.closedAt,callback:function(t){e.$set(e.closingData,"closedAt",t)},expression:"closingData.closedAt"}})],1),i("p",[i("Input",{attrs:{id:"comment",mandatory:!0,type:"textarea",label:"Commentaire",description:e.closingCommentDescription,disabled:"pending"===e.closingStatus},model:{value:e.closingData.comment,callback:function(t){e.$set(e.closingData,"comment",t)},expression:"closingData.comment"}})],1)]),e.closingErrors.length>0?i("div",{staticClass:"notification error"},[e._v("Une erreur est survenue")]):e._e(),e.closingErrors.length>0?i("p",{staticClass:"error"},[i("ul",e._l(e.closingErrors,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e()])])]):e._e(),i("section",{staticClass:"section-white"},["loaded"!==e.status?i("div",{staticClass:"container"},[e.status&&"loading"!==e.status?"loadingError"===e.status?i("div",[i("div",{staticClass:"notification error full-width"},[i("span",[e._v(e._s(e.error)+". "),i("span",{on:{click:e.load}},[e._v("Réessayer ?")])])])]):e._e():i("div",[e._m(0)])]):e._e(),"loaded"===e.status?i("div",[i("header",{staticClass:"pageHeader"},[i("div",{staticClass:"pageHeader-wrapper"},[i("section",{staticClass:"pageHeader-main"},[i("section",{staticClass:"pageHeader-info"},[i("h1",{staticClass:"pageHeader-title"},[e._v(e._s(e.plan.name))])]),i("aside",{staticClass:"pageHeader-buttons"},[e.plan&&e.plan.canUpdate?i("router-link",{staticClass:"button",attrs:{to:"/modifier-dispositif/"+e.plan.id}},[i("font-awesome-icon",{attrs:{icon:"pencil-alt"}}),i("span",[e._v("Mettre à jour")])],1):e._e(),e.plan&&e.plan.canUpdateMarks?i("router-link",{staticClass:"button",attrs:{to:"/dispositif/"+e.plan.id+"/indicateurs"}},[i("font-awesome-icon",{attrs:{icon:"pencil-alt"}}),i("span",[e._v("Indicateurs")])],1):e._e(),e.plan&&null===e.plan.closed_at&&e.plan.canClose?i("a",{staticClass:"button",on:{click:function(t){return e.setClosingAlertStatus("step1")}}},[i("span",[e._v("Fermer le dispositif")])]):e._e()],1)])])]),i("section",{staticClass:"container"},[i("SlideNote",{attrs:{title:"Qu'est-ce qu'un dispositif ?"}},[i("template",{slot:"content"},[i("p",[e._v("C’est une action mise en place et financée en partie ou en totalité par un acteur public. Sa finalité est la résorption des bidonvilles."),i("br"),i("strong",[e._v("Qui doit le déclarer ?")]),e._v(" Le service de l'Etat à l'initiative du dispositif doit le déclarer. L'acteur de terrain sera en charge de renseigner les informations relatives à l'action menée.")]),i("p",[i("strong",[e._v("À quoi sert le suivi ?")]),i("br"),e._v("La mise à jour des données de suivi permettent d’observer la progression des démarches des habitants par rapport à une situation initiale et les résultats des actions."),i("br"),e._v("Toutes ces données peuvent êtres utilisées pour la communication auprès des partenaires.")])])],2),i("section",{staticClass:"dataSection"},[i("header",{staticClass:"dataSection-header"},[i("h1",{staticClass:"dataSection-title"},[i("span",{staticClass:"dataSection-icon"},[i("font-awesome-icon",{attrs:{icon:"list"}})],1),e._v(" Intervention ")])]),i("article",{staticClass:"block"},[i("div",{staticClass:"dataSection-line"},[i("p",{staticClass:"data"},[i("span",{staticClass:"data-label"},[e._v("Date de début")]),i("br"),e._v(e._s(e.formatDate(e.plan.started_at/1e3,"d M y")))]),e.plan.expected_to_end_at?i("p",{staticClass:"data"},[i("span",{staticClass:"data-label"},[e._v("Date de fin prévue")]),i("br"),e._v(e._s(e.formatDate(e.plan.expected_to_end_at/1e3,"d M y"))),i("br"),i("strong",[e._v("Durée prévue : "+e._s(e.dateDiff(e.plan.started_at,e.plan.expected_to_end_at)))])]):e._e(),e.plan.closed_at?i("p",{staticClass:"data"},[i("span",{staticClass:"data-label"},[e._v("Date de fin")]),i("br"),e._v(e._s(e.formatDate(e.plan.closed_at/1e3,"d M y"))),i("br"),i("strong",[e._v("Durée : "+e._s(e.dateDiff(e.plan.started_at,e.plan.closed_at)))])]):e._e()]),i("p",{staticClass:"data-label"},[e._v("Champs d'intervention")]),e._l(e.plan.topics,(function(t){return i("p",[i("span",{staticClass:"rbTag rbTag--warning"},[e._v(e._s(t.name))]),i("br")])})),i("div",{staticClass:"dataSection-line"},[i("p",{staticClass:"data"},[i("span",{staticClass:"data-label"},[e._v("Objectifs")]),i("br"),i("span",{domProps:{innerHTML:e._s(e.escapeHtml(e.plan.goals).replace(/\n/g,"<br/>"))}})])]),e.plan.final_comment?i("div",{staticClass:"dataSection-line"},[i("p",{staticClass:"data"},[i("span",{staticClass:"data-label"},[e._v("Commentaire")]),i("br"),i("span",{domProps:{innerHTML:e._s(e.escapeHtml(e.plan.final_comment).replace(/\n/g,"<br/>"))}})])]):e._e()],2)]),i("section",{staticClass:"dataSection"},[i("header",{staticClass:"dataSection-header"},[i("h1",{staticClass:"dataSection-title"},[i("span",{staticClass:"dataSection-icon"},[i("font-awesome-icon",{attrs:{icon:"map-pin"}})],1),e._v(" Lieu ")])]),i("article",{staticClass:"block"},[i("div",{staticClass:"dataSection-line"},[i("p",[i("span",{staticClass:"data-label"},[e._v(e._s(e.plan.location_type.label))]),i("br"),"shantytowns"===e.plan.location_type.id?i("span",e._l(e.plan.shantytowns,(function(t){return i("p",[i("router-link",{staticClass:"locationPoint",attrs:{to:"/site/"+t.id}},[e._v(e._s(t.usename))])],1)})),0):e._e(),"location"===e.plan.location_type.id?i("span",{staticClass:"locationPoint"},[e._v(e._s(e.plan.location.label))]):e._e(),"other"===e.plan.location_type.id?i("span",[e._v(e._s(e.plan.location_details))]):e._e()])]),"location"===e.plan.location_type.id?i("Map",{attrs:{"display-searchbar":!1,towns:[e.address],"default-view":e.center}}):e._e()],1)]),i("section",{staticClass:"dataSection"},[i("header",{staticClass:"dataSection-header"},[i("h1",{staticClass:"dataSection-title"},[i("span",{staticClass:"dataSection-icon"},[i("font-awesome-icon",{attrs:{icon:"address-book"}})],1),e._v(" Contacts ")])]),i("article",{staticClass:"block"},[i("div",{staticClass:"dataSection-line"},[i("p",{staticClass:"data"},[i("span",{staticClass:"data-label"},[e._v("Service de l'état")]),i("br"),i("router-link",{staticClass:"user",attrs:{to:"/annuaire/"+e.plan.government_contacts[0].organization.id}},[e._v(e._s(e.plan.government_contacts[0].first_name)+" "+e._s(e.plan.government_contacts[0].last_name.toUpperCase())),i("br"),e._v(e._s(e.plan.government_contacts[0].organization.name))])],1)]),i("div",{staticClass:"dataSection-line"},[i("p",{staticClass:"data"},[i("span",{staticClass:"data-label"},[e._v("Opérateur ou service en charge")]),i("br"),i("router-link",{staticClass:"user",attrs:{to:"/annuaire/"+e.plan.operator_contacts[0].organization.id}},[e._v(e._s(e.plan.operator_contacts[0].first_name)+" "+e._s(e.plan.operator_contacts[0].last_name.toUpperCase())),i("br"),e._v(e._s(e.plan.operator_contacts[0].organization.name))])],1)])])]),e.plan&&e.plan.finances&&e.plan.finances.length>0?i("section",{staticClass:"dataSection rb-table"},[i("header",{staticClass:"dataSection-header"},[i("h1",{staticClass:"dataSection-title"},[i("span",{staticClass:"dataSection-icon"},[i("font-awesome-icon",{attrs:{icon:"euro-sign"}})],1),e._v(" Financements ")])]),i("header",{staticClass:"planFunding-header"},[i("font-awesome-icon",{staticClass:"planFunding-yearSwitch",class:{"planFunding-yearSwitch--disabled":!0===e.reachedMinFinanceIndex},attrs:{icon:"caret-square-left"},on:{click:e.showPreviousYear}}),i("span",[e._v(e._s(e.plan.finances[e.currentFinanceIndex].year)+" ")]),i("font-awesome-icon",{staticClass:"planFunding-yearSwitch",class:{"planFunding-yearSwitch--disabled":!0===e.reachedMaxFinanceIndex},attrs:{icon:"caret-square-right"},on:{click:e.showNextYear}})],1),i("table",{staticClass:"table block"},[e._m(1),i("tbody",[e._l(e.plan.finances[e.currentFinanceIndex].data,(function(t){return i("tr",[i("td",[e._v(e._s(t.type.name))]),i("td",[e._v(e._s(t.amount)+" €"),i("br"),e._v("soit "+e._s(Math.round(t.amount/e.financeTotal()*100))+"%")]),i("td",[e._v(e._s(t.details))]),t.realAmount?i("td",[e._v(e._s(t.realAmount)+" €")]):e.reachedMaxFinanceIndex?i("td",[e._v("À remplir entre janvier et mars")]):i("td",[e._v("Non renseignées")])])})),i("tr",[i("td"),i("td",{attrs:{colspan:"3"}},[i("strong",[e._v("TOTAL : "+e._s(e.financeTotal())+"€")])])])],2)])]):e._e(),e.plan.states.length>0?i("section",{staticClass:"dataSection rb-table"},[i("header",{staticClass:"dataSection-header"},[i("h1",{staticClass:"dataSection-title"},[i("span",{staticClass:"dataSection-icon"},[i("font-awesome-icon",{attrs:{icon:"users"}})],1),e._v(" Équipe ")])]),i("table",{staticClass:"table block"},[i("thead",[i("tr",[i("th"),e._l(e.plan.states,(function(t){return i("th",[e._v(e._s(e.formatDate(new Date(t.date).getTime()/1e3,"d M")))])}))],2)]),i("tbody",e._l(e.availableEtpTypes,(function(t){return i("tr",[i("th",[e._v(e._s(t.name))]),e._l(e.plan.states,(function(s){return i("td",[e._v(e._s((s.etp.find((function(e){var i=e.type.uid;return i===t.uid}))||{total:0}).total))])}))],2)})),0)])]):e._e(),e.audience?i("section",{staticClass:"dataSection rb-table"},[i("header",{staticClass:"dataSection-header"},[i("h1",{staticClass:"dataSection-title"},[i("span",{staticClass:"dataSection-icon"},[i("font-awesome-icon",{attrs:{icon:"arrow-right"}})],1),e._v(" Public ")])]),i("table",{staticClass:"table block"},[e._m(2),i("tbody",[i("tr",[e._m(3),i("td",[e._v(e._s(e.audience.in.families))]),i("td",[e._v(e._s(e.audience.in.total))]),i("td",[e._v(e._s(e.audience.in.women))]),i("td",[e._v(e._s(e.audience.in.minors))])]),i("tr",[e._m(4),i("td",[e._v(e._s(e.audience.out_positive.families))]),i("td",[e._v(e._s(e.audience.out_positive.total))]),i("td",[e._v(e._s(e.audience.out_positive.women))]),i("td",[e._v(e._s(e.audience.out_positive.minors))])]),i("tr",[e._m(5),i("td",[e._v(e._s(e.audience.out_excluded.families))]),i("td",[e._v(e._s(e.audience.out_excluded.total))]),i("td",[e._v(e._s(e.audience.out_excluded.women))]),i("td",[e._v(e._s(e.audience.out_excluded.minors))])]),i("tr",[e._m(6),i("td",[e._v(e._s(e.audience.out_abandoned.families))]),i("td",[e._v(e._s(e.audience.out_abandoned.total))]),i("td",[e._v(e._s(e.audience.out_abandoned.women))]),i("td",[e._v(e._s(e.audience.out_abandoned.minors))])])])])]):e._e(),e.plan.states.length>0?i("section",{staticClass:"dataSection rb-table"},[i("header",{staticClass:"dataSection-header"},[i("h1",{staticClass:"dataSection-title"},[i("span",{staticClass:"dataSection-icon"},[i("font-awesome-icon",{attrs:{icon:"id-card"}})],1),e._v(" Droit commun et ressources ")])]),i("table",{staticClass:"table block"},[i("thead",[i("tr",[i("th",{staticClass:"table-col"},[e._v("Nombre de personnes ayant")]),e._l(e.plan.states,(function(t){return i("th",{staticClass:"table-col"},[e._v(e._s(e.formatDate(new Date(t.date).getTime()/1e3,"d M")))])}))],2)]),i("tbody",[i("tr",[i("td",[e._v("une domiciliation")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.droit_commun.domiciliation?"NC":t.droit_commun.domiciliation))])}))],2),i("tr",[i("td",[e._v("des droits CAF ouverts")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.droit_commun.droits_caf?"NC":t.droit_commun.droits_caf))])}))],2),i("tr",[i("td",[e._v("un emploi stable / ressources suffisantes")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.droit_commun.emploi_stable?"NC":t.droit_commun.emploi_stable))])}))],2)])])]):e._e(),e.plan.states.length>0&&e.plan.topics.find((function(e){var t=e.uid;return"health"===t}))?i("section",{staticClass:"dataSection rb-table"},[i("header",{staticClass:"dataSection-header"},[i("h1",{staticClass:"dataSection-title"},[i("span",{staticClass:"dataSection-icon"},[i("font-awesome-icon",{attrs:{icon:"user-md"}})],1),e._v(" Santé ")])]),i("table",{staticClass:"table block"},[i("thead",[i("tr",[i("th",{staticClass:"table-col"}),e._l(e.plan.states,(function(t){return i("th",{staticClass:"table-col"},[e._v(e._s(e.formatDate(new Date(t.date).getTime()/1e3,"d M")))])}))],2)]),i("tbody",[i("tr",[i("th",{attrs:{colspan:e.plan.states.length+1}},[i("strong",[e._v("Nombre de personnes avec...")])])]),i("tr",[i("td",[e._v("une couverture AME valide")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.sante.ame_valide?"NC":t.sante.ame_valide))])}))],2),i("tr",[i("td",[e._v("une couverture PUMA valide")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.sante.puma_valide?"NC":t.sante.puma_valide))])}))],2),i("tr",[i("td",[e._v("une demande AME en cours")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.sante.ame_en_cours?"NC":t.sante.ame_en_cours))])}))],2),i("tr",[i("td",[e._v("une demande PUMA en cours")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.sante.puma_en_cours?"NC":t.sante.puma_en_cours))])}))],2),i("tr",[i("th",{attrs:{colspan:e.plan.states.length+1}},[i("strong",[e._v("Nombre de personnes ayant fait l'objet d'au moins...")])])]),i("tr",[i("td",[e._v("une orientation vers une structure de santé")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.sante.orientation?"NC":t.sante.orientation))])}))],2),i("tr",[i("td",[e._v("un accompagnement physique vers une structure de santé")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.sante.accompagnement?"NC":t.sante.accompagnement))])}))],2)])])]):e._e(),e.plan.states.length>0&&e.plan.topics.find((function(e){var t=e.uid;return"school"===t}))?i("section",{staticClass:"dataSection rb-table"},[i("header",{staticClass:"dataSection-header"},[i("h1",{staticClass:"dataSection-title"},[i("span",{staticClass:"dataSection-icon"},[i("font-awesome-icon",{attrs:{icon:"user-md"}})],1),e._v(" Éducation et scolarisation ")])]),i("table",{staticClass:"table block"},[i("thead",[i("tr",[i("th",{staticClass:"table-col"}),e._l(e.plan.states,(function(t){return i("th",{staticClass:"table-col"},[e._v(e._s(e.formatDate(new Date(t.date).getTime()/1e3,"d M")))])}))],2)]),i("tbody",[i("tr",[i("td",[e._v("Mineurs en âge d'être scolarisés")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.education.scolarisables?"NC":t.education.scolarisables))])}))],2),i("tr",[i("td",[e._v("Maternelle")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.education.maternelles?"NC":t.education.maternelles))])}))],2),i("tr",[i("td",[e._v("Primaire")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.education.elementaires?"NC":t.education.elementaires))])}))],2),i("tr",[i("td",[e._v("Collège")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.education.colleges?"NC":t.education.colleges))])}))],2),i("tr",[i("td",[e._v("Lycée - formation professionnelle")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.education.lycees?"NC":t.education.lycees))])}))],2)])])]):e._e(),e.plan.states.length>0&&e.plan.topics.find((function(e){var t=e.uid;return"work"===t}))?i("section",{staticClass:"dataSection rb-table"},[i("header",{staticClass:"dataSection-header"},[i("h1",{staticClass:"dataSection-title"},[i("span",{staticClass:"dataSection-icon"},[i("font-awesome-icon",{attrs:{icon:"briefcase"}})],1),e._v(" Formation et emploi ")])]),i("table",{staticClass:"table block"},[i("thead",[i("tr",[i("th",{staticClass:"table-col"}),e._l(e.plan.states,(function(t){return i("th",{staticClass:"table-col"},[e._v(e._s(e.formatDate(new Date(t.date).getTime()/1e3,"d M")))])}))],2)]),i("tbody",[i("tr",[i("th",{attrs:{colspan:e.plan.states.length+1}},[i("strong",[e._v("Nombre de personnes inscrites ou suivies par...")])])]),i("tr",[i("td",[e._v("Pôle emploi")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.formation.pole_emploi?"NC":t.formation.pole_emploi))])}))],2),i("tr",[e._m(7),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.formation.pole_emploi_femmes?"NC":t.formation.pole_emploi_femmes))])}))],2),i("tr",[i("td",[e._v("Mission locale")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.formation.mission_locale?"NC":t.formation.mission_locale))])}))],2),i("tr",[e._m(8),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.formation.mission_locale_femmes?"NC":t.formation.mission_locale_femmes))])}))],2),i("tr",[i("th",{attrs:{colspan:e.plan.states.length+1}},[i("strong",[e._v("Nombre de personnes ayant")])])]),i("tr",[i("td",[e._v("Un contrat")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.formation.contrats?"NC":t.formation.contrats))])}))],2),i("tr",[e._m(9),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.formation.contrats_femmes?"NC":t.formation.contrats_femmes))])}))],2),i("tr",[i("td",[e._v("Une formation")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.formation.formations?"NC":t.formation.formations))])}))],2),i("tr",[e._m(10),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.formation.formations_femmes?"NC":t.formation.formations_femmes))])}))],2),i("tr",[i("td",[e._v("Un statut autoentrepreneur")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.formation.autoentrepreneurs?"NC":t.formation.autoentrepreneurs))])}))],2),i("tr",[e._m(11),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.formation.autoentrepreneurs_femmes?"NC":t.formation.autoentrepreneurs_femmes))])}))],2),i("tr",[i("td",[e._v("l'ARE")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.formation.are?"NC":t.formation.are))])}))],2),i("tr",[e._m(12),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.formation.are_femmes?"NC":t.formation.are_femmes))])}))],2)])])]):e._e(),e.plan.states.length>0&&e.plan.topics.find((function(e){var t=e.uid;return"housing"===t}))?i("section",{staticClass:"dataSection rb-table"},[i("header",{staticClass:"dataSection-header"},[i("h1",{staticClass:"dataSection-title"},[i("span",{staticClass:"dataSection-icon"},[i("font-awesome-icon",{attrs:{icon:"home"}})],1),e._v(" Logement ")])]),i("table",{staticClass:"table block"},[i("thead",[i("tr",[i("th",{staticClass:"table-col"}),e._l(e.plan.states,(function(t){return i("th",{staticClass:"table-col"},[e._v(e._s(e.formatDate(new Date(t.date).getTime()/1e3,"d M")))])}))],2)]),i("tbody",[e._l(e.housingFields,(function(t){return[i("tr",[i("th",{attrs:{colspan:e.plan.states.length+1}},[i("strong",[e._v(e._s(t.label))])])]),i("tr",[i("td",[e._v("Nombre de personnes")]),e._l(e.plan.states,(function(s){return i("td",[e._v(e._s(null===s.logement[t.name].people?"NC":s.logement[t.name].people))])}))],2),i("tr",[i("td",[e._v("Nombre de ménages")]),e._l(e.plan.states,(function(s){return i("td",[e._v(e._s(null===s.logement[t.name].families?"NC":s.logement[t.name].families))])}))],2)]}))],2)])]):e._e(),e.plan.states.length>0&&e.plan.topics.find((function(e){var t=e.uid;return"safety"===t}))?i("section",{staticClass:"dataSection rb-table"},[i("header",{staticClass:"dataSection-header"},[i("h1",{staticClass:"dataSection-title"},[i("span",{staticClass:"dataSection-icon"},[i("font-awesome-icon",{attrs:{icon:"seedling"}})],1),e._v(" Stabilisation et sécurisation du site ")])]),i("table",{staticClass:"table block"},[i("thead",[i("tr",[i("th",{staticClass:"table-col"}),e._l(e.plan.states,(function(t){return i("th",{staticClass:"table-col"},[e._v(e._s(e.formatDate(new Date(t.date).getTime()/1e3,"d M")))])}))],2)]),i("tbody",[i("tr",[i("td",[e._v("Nombre d'accès réguliers à l'eau potable")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.securisation.points_eau?"NC":t.securisation.points_eau))])}))],2),i("tr",[i("td",[e._v("Nombre de sanitaires")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.securisation.wc?"NC":t.securisation.wc))])}))],2),i("tr",[i("td",[e._v("Nombre d'accès réguliers à l'électricité")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.securisation.electricite?"NC":t.securisation.electricite))])}))],2),i("tr",[i("td",[e._v("Nombre de bennes disponibles pour le ramassage des déchets du site")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.securisation.nombre_bennes?"NC":t.securisation.nombre_bennes))])}))],2)])])]):e._e(),0===e.plan.states.length&&e.plan.canUpdateMarks?i("div",{staticClass:"note"},[i("div",{staticClass:"note-body"},[i("p",[i("strong",[e._v("Aucun indicateur de suivi renseigné par l'opérateur")]),i("br"),i("router-link",{staticClass:"button",attrs:{to:"/dispositif/"+e.plan.id+"/indicateurs"}},[i("font-awesome-icon",{attrs:{icon:"pencil-alt"}}),i("span",[e._v("Modifier")])],1)],1)])]):e._e()],1)]):e._e()])],1)])},bh=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Chargement des données en cours...")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("thead",[i("tr",[i("th",{staticClass:"table-col"},[e._v("Type de financements")]),i("th",{staticClass:"table-col"},[e._v("Montants"),i("br"),e._v("prévus")]),i("th",{staticClass:"table-col"},[e._v("Précision")]),i("th",{staticClass:"table-col"},[e._v("Dépenses"),i("br"),e._v("exécutées")])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("thead",[i("tr",[i("th",{staticClass:"table-col"}),i("th",{staticClass:"table-col"},[e._v("Ménages")]),i("th",{staticClass:"table-col"},[e._v("Personnes")]),i("th",{staticClass:"table-col"},[e._v("dont femmes")]),i("th",{staticClass:"table-col"},[e._v("dont mineurs")])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("strong",[e._v("Entrées")]),e._v(" dans le dispositif")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("strong",[e._v("Sorties positivement")]),i("br"),e._v("fin accompagnement social et/ou"),i("br"),e._v("prise en charge dans un autre dispositif")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("strong",[e._v("Exclusion")]),e._v(" du dispositif")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("strong",[e._v("Abandon / départ volontaire")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("em",[e._v("(dont femmes)")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("em",[e._v("(dont femmes)")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("em",[e._v("(dont femmes)")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("em",[e._v("(dont femmes)")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("em",[e._v("(dont femmes)")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("em",[e._v("(dont femmes)")])])}],yh={components:{NavBar:Qo,SlideNote:Pc,Map:lu,PlanFunding:Ll,Input:gc},data(){const{etp_types:e}=fo();return{status:null,error:null,plan:null,etpTypes:e,currentFinanceIndex:0,closingAlertStatus:"hidden",closingErrors:[],closingStatus:null,closingData:{closedAt:new Date,finances:[],comment:""},housingFields:[{name:"siao",label:"Demandes SIAO"},{name:"logement_social",label:"Demandes de logement social"},{name:"dalo",label:"Demandes DALO"},{name:"accompagnes",label:"Accès à un logement accompagné / adapté"},{name:"non_accompagnes",label:"Accès à un logement sans accompagnement"},{name:"heberges",label:"Hébergements"}]}},created(){this.load()},computed:{closingCommentDescription(){if(!this.audience)return"";const e={...this.audience.in};return["out_positive","out_abandoned","out_excluded"].forEach(t=>{e.total-=this.audience[t].total,e.families-=this.audience[t].families,e.women-=this.audience[t].women,e.minors-=this.audience[t].minors}),0===e.total&&0===e.families&&0===e.women&&0===e.minors?"Précisez les raisons de la fermeture du dispositif":`À la fermeture du dispositif, ${e.families} ménage${e.families>1?"s":""} (soit ${e.total} personne${e.total>1?"s":""}) sont identifiés dans le dispositif. Merci de préciser les solutions mobilisées pour ces personnes et les raisons de la fermeture du dispositif.<br /><br />Merci de respecter les règles de confidentialité.Ne pas citer l'identité des individus (Nom, âge, sexe, origine...)`},reachedMaxFinanceIndex(){return!this.plan||!this.plan.finances||0===this.plan.finances.length||0===this.currentFinanceIndex},reachedMinFinanceIndex(){return!this.plan||!this.plan.finances||0===this.plan.finances.length||this.currentFinanceIndex>=this.plan.finances.length-1},minYear(){return this.plan&&this.plan.finances&&0!==this.plan.finances.length?this.plan.finances.reduce((e,{year:t})=>null!==e?Math.min(e,t):t,null):null},availableEtpTypes(){return this.etpTypes.filter(({uid:e})=>this.plan.states.some(({etp:t})=>t.some(({type:{uid:t}})=>e===t)))},address(){return this.plan.location?{latitude:this.plan.location.latitude,longitude:this.plan.location.longitude,address:this.plan.location.label}:null},center(){return this.plan.location?{center:[this.plan.location.latitude,this.plan.location.longitude],zoom:15}:null},lastState(){return this.plan&&0!==this.plan.states.length?this.plan.states.slice(-1)[0]:null},audience(){if(!this.plan||0===this.plan.states.length)return null;function e(e,t){return{total:e.total+t.total,families:e.families+t.families,women:e.women+t.women,minors:e.minors+t.minors}}return this.plan.states.reduce((t,{audience:i})=>(i.in&&(t.in=e(t.in,i.in)),i.out_positive&&(t.out_positive=e(t.out_positive,i.out_positive)),i.out_abandoned&&(t.out_abandoned=e(t.out_abandoned,i.out_abandoned)),i.out_excluded&&(t.out_excluded=e(t.out_excluded,i.out_excluded)),t),{in:{total:0,families:0,women:0,minors:0},out_positive:{total:0,families:0,women:0,minors:0},out_abandoned:{total:0,families:0,women:0,minors:0},out_excluded:{total:0,families:0,women:0,minors:0}})}},methods:{hasPermission:bo,financeTotal(){return this.plan&&this.plan.finances?this.plan.finances[this.currentFinanceIndex].data.reduce((e,{amount:t})=>e+parseFloat(t),0):0},load(){-1===["loading","loaded"].indexOf(this.status)&&(this.status="loading",this.error=null,Xm(this.$route.params.id).then(e=>{this.plan=e,this.closingData.finances=this.plan.finances.map(e=>({...e,data:e.data.map(e=>({...e,type:e.type.uid}))})),this.status="loaded"}).catch(({user_message:e})=>{this.error=e,this.status="loadingError"}))},escapeHtml(...e){return App.escapeHtml(...e)},dateDiff(...e){return App.dateDiff(...e)},formatDate(...e){return App.formatDate(...e)},showPreviousYear(){this.reachedMinFinanceIndex||(this.currentFinanceIndex+=1)},showNextYear(){this.reachedMaxFinanceIndex||(this.currentFinanceIndex-=1)},setClosingAlertStatus(e){this.closingErrors=[],this.closingAlertStatus=e},checkClosing(){const e=[];for(let t=(new Date).getFullYear();t>=Math.max(2019,this.minYear);t-=1){const i=this.closingData.finances.find(({year:e})=>e===t);i&&0!==i.data.length&&!i.data.some(({realAmount:e})=>void 0===e||null===e)||e.push(t)}e.length>0?this.closingErrors=e.map(e=>`Les dépenses exécutées pour l'année ${e} ne sont pas renseignées, il n'est pas possible de fermer le dispositif.`):this.setClosingAlertStatus("step2")},close(){"pending"!==this.closingStatus&&(this.closingStatus="pending",sh(this.$route.params.id,this.closingData).then(()=>{this.closingStatus="success",Sc({group:"notifications",type:"success",title:"Dispositif fermé",text:"Le dispositif a bien été fermé"}),this.$router.push("/liste-des-dispositifs")}).catch(({fields:e})=>{this.closingStatus="error",this.closingErrors=Object.keys(e).reduce((t,i)=>[...t,...e[i]],[])}))}}},Ch=yh,wh=Ch,kh=(i("e438"),Object(d["a"])(wh,gh,bh,!1,null,"23a8c2ae",null)),xh=kh.exports,Ph=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("NavBar"),i("section",{staticClass:"section-white"},["loaded"!==e.status?i("div",{staticClass:"container"},[e.status&&"loading"!==e.status?"loadingError"===e.status?i("div",[i("div",{staticClass:"notification error full-width"},[i("span",[e._v(e._s(e.error)+". "),i("span",{on:{click:e.load}},[e._v("Réessayer ?")])])])]):e._e():i("div",[e._m(0)])]):e._e(),"loaded"===e.status?i("div",[i("Form",e._b({ref:"form",on:{complete:e.onComplete},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}},"Form",e.formDefinition,!1))],1):e._e()])],1)},$h=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Chargement des données en cours...")])])}],Sh={components:{NavBar:Qo,Form:Oc},data(){const{user:e,topics:t}=fo(),i={status:null,error:null,formData:{association:[]}};return i.formDefinition={title:"Modifier un dispositif",descriptionTitle:"Pourquoi modifier la fiche du dispositif ?",description:"Vous pouvez modifier ou mettre à jour les informations générales relatives au projet que vous pilotez.<br/>\n            <br/>\n            Deux informations pourront en particulier être mises à jour régulièrement :<br/>\n            - les financements<br/>\n            - les contacts référents<br/>\n            <br/>\n            A noter que les indicateurs de suivi du dispositif sont modifiés directement par la structure ou l’association en charge de l’intervention. Par exemple, le nombre de personnes dans le dispositif ou le nombre de ménages ayant accédé à un logement seront directement renseignés par ces derniers.",steps:[{title:"Dispositif",wording:{error:"La modification du dispositif a échoué",submit:"Modifier le dispositif"},sections:[{title:"Intervention",icon:"list",inputs:{name:{type:"text",label:"Nom du dispositif",mandatory:!0},departement:{type:"text",label:"Département d'intervention",mandatory:!0,disabled:!0},startedAt:{type:"date",label:"Date de début",mandatory:!0},expectedToEndAt:{type:"date",label:"Date de fin prévue (facultatif)",mandatory:!1},in_and_out:{type:"radio",label:"Ce dispositif implique-t-il un système d'entrées et de sorties des personnes ?",mandatory:!0,disabled:!0,options:[{value:1,label:"Oui"},{value:0,label:"Non"}]},topics:{type:"checkbox",label:"Champs d'intervention",description:"Les thématiques sélectionnées définissent l'action que vous menez et les indicateurs de suivi associés.",mandatory:!0,disabled:!0,options:t.map(({uid:e,name:t})=>({value:e,label:t}))},goals:{type:"textarea",label:"Objectifs",mandatory:!0,specificProps:{placeholder:"Précisez les objectifs, les enjeux, le contexte du dispositif\n\nPar exemple : résorber le bidonville, scolariser 80% des enfants identités en bidonvilles..."}}}},{title:"Lieu",icon:"map-pin",inputs:{locationType:{type:"radio",label:"L'action se déroule dans le cadre suivant",mandatory:!0,disabled:!0,options:[{value:"shantytowns",label:"sur site(s) : bidonville ou squat"},{value:"location",label:"sur terrain d'insertion"},{value:"housing",label:"dans le logement"},{value:"other",label:"dans plusieurs lieux (hébergement, permanence, rue...)"}]},locationShantytowns:{type:"townList",label:"Sites concernés",mandatory:!0,disabled:!0,condition({locationType:e}){return"shantytowns"===e}},locationAddress:{type:"addressWithLocation",label:"Adresse du terrain d'insertion",mandatory:!0,disabled:!0,condition({locationType:e}){return"location"===e}},locationDetails:{type:"text",label:"Préciser",mandatory:!0,disabled:!0,condition({locationType:e}){return"other"===e}}}},{title:"Contacts",inputs:{government:{type:"autocompleter",label:"Personne au service de l'état en charge du pilotage",mandatory:!0,specificProps:{autocompleter:e=>{const t=Yc("public_establishment"),i=t.then(({users:t})=>t.filter(({first_name:t,last_name:i})=>[t,i].some(t=>e.split(" ").every(e=>-1!==t.toLowerCase().indexOf(e.toLowerCase())))).map(({id:e,first_name:t,last_name:i})=>({id:e,label:`${t} ${i.toUpperCase()}`})));return i.abort=t.abort,i},showCategory:!1,allowMultiple:!1,float:!0}}}},{title:"Financements",inputs:{finances:{label:"Financements",type:"planFunding",mandatory:!1}}}],submit:e=>th(this.$route.params.id,e)}]},"public_establishment"===e.organization.category.uid&&(i.formData.state=[{id:e.id,label:`${e.first_name} ${e.last_name.toUpperCase()}`}]),i},watch:{"formData.association":function(){this.$refs.form&&(this.loadingAssociationContacts=!0,this.$refs.form.getInputById("contact").options=[],0!==this.formData.association.length&&Wc(this.formData.association[0].id).then(({users:e})=>{this.$refs.form.getInputById("contact").options=e.map(({id:e,first_name:t,last_name:i})=>({value:e,label:`${t} ${i.toUpperCase()}`})),this.loadingAssociationContacts=!1}))}},created(){this.load()},methods:{load(){-1===["loading","loaded"].indexOf(this.status)&&(this.status="loading",this.error=null,Xm(this.$route.params.id).then(e=>{this.formDefinition.title="Modifier un dispositif - "+e.name,this.formData.name=e.name,this.formData.departement=`${e.departement.code} - ${e.departement.name}`,this.formData.startedAt=e.started_at,this.formData.expectedToEndAt=e.expected_to_end_at,this.formData.in_and_out=e.in_and_out?1:0,this.formData.topics=e.topics.map(({uid:e})=>e),this.formData.goals=e.goals,this.formData.locationType=e.location_type.id,this.formData.locationShantytowns=e.shantytowns&&e.shantytowns.length>0?e.shantytowns.map(({id:e})=>e):void 0,this.formData.locationAddress=e.location?{address:{label:e.location.address},location:{coordinates:[e.location.latitude,e.location.longitude],zoom:15}}:void 0,this.formData.locationDetails=e.location_details,this.formData.government=[{id:e.government_contacts[0].id,label:`${e.government_contacts[0].first_name} ${e.government_contacts[0].last_name.toUpperCase()}`}],this.formData.association=[{id:e.operator_contacts[0].organization.id,label:e.operator_contacts[0].organization.name}],this.formData.contact=e.operator_contacts[0].id,this.formData.finances=e.finances.map(({year:e,data:t})=>({year:e,data:t.map(({type:{uid:e},amount:t,details:i,realAmount:s})=>({type:e,amount:t,details:i,realAmount:s}))})),this.plan=e,this.status="loaded"}).catch(e=>{this.error=e.user_message,this.status="loadingError"}))},onComplete(){Sc({group:"notifications",type:"success",title:"Dispositif modifié",text:"Le dispositif a bien été mis à jour"}),this.$router.push("/dispositif/"+this.$route.params.id)}}},Eh=Sh,Th=Eh,Ah=(i("b82e"),Object(d["a"])(Th,Ph,$h,!1,null,null,null)),Ih=Ah.exports,Oh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("NavBar"),i("section",{staticClass:"section-white"},["loaded"!==e.status?i("div",{staticClass:"container"},[e.status&&"loading"!==e.status?"loadingError"===e.status?i("div",[i("div",{staticClass:"notification error full-width"},[i("span",[e._v(e._s(e.error)+". "),i("span",{on:{click:e.load}},[e._v("Réessayer ?")])])])]):e._e():i("div",[e._m(0)])]):e._e(),"loaded"===e.status?i("div",[i("Form",e._b({ref:"form",on:{complete:e.onComplete},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}},"Form",e.formDefinition,!1))],1):e._e()])],1)},qh=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Chargement des données en cours...")])])}],Mh={components:{NavBar:Qo,Form:Oc},data(){const e={status:null,error:null,formData:{}};return e.formDefinition={title:"",descriptionTitle:"À quoi sert le suivi ?",description:"Les indicateurs de suivi permettent d’<strong>observer l'évolution de l'accès au droit commun et l'insertion</strong> du groupe de personnes accompagnées. Ces informations facilitent le pilotage local et national.",steps:[{title:"Dispositf",wording:{error:"La déclaration du dispositif a échoué",submit:"Valider"},sections:[{inputs:{date:{type:"date",label:"Date d'actualisation des données",mandatory:!0}}},{title:"Public",icon:"arrow-right",inputs:{audience:{type:"audience",label:"Public",mandatory:!0,specificProps:{},condition({date:e}){return!!e}}}},{title:"Équipe",icon:"users",inputs:{etp:{type:"etp",label:"Nombre d’ETP dédiés par fonction",mandatory:!0,condition({date:e}){return!!e}}}},{title:"Droit commun et ressources",description:"Nombre de personnes avec...",icon:"id-card",inputs:{domiciliation:{type:"number",label:"une domiciliation",mandatory:!1,condition({date:e}){return!!e}},droits_caf:{type:"number",label:"des droits CAF ouverts",mandatory:!1,condition({date:e}){return!!e}},emploi_stable:{type:"number",label:"un emploi stable / ressources suffisantes",mandatory:!1,condition({date:e}){return!!e}}}}],submit:e=>{const t={...e,...e.housing};return delete t.housing,ih(this.$route.params.id,t)}}]},e.varyingSections={health:[{title:"Santé",description:"Nombre de personnes avec...",icon:"user-md",inputs:{ame_valide:{type:"number",label:"une couverture AME valide",mandatory:!1,condition({date:e}){return!!e}},puma_valide:{type:"number",label:"une couverture PUMA valide",mandatory:!1,condition({date:e}){return!!e}},ame_en_cours:{type:"number",label:"une demande AME en cours",mandatory:!1,condition({date:e}){return!!e}},puma_en_cours:{type:"number",label:"une demande PUMA en cours",mandatory:!1,condition({date:e}){return!!e}}}},{title:"",description:"Nombre de personnes ayant fait l'objet d'au moins",icon:"user-md",inputs:{orientation:{type:"number",label:"une orientation vers une structure de santé",mandatory:!1,condition({date:e}){return!!e}},accompagnement:{type:"number",label:"un accompagnement physique vers une structure de santé",mandatory:!1,condition({date:e}){return!!e}}}}],school:[{title:"Éducation et scolarisation",icon:"book-reader",inputs:{scolarisables:{type:"number",label:"Parmi les mineurs, combien sont en âge d'être scolarisés ?",mandatory:!1,condition({date:e}){return!!e}},maternelles:{type:"number",label:"Enfants inscrits en maternelle",mandatory:!1,condition({date:e}){return!!e}},elementaires:{type:"number",label:"Enfants inscrits en élémentaire",mandatory:!1,condition({date:e}){return!!e}},colleges:{type:"number",label:"Enfants inscrits au collège",mandatory:!1,condition({date:e}){return!!e}},lycees:{type:"number",label:"Enfants inscrits au lycée - formation professionnelle",mandatory:!1,condition({date:e}){return!!e}},difficultes:{type:"checkbox",label:"Difficultés éventuelles rencontrées :",mandatory:!1,condition({date:e}){return!!e},options:[{value:"cantine",label:"Cantine"},{value:"place_up2a",label:"Manque de place en UP2A"},{value:"transport",label:"Transport"}]}}}],work:[{title:"Formation et emploi",icon:"briefcase",description:"Nombre de personnes inscrites ou suivies par",inputs:{pole_emploi:{type:"number",label:"Pôle emploi",mandatory:!1,condition({date:e}){return!!e}},pole_emploi_femmes:{type:"number",label:"(dont femmes)",mandatory:!1,condition({date:e}){return!!e}},mission_locale:{type:"number",label:"Mission locale",mandatory:!1,condition({date:e}){return!!e}},mission_locale_femmes:{type:"number",label:"(dont femmes)",mandatory:!1,condition({date:e}){return!!e}}}},{icon:"briefcase",description:"Nombre de personnes ayant",inputs:{contrats:{type:"number",label:"un contrat",mandatory:!1,condition({date:e}){return!!e}},contrats_femmes:{type:"number",label:"(dont femmes)",mandatory:!1,condition({date:e}){return!!e}},formations:{type:"number",label:"une formation",mandatory:!1,condition({date:e}){return!!e}},formations_femmes:{type:"number",label:"(dont femmes)",mandatory:!1,condition({date:e}){return!!e}},autoentrepreneurs:{type:"number",label:"un statut autoentrepreneur",mandatory:!1,condition({date:e}){return!!e}},autoentrepreneurs_femmes:{type:"number",label:"(dont femmes)",mandatory:!1,condition({date:e}){return!!e}},are:{type:"number",label:"l'ARE",mandatory:!1,condition({date:e}){return!!e}},are_femmes:{type:"number",label:"(dont femmes)",mandatory:!1,condition({date:e}){return!!e}}}}],housing:[{title:"Logement",icon:"home",inputs:{housing:{type:"planHousing",label:"",mandatory:!1,condition({date:e}){return!!e}}}}],safety:[{title:"Stabilisation et sécurisation du site",icon:"seedling",inputs:{points_eau:{type:"number",label:"Nombre d'accès réguliers à l'eau potable",mandatory:!1,condition({date:e}){return!!e}},wc:{type:"number",label:"Nombre de sanitaires",mandatory:!1,condition({date:e}){return!!e}},electricite:{type:"number",label:"Nombre d'accès réguliers à l'électricité",mandatory:!1,condition({date:e}){return!!e}},nombre_bennes:{type:"number",label:"Nombre de bennes disponibles pour le ramassage des déchets du site",mandatory:!1,condition({date:e}){return!!e}}}}]},e},created(){this.load()},methods:{hasPermission:bo,load(){-1===["loading","loaded"].indexOf(this.status)&&(this.status="loading",this.error=null,Xm(this.$route.params.id).then(e=>{e.topics.forEach(({uid:e})=>{this.varyingSections[e]&&this.varyingSections[e].forEach(e=>{this.formDefinition.steps[0].sections.push(e)})});const t=this.formDefinition.steps[0].sections.find(({inputs:e})=>void 0!==e.audience);let i=null;if(0===e.states.length)t.title="Qui sont les publics ayant intégré le dispositif ?",t.description="Vous renseignez les indicateurs de suivi pour la première fois. Veuillez porter une attention particulière aux données que vous renseignez ci-dessous : les mises à jour ultérieures seront conditionnées par cette première déclaration.",t.inputs.audience.specificProps.inOnly=!0;else{[i]=e.states.slice(-1);const s=App.formatDate(i.date/1e3,"d/m/y");!0!==e.in_and_out?(t.title=`Quelles ont été les sorties du dispositif depuis la date du ${s} ?`,t.description="Seules les sorties du dispositif sont suivies, car le pilote de l’action au sein des services de l’Etat a renseigné qu’il n’existe pas de système d’entrées et de sorties du dispositif : le dispositif concerne un seul groupe de personne, ayant débuté le projet à la même période.<br/>\n                            Attention : le remplissage de ce tableau a un impact sur le nombre de personnes identifiées dans ce dispositif. Merci de le renseigner avec attention",t.inputs.audience.specificProps.outOnly=!0):(t.title=`Quelles ont été les entrées et sorties du dispositif depuis la date du ${s} ?`,t.description="Les entrées et sorties du dispositif sont suivies, car le pilote de l’action au sein des services de l’Etat a renseigné qu’il existe un système d’entrées et de sorties.<br/>\n                            Attention : le remplissage de ce tableau a un impact sur le nombre de personnes identifiées dans ce dispositif. Merci de le renseigner avec attention"),t.description+=`<br/><br/>\n                        Au ${s}, date de la dernière mise à jour des informations, sont intégrés dans le dispositif :\n                        ${e.audience.families} ménages, ${e.audience.total} personnes dont ${e.audience.women} femmes et ${e.audience.minors} mineurs\n                        `}i&&(this.formData={difficultes:["cantine","place_up2a","transport"].filter(e=>i.education&&(i.education["difficulte_"+e]||i.education["difficculte_"+e])),etp:i.etp.map(({total:e,type:{uid:t}})=>({total:e,type:t}))}),this.formDefinition.title=e.name,this.plan=e,this.status="loaded"}).catch(e=>{this.error=e.user_message,this.status="loadingError"}))},onComplete(){Sc({group:"notifications",type:"success",title:"Indicateurs correctement enregistrés",text:"Le dispositif a bien été mis à jour"}),this.$router.push("/dispositif/"+this.$route.params.id)}}},Dh=Mh,jh=Dh,Nh=(i("0045"),Object(d["a"])(jh,Oh,qh,!1,null,"8f52fc1c",null)),Fh=Nh.exports,Lh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[i("NavBar"),i("section",{staticClass:"section section--white"},[i("div",{staticClass:"container"},["loaded"===e.status?i("div",e._l(e.sections,(function(t){return i("section",{staticClass:"formSection"},[i("header",{staticClass:"formSection-header"},[i("h1",{staticClass:"formSection-title"},[e._v(e._s(t.title))]),i("p",[e._v("Total : "+e._s(e.computeTotal(t.id)))])]),i("div",{staticClass:"panel"},[i("table",{staticClass:"table"},[i("thead",[i("tr",[i("th",[e._v("Département")]),i("th",[e._v(e._s(t.title))])])]),i("tbody",e._l(e.stats.numberOfShantytownOperations[t.id],(function(t){return i("tr",[i("td",[e._v("("+e._s(t.code)+") - "+e._s(t.name))]),i("td",[e._v(e._s(t.total))])])})),0)])])])})),0):e._e(),"loading"===e.status?i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Chargement des données en cours...")])]):e._e(),"loading"!==e.status&&"loaded"!==e.status?i("div",{staticClass:"notification full-width"},[i("span",[e._v(e._s(e.error)+". "),i("a",{attrs:{href:"#"},on:{click:e.load}},[e._v("Réessayer ?")])])]):e._e()])])],1)])},zh=[];function Bh(){return no("/stats")}var Rh={components:{NavBar:Qo},data(){return{status:null,error:null,stats:null,sections:[{id:"creations",title:"Nombre de sites créés"},{id:"updates",title:"Nombre de sites modifiés"},{id:"closings",title:"Nombre de sites fermés"}]}},mounted(){this.load()},methods:{load(){"loaded"!==this.status&&"loading"!==this.status&&(this.status="loading",this.error=null,Bh().then(({statistics:e})=>{this.stats=e,this.status="loaded"}).catch(({user_message:e})=>{this.status="error",this.error=e}))},computeTotal(e){return this.stats.numberOfShantytownOperations[e].reduce((e,{total:t})=>e+parseInt(t,10),0)}}},Vh=Rh,Uh=Vh,Hh=(i("12a5"),Object(d["a"])(Uh,Lh,zh,!1,null,null,null)),Gh=Hh.exports,Wh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[i("NavBar"),i("section",{staticClass:"section section-white",attrs:{id:"form"}},[i("div",{staticClass:"container"},[i("h1",[e._v("Mentions légales")]),i("h3",[e._v("Editeurs")]),i("p",[i("router-link",{attrs:{to:"/"}},[e._v("Résorption bidonvilles")]),e._v(" est édité par la Fabrique numérique du ministère de la transition écologique et solidaire et du ministère de la cohésion des territoires et des relations avec les collectivités territoriales, sise 1 place Carpeaux, 92800 Puteaux, avec l’appui de l’incubateur de services numériques (beta.gouv.fr) de la direction interministérielle du numérique et du système d’information et de communication de l’État (DINSIC).")],1),i("h3",[e._v("Nous joindre")]),e._m(0),i("h3",[e._v("Directeurs de la publication")]),e._m(1),i("h3",[e._v("Prestataire d’hébergement")]),i("p",[e._v("Le site "),i("router-link",{attrs:{to:"/"}},[e._v("resorption-bidonvilles.beta.gouv.fr")]),e._v(" est hébergé par la société OVH"),i("br"),e._v("Code APE 6202A"),i("br"),e._v("N° TVA : FR 22 424 761 419"),i("br"),e._v("Inscrite au RCS Roubaix – Tourcoing 424 761 419 00045")],1),i("p",[e._v("Siège social : 2 rue Kellermann, 59100 Roubaix, France")])])])],1)])},Yh=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",[i("ul",[i("li",[e._v("Par téléphone : +33 (0) 1 40 81 33 60")]),i("li",[e._v("Par mail : "),i("a",{staticClass:"mail",attrs:{href:"#","data-name":"contact","data-domain":"resorption-bidonvilles.beta.gouv","data-tld":"fr",onclick:"window.location.href = 'mailto:' + this.dataset.name + '@' + this.dataset.domain + '.' + this.dataset.tld; return false;"}})])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",[i("ul",[i("li",[e._v("Délégué interministériel à l’hébergement et l’accès au logement")]),i("li",[e._v("La Grande Arche - 92055 La Défense Cedex")])])])}],Jh={components:{NavBar:Qo}},Qh=Jh,Zh=Qh,Kh=(i("30ce"),Object(d["a"])(Zh,Wh,Yh,!1,null,"ed8e96dc",null)),Xh=Kh.exports,ev=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("Skeleton",{attrs:{loader:e.loader},on:{loaded:e.onLoaded},scopedSlots:e._u([{key:"title",fn:function(){return[i("h1",{staticClass:"page-title"},[e._v("Annuaire")]),i("p",{staticClass:"page-subtitle"},[e._v("Cette liste n’est pas exhaustive et regroupe à ce stade les utilisateurs de la plateforme à l’échelle nationale.")])]},proxy:!0},{key:"content",fn:function(){return[null!==e.focusedOrganization?i("Organization",{attrs:{organization:e.focusedOrganization},on:{close:e.resetFocusedOrganization}}):e._e(),i("div",{staticClass:"directory-search"},[i("OrganizationInput",{attrs:{specificProps:{placeholder:"Acteur, structure, ou territoire"}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e.localIsNational?e._e():i("div",{staticClass:"switch"},[i("button",{class:{active:"local"===e.level},on:{click:function(t){return e.setLevel("local")}}},[e._v("Acteurs de mon territoire")]),i("button",{class:{active:"local"!==e.level},on:{click:function(t){return e.setLevel("national")}}},[e._v("Tous les acteurs")])]),i("Table",{staticClass:"directory",attrs:{columns:e.columns,content:e.pageContent,emptyLabel:"Aucun contact répertorié pour les filtres sélectionnés"},on:{click:e.focus}},[i("template",{slot:"aside"},[i("p",{staticClass:"directory-figures"},[e._v(e._s(e.filteredOrganizations.length)+" structure"+e._s(e.filteredOrganizations.length>1?"s":"")+" - "+e._s(e.usersTotal)+" contact"+e._s(e.usersTotal>1?"s":""))])])],2),i("div",{staticClass:"directory-tableAside"},[i("p",[e._v("Vous recherchez un contact public ? "),i("a",{attrs:{href:"https://lannuaire.service-public.fr"}},[e._v("https://lannuaire.service-public.fr")])])])]},proxy:!0}])})],1)},tv=[],iv=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page page--withMargin"},[i("NavBar"),i("section",{staticClass:"section section-white"},[i("div",{staticClass:"container"},[i("header",{staticClass:"page-header"},[i("hgroup",{staticClass:"page-titleContainer"},[e._t("title")],2),"loaded"===e.loading.status?i("div",{staticClass:"page-buttons"},[e._t("buttons")],2):e._e()]),"loading"===e.loading.status&&e.loading.isSlow?i("div",{staticClass:"notification notification--loading full-width"},[e._m(0),e._m(1)]):e._e(),"failed"===e.loading.status?i("div",{staticClass:"notification notification--failure error full-width"},[i("p",{staticClass:"notification-icon"},[i("font-awesome-icon",{attrs:{icon:"times",size:"2x"}})],1),i("p",{staticClass:"notification-content"},[i("span",{staticClass:"notification-title"},[e._v("Le chargement des données a échoué")]),i("br"),i("span",{staticClass:"notification-description"},[e._v(e._s(e.loading.error))])])]):e._e(),"loaded"===e.loading.status?e._t("content",null,{data:e.data}):e._e()],2)])],1)},sv=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",{staticClass:"notification-icon"},[i("img",{attrs:{src:"/img/spinner_dark.svg"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",{staticClass:"notification-content"},[i("span",{staticClass:"notification-title"},[e._v("Chargement des données en cours")])])}];const av=1500;var nv={components:{NavBar:Qo},props:{loader:{type:Function,required:!1}},data(){return{data:null,loading:{status:null,error:null,isSlow:!1,slowTimeout:null}}},mounted(){void 0!==this.loader?this.load():this.loading.status="loaded"},methods:{load(){"loading"!==this.loading.status&&"loaded"!==this.loading.status&&(this.loading.isSlow=!1,this.loading.status="loading",this.loading.error=null,this.loading.slowTimeout=setTimeout(()=>{this.loading.isSlow=!0},av),this.loader().then(e=>{this.$emit("loaded",e),this.data=e,this.loading.status="loaded"}).catch(e=>{this.loading.status="failed",this.loading.error=e&&e.user_message||"Une erreur inconnue est survenue"}).then(()=>{clearTimeout(this.loading.slowTimeout),this.loading.slowTimeout=null}))}}},ov=nv,rv=ov,lv=Object(d["a"])(rv,iv,sv,!1,null,null,null),cv=lv.exports,dv=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"popin"},[i("div",{ref:"wrapper",staticClass:"popin-wrapper"},[i("div",[i("p",{staticClass:"popin-close"},[i("span",{staticClass:"link",on:{click:e.close}},[i("font-awesome-icon",{attrs:{icon:"times",size:"2x"}})],1)]),i("section",{staticClass:"organization-body"},[i("h1",{staticClass:"primary"},[e._v("Structure")]),i("p",[e._v(e._s(e.organization.name))]),i("h1",{staticClass:"primary"},[e._v("Territoire")]),i("p",[e._v(e._s(e.organization.locationName))]),i("h1",{staticClass:"primary"},[e._v("Rôle")]),i("p",{staticStyle:{margin:"5px 0 35px 0"}},[i("span",{staticClass:"role"},[e._v(e._s(e.organization.role))])]),i("h1",[e._v(e._s(e.organization.users.length)+" contact"+e._s(e.organization.users.length>1?"s":""))]),i("div",{staticClass:"organization-users"},e._l(e.organization.users,(function(t){return i("div",{staticClass:"userCard"},[i("h1",[e._v(e._s(t.first_name)+" "+e._s(t.last_name.toUpperCase()))]),i("h2",[e._v("Fonction")]),i("h3",{class:{"userCard-position--empty":!t.position}},[e._v(e._s(t.position||"NC"))]),i("ul",{staticClass:"userCard-infoList"},[i("li",{staticClass:"userCard-info--email"},[i("a",{attrs:{href:"mailto:"+t.email}},[e._v(e._s(t.email))])]),t.phone?i("li",{staticClass:"userCard-info--phone"},[e._v(e._s(t.phone))]):e._e()])])})),0)])])])])},uv=[],pv={props:{organization:{type:Object,required:!0}},mounted(){setTimeout(()=>{document.addEventListener("click",this.checkOutsideClick)},500)},destroyed(){document.removeEventListener("click",this.checkOutsideClick)},methods:{checkOutsideClick(e){this.$refs.wrapper.contains(e.target)||this.close()},close(){this.$emit("close")}}},mv=pv,hv=mv,vv=(i("f090"),Object(d["a"])(hv,dv,uv,!1,null,"eb1c327e",null)),fv=vv.exports;function _v(e){return oo("/statistics/directory-views",{organization:e})}var gv={components:{Skeleton:cv,Table:ml,Organization:fv,OrganizationInput:Kl},data(){return{organizations:[],columns:[{id:"organization",label:"Structure"},{id:"location",label:"Territoire"},{id:"role",label:"Rôle"},{id:"contacts",label:"",icon:"arrow-right"}],local:fo().user.organization.location,level:"local",search:null}},computed:{localIsNational(){return"nation"===this.local.type},parsedOrganizations(){let e=[];return e=this.localIsNational||"national"===this.level?this.organizations:this.organizations.filter(e=>{const t=this.local[this.local.type],i=e.location[this.local.type];return t&&i&&t.code===i.code}),e.map(e=>{let t,i;if(t=null!==e.type.abbreviation?`${e.type.abbreviation} (${e.name})`:null!==e.abbreviation?`${e.abbreviation} (${e.name})`:e.name,"nation"===e.location.type)i="National";else{const t=e.location[e.location.type];i=t?"departement"===e.location.type?`${t.name} (${t.code})`:t.name:""}return{id:e.id,organization:t,location:i,role:`<span class="role">${e.role}</span>`,contacts:e.users.length>0?`<span class="link">${e.users.length} contact${e.users.length>1?"s":""}</span>`:"",raw:{id:e.id,name:t,location:e.location,locationName:i,role:e.role,users:e.users}}})},filteredOrganizations(){if(null===this.search)return this.parsedOrganizations;let e;switch(this.search.data.type.id){case"user":e=({id:e})=>e===this.search.data.organization;break;case"location":e=({raw:{location:e}})=>e[this.search.data.location_type]&&e[this.search.data.location_type].code===this.search.data.id;break;case"organization":e=({id:e})=>e===this.search.data.id;break;default:e=()=>!1}return this.parsedOrganizations.filter(e)},focusedOrganization(){if(!this.$route.params.id)return null;const e=this.parsedOrganizations.find(({id:e})=>e===parseInt(this.$route.params.id,10));return void 0===e?null:e.raw},pageContent(){return this.filteredOrganizations.slice(this.pageBeginning-1,this.pageEnd)},usersTotal(){return this.filteredOrganizations.reduce((e,t)=>e+t.raw.users.length,0)}},watch:{focusedOrganization(){null!==this.focusedOrganization&&_v(this.focusedOrganization.id)}},methods:{loader:Ro,onLoaded({organizations:e}){this.organizations=e},setLevel(e){this.level!==e&&(this.level=e)},focus({raw:e}){this.$router.push("/annuaire/"+e.id)},resetFocusedOrganization(){this.$router.push("/annuaire")}}},bv=gv,yv=bv,Cv=(i("e744"),Object(d["a"])(yv,ev,tv,!1,null,null,null)),wv=Cv.exports,kv=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[i("NavBar"),"loading"===e.state?i("section",{staticClass:"section section-white"},[e._m(0)]):e._e(),"error"===e.state?i("section",{staticClass:"section section-white"},[i("div",{staticClass:"container"},[i("div",{staticClass:"notification error full-width"},[i("span",[e._v(e._s(e.error)+". "),i("a",{attrs:{href:"#"},on:{click:e.retryLoading}},[e._v("Réessayer ?")])])])])]):e._e(),"loaded"===e.state?i("section",{staticClass:"section section-white"},[null!==e.toBeDeleted?i("CommentDeletion",{attrs:{comment:e.toBeDeleted},on:{close:e.closePopin,deleted:e.onCommentDeleted}}):e._e(),i("div",{staticClass:"container"},[i("header",[e._m(1),i("SlideNote",{staticClass:"userActivity-rule",attrs:{title:"Règles de modération d'un commentaire"}},[i("template",{slot:"content"},[i("h1",[e._v("En tant qu'administrateur, vous êtes en charge de la modération des commentaires.")]),i("p",[e._v("Vous pouvez supprimer un commentaire ou demander à son auteur de le modifier s'il ne respecte pas les règles suivantes : "),i("ul",[i("li",[e._v("être neutre et factuel ;")]),i("li",[e._v("ne pas collecter des données personnelles (nom, condamnation judiciaire...) de personnes ou groupes, porter une attention particulière aux personnes habitant ou issues d'un bidonville ;")]),i("li",[e._v("ne doit pas être subjectif, insultant ou inapproprié.")])])]),i("p",[e._v("Pour plus d'informations :"),i("br"),i("router-link",{staticClass:"link",attrs:{to:"/typologie-des-acces"}},[i("font-awesome-icon",{attrs:{icon:"file-pdf"}}),e._v(" Guide des accès et de l'administrateur")],1),i("br"),i("router-link",{staticClass:"link",attrs:{to:"/charte-d-engagement"}},[i("font-awesome-icon",{attrs:{icon:"file-pdf"}}),e._v(" Charte d'engagement de l'utilisateur")],1)],1)])],2),i("div",{staticClass:"switch"},[i("button",{class:{active:"all"===e.filter},on:{click:function(t){return e.show("all")}}},[e._v("Tout")]),i("button",{class:{active:"shantytown"===e.filter},on:{click:function(t){return e.show("shantytown")}}},[e._v("Modifications")]),i("button",{class:{active:"comment"===e.filter},on:{click:function(t){return e.show("comment")}}},[e._v("Commentaires")])])],1),i("Table",{staticClass:"userActivity",attrs:{columns:e.columns,content:e.parsedActivities,emptyLabel:"Aucune activité trouvée pour les filtres sélectionnés"},on:{click:e.onRowClick},scopedSlots:e._u([{key:"date",fn:function(t){return[i("strong",[e._v(e._s(t.row.date))]),i("br"),e._v("à "+e._s(t.row.time))]}},{key:"author",fn:function(t){return[i("font-awesome-icon",{staticClass:"link",attrs:{icon:"user"}}),e._v(" "),i("router-link",{staticClass:"link",attrs:{"data-group":"link",to:"/annuaire/"+t.row.author.organization}},[e._v(e._s(t.row.author.name))])]}},{key:"activity",fn:function(t){return[i("span",{staticClass:"userActivity-action"},[i("font-awesome-icon",{attrs:{icon:t.row.icon}}),e._v(" "+e._s(t.row.action)+" site : "+e._s(t.row.address)+" ")],1),void 0!==t.row.content?i("div",{staticClass:"userActivity-content",domProps:{innerHTML:e._s(t.row.content)}}):e._e(),void 0!==t.row.comment?i("div",{staticClass:"userActivity-remove"},[i("span",{staticClass:"link",on:{click:function(i){return e.confirmCommentDeletion(t.row,i)}}},[i("font-awesome-icon",{attrs:{icon:"trash-alt"}}),e._v(" Supprimer")],1)]):e._e(),e._l(t.row.diff,(function(s){return t.row.diff?i("p",{staticClass:"changelog"},[i("span",{staticClass:"changelog-name"},[e._v(e._s(s.field)+" :")]),i("br"),i("span",{staticClass:"changelog-oldValue",class:{"changelog-value--unknown":!s.oldValue}},[e._v(e._s(s.oldValue||"non renseigné"))]),e._v(", "),i("span",{staticClass:"changelog-newValue",class:{"changelog-value--unknown":!s.newValue}},[e._v(e._s(s.newValue||"non renseigné"))])]):e._e()}))]}}],null,!1,2101574153)})],1)],1):e._e()],1)])},xv=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Chargement des données en cours...")])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("hgroup",[i("h3",[e._v("Historique des activités")])])])}];function Pv(e={}){let t="";return Object.keys(e).length>0&&(t="filters=",t+=Object.keys(e).map(t=>`${t}:${encodeURIComponent(e[t])}`).join(",")),no("/user-activities?"+t)}var $v={components:{NavBar:Qo,Table:ml,CommentDeletion:wp,SlideNote:Pc},data(){return{activities:[],error:null,state:null,toBeDeleted:null,filter:"all"}},computed:{columns(){return[{id:"date",label:"Date"},{id:"author",label:"Auteur"},{id:"activity",label:"Activités",..."shantytown"===this.filter?{filters:[{label:"Déclaration",value:"creation"},{label:"Modification",value:"update"},{label:"Fermeture",value:"closing"}],filterFn:(e,t)=>-1!==t.map(({value:e})=>e).indexOf(e.rawAction)}:{}}]},filteredActivities(){return"all"===this.filter?this.activities:this.activities.filter(({entity:e})=>e===this.filter)},parsedActivities(){return this.filteredActivities.map((e,t)=>{const i={index:t,rawAction:e.action,rawDate:e.date,rawShantytown:e.shantytown,date:App.formatDate(e.date,"d/m/y"),time:App.formatDate(e.date,"h:i"),author:e.author,icon:"comment"===e.entity?"comment":"pencil-alt",shantytown:e.shantytown.id,address:`${e.shantytown.usename}, ${e.shantytown.city}`},s={creation:"Déclaration du",update:"Modification du",closing:"Fermeture du"};return"comment"===e.entity?(i.action="Commentaire sur le",i.content=e.content,i.comment=e.comment_id):(i.action=s[e.action],i.diff=e.diff),i})}},created(){this.load()},methods:{load(){-1!==[null,"error"].indexOf(this.state)&&(this.state="loading",this.error=null,Pv().then(e=>{this.activities=e,this.state="loaded"}).catch(({user_message:e})=>{this.error=e,this.state="error"}))},retryLoading(){this.load()},formatDate(...e){return window.App.formatDate.apply(window,e)},onRowClick(e){this.$router.push("/site/"+e.shantytown)},confirmCommentDeletion(e,t){return this.toBeDeleted={index:e.index,id:e.comment,shantytown:e.rawShantytown,author:e.author,date:e.rawDate,content:e.content},t.stopPropagation(),!1},closePopin(){this.toBeDeleted=null},onCommentDeleted(){this.activities.splice(this.toBeDeleted.index,1),this.toBeDeleted=null,Sc({group:"notifications",type:"success",title:"Commentaire supprimé",text:"L'auteur du commentaire en a été notifié par email"})},show(e){this.filter=e}}},Sv=$v,Ev=Sv,Tv=(i("3a02"),Object(d["a"])(Ev,kv,xv,!1,null,null,null)),Av=Tv.exports,Iv=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("PublicLayout",{attrs:{stickyHeader:!1}},[i("PublicContainer",{staticClass:"py-16"},[i("div",[i("h1",{staticClass:"text-display-xl"},[e._v("Statistiques")]),i("div",[e._v(" Depuis l'ouverture nationale de la plateforme en juin 2019 ")])]),i("StatsSection",{staticClass:"mt-16",attrs:{title:"Utilisateurs"}},[i("StatsBlock",{attrs:{title:e.numberOfDepartements,icon:"flag",subtitle:"départements de France métropolitaine",info:"Soit tous les départements concernés par le phénomène de squats ou bidonvilles."}}),i("StatsBlock",{attrs:{title:e.numberOfCollaboratorAndAssociationUsers,icon:"users",subtitle:"utilisateurs institutionnels et associatifs",info:e.numberOfPublicEstablishments+" services de l'État, "+e.numberOfTerritorialCollectivities+" collectivités territoriales, "+e.numberOfAssociations+" associations"}}),i("StatsBlock",{attrs:{title:e.numberOfNewUsers.total,icon:"user-plus",subtitle:"nouveaux utilisateurs en "+e.numberOfNewUsers.month.toLowerCase()}})],1),null!==e.numberOfNewUsersPerMonth?i("div",[i("h2",{staticClass:"text-display-lg text-secondary mt-16"},[e._v(" Nombre d' utilisateurs depuis "+e._s(e.numberOfNewUsersPerMonth[0].month.toLowerCase())+" ")]),i("TrendChart",{staticClass:"stats-chart",attrs:{datasets:e.usersEvolutionDatasets,labels:e.usersEvolutionLabels,grid:{verticalLines:!0,horizontalLines:!0},max:e.usersEvolutionMax,min:0}})],1):e._e(),i("StatsSection",{staticClass:"mt-16",attrs:{title:"Usage"}},[i("StatsBlock",{attrs:{title:e.numberOfExports,icon:"file-download",subtitle:"extractions de données réalisées",info:"Les exports Excel permettent aux acteurs locaux d'utiliser et d'analyser les données afin de suivre, communiquer et optimiser les actions de résorption depuis le 15/11/2019."}}),i("StatsBlock",{attrs:{title:e.numberOfComments,icon:"comment",subtitle:"commentaires créés",info:"Au delà du suivi des chiffrés, les commentaires permettent de suivre et de partager des informations qualitative utiles dans une action multi-partenariale."}}),i("StatsBlock",{attrs:{title:e.numberOfDirectoryViews,icon:"address-book",subtitle:"fiches contact consultées",info:"L'annuaire permet d'accéder aux coordonnées de tous les utilisateurs de la plateforme. Son utilisation participe à la mise en réseau partenaires locaux ou des pairs depuis le 15/11/2019"}})],1),i("StatsSection",{staticClass:"mt-16",attrs:{title:"Fréquence de mise à jour"},scopedSlots:e._u([{key:"info",fn:function(){return[i("span",{staticClass:"text-secondary"},[i("font-awesome-icon",{attrs:{icon:"sync"}})],1),e._v(" La mise à jour régulière des données garantissent des informations justes à tous les acteurs.")]},proxy:!0},{key:"default",fn:function(){return[i("StatsBlock",{attrs:{title:e.meanTimeBeforeCreationDeclaration,subtitle:"jours entre l'installation d'un bidonville ou squat et sa déclaration",info:"En moyenne, depuis le 01/09/2019."}}),i("StatsBlock",{attrs:{title:e.meanTimeBeforeClosingDeclaration,subtitle:"jours entre la fermeture du site et sa déclaration",info:"En moyenne, depuis le 01/09/2019."}}),i("StatsBlock",{attrs:{title:e.numberOfShantytownOperations,subtitle:"bidonvilles ou squats mis à jour",info:"Toutes opérations confondues : création, modification, fermeture"}})]},proxy:!0}])})],1)],1)},Ov=[],qv=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"text-display-lg"},[e._v(" "+e._s(e.title)+" "),i("span",{staticClass:"text-secondary"},[e.icon?i("font-awesome-icon",{attrs:{icon:e.icon}}):e._e()],1)]),i("div",{staticClass:"text-display-sm"},[e._v(e._s(e.subtitle))]),i("div",{staticClass:"text-sm"},[e._v(e._s(e.info))])])},Mv=[],Dv={props:{title:{type:[String,Number],required:!0},subtitle:{type:String,required:!0},info:{type:String,required:!1},icon:{type:String,required:!1}}},jv=Dv,Nv=Object(d["a"])(jv,qv,Mv,!1,null,null,null),Fv=Nv.exports,Lv=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("h2",{staticClass:"text-display-lg text-secondary"},[e._v(e._s(e.title))]),e._t("info"),i("div",{staticClass:"grid grid-cols-1 md:grid-cols-3 gap-16 mt-8"},[e._t("default")],2)],2)},zv=[],Bv={props:{title:{required:!0,type:String}}},Rv=Bv,Vv=Object(d["a"])(Rv,Lv,zv,!1,null,null,null),Uv=Vv.exports,Hv={components:{PublicLayout:oa,PublicContainer:As,StatsSection:Uv,StatsBlock:Fv},data(){return{state:null,error:null,stats:null}},created(){this.load()},computed:{numberOfDepartements(){return this.stats?this.stats.numberOfDepartements:"..."},numberOfCollaboratorAndAssociationUsers(){return this.stats?this.stats.numberOfCollaboratorAndAssociationUsers:"..."},numberOfTerritorialCollectivities(){return this.stats?this.stats.numberOfCollaboratorAndAssociationOrganizations.territorial_collectivity||0:"..."},numberOfAssociations(){return this.stats?this.stats.numberOfCollaboratorAndAssociationOrganizations.association||0:"..."},numberOfPublicEstablishments(){return this.stats?this.stats.numberOfCollaboratorAndAssociationOrganizations.public_establishment||0:"..."},numberOfExports(){return this.stats?this.stats.numberOfExports:"..."},numberOfComments(){return this.stats?this.stats.numberOfComments:"..."},numberOfDirectoryViews(){return this.stats?this.stats.numberOfDirectoryViews:"..."},numberOfNewUsersPerMonth(){return this.stats&&this.stats.numberOfNewUsersPerMonth||null},usersEvolutionDatasets(){if(null===this.numberOfNewUsersPerMonth)return[];const e=this.numberOfNewUsersPerMonth.reduce((e,{total:t},i)=>0===i?[parseInt(t,10)]:[...e,parseInt(t,10)+e[e.length-1]],[]);return[{data:e,smooth:!0,fill:!0}]},usersEvolutionMax(){if(null===this.numberOfNewUsersPerMonth)return 0;const e=this.numberOfNewUsersPerMonth.reduce((e,{total:t})=>Math.max(e,t),0);return 10*Math.ceil(e/10)},usersEvolutionLabels(){return null===this.numberOfNewUsersPerMonth?{xLabels:[],yLabels:10}:{xLabels:this.numberOfNewUsersPerMonth.map(({month:e})=>e),yLabels:this.usersEvolutionMax/10+1,yLabelsTextFormatter:e=>e.toFixed(1)}},numberOfNewUsers(){return this.stats&&this.stats.numberOfNewUsersPerMonth?this.stats.numberOfNewUsersPerMonth.slice(-1)[0]:{total:"...",month:"..."}},meanTimeBeforeCreationDeclaration(){return this.stats?Math.round(this.stats.meanTimeBeforeCreationDeclaration.average)||"?":"..."},meanTimeBeforeClosingDeclaration(){return this.stats?Math.round(this.stats.meanTimeBeforeClosingDeclaration.average)||"?":"..."},numberOfShantytownOperations(){return this.stats?this.stats.numberOfShantytownOperations:"..."}},methods:{load(){"loading"!==this.state&&(this.state="loading",this.error=null,Bh().then(({statistics:e})=>{this.stats=e,this.state="loaded"}).catch(({user_message:e})=>{this.error=e,this.state="error"}))}}},Gv=Hv,Wv=Object(d["a"])(Gv,Iv,Ov,!1,null,null,null),Yv=Wv.exports,Jv=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[i("NavBar"),"loading"===e.state?i("section",{staticClass:"section section-white"},[e._m(0)]):e._e(),"error"===e.state?i("section",{staticClass:"section section-white"},[i("div",{staticClass:"container"},[i("div",{staticClass:"notification error full-width"},[i("span",[e._v(e._s(e.error)+". "),i("a",{attrs:{href:"#"},on:{click:e.retryLoading}},[e._v("Réessayer ?")])])])])]):e._e(),"loaded"===e.state?i("section",{staticClass:"section section-white"},[i("div",{staticClass:"container"},[i("header",[i("div",[e._m(1),i("p",[e._v("L'ensemble des commentaires sur votre territoire (département ou région)")]),e.canSubmitHighComment?i("SlideNote",{attrs:{title:"Écrire un commentaire 'Territoire'",opened:!0,icon:"comment"}},[i("template",{slot:"content"},[i("p",[e._v('Les commentaires "territoires" permettent de partager des informations sur le pilotage, la coordination et l\'organisation retenus au niveau local.')]),i("p",[i("span",[i("strong",[e._v("Territoire(s) concerné(s) par votre commentaire :")])]),i("br"),i("ul",{staticClass:"input--checkbox"},e._l(e.allowedDepartements,(function(t,s){return i("li",{staticClass:"input--checkbox-option"},[i("label",{attrs:{for:"input"+e._uid+"-"+s}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.highCovidComment.data.departements,expression:"highCovidComment.data.departements"}],staticClass:"input input--checkbox",attrs:{type:"checkbox",id:"input"+e._uid+"-"+s,name:"input"+e._uid,disabled:e.highCovidComment.pending||e.allowedDepartements.length<=1},domProps:{value:t.code,checked:Array.isArray(e.highCovidComment.data.departements)?e._i(e.highCovidComment.data.departements,t.code)>-1:e.highCovidComment.data.departements},on:{change:function(i){var s=e.highCovidComment.data.departements,a=i.target,n=!!a.checked;if(Array.isArray(s)){var o=t.code,r=e._i(s,o);a.checked?r<0&&e.$set(e.highCovidComment.data,"departements",s.concat([o])):r>-1&&e.$set(e.highCovidComment.data,"departements",s.slice(0,r).concat(s.slice(r+1)))}else e.$set(e.highCovidComment.data,"departements",n)}}}),e._v(" "+e._s(t.code+" - "+t.name)+" ")])])})),0)]),i("p",[i("span",[i("strong",[e._v("Votre commentaire :")])]),i("br"),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.highCovidComment.data.description,expression:"highCovidComment.data.description"}],staticClass:"input input--textarea",attrs:{disabled:e.highCovidComment.pending,readonly:e.highCovidComment.pending},domProps:{value:e.highCovidComment.data.description},on:{input:function(t){t.target.composing||e.$set(e.highCovidComment.data,"description",t.target.value)}}})]),null!==e.highCovidComment.error?i("p",{staticClass:"error"},[i("span",{staticClass:"error"},[e._v(e._s(e.highCovidComment.error.message))])]):e._e(),i("p",[i("button",{staticClass:"form-stepButton button",attrs:{disabled:e.highCovidComment.pending},on:{click:e.submitHighCovidComment}},[e.highCovidComment.pending?i("img",{attrs:{src:"/img/spinner_light.svg",width:"20"}}):i("span",[e._v("Envoyer")])])])])],2):e._e()],1),i("div",{staticClass:"switch"},[i("button",{class:{active:"all"===e.filter},on:{click:function(t){return e.setFilter("all")}}},[e._v("Tous")]),i("button",{class:{active:"regular"===e.filter},on:{click:function(t){return e.setFilter("regular")}}},[e._v('Commentaires "Sites"')]),i("button",{class:{active:"high"===e.filter},on:{click:function(t){return e.setFilter("high")}}},[e._v('Commentaires "Territoire"')])])]),i("Table",{staticClass:"userActivity",attrs:{columns:e.columns,content:e.parsedActivities,emptyLabel:"Aucune activité trouvée pour les filtres sélectionnés"},on:{click:e.onRowClick},scopedSlots:e._u([{key:"date",fn:function(t){return[i("strong",[e._v(e._s(t.row.date))]),i("br"),e._v("à "+e._s(t.row.time))]}},{key:"author",fn:function(t){return[i("font-awesome-icon",{staticClass:"link",attrs:{icon:"user"}}),e._v(" "),i("router-link",{staticClass:"link",attrs:{"data-group":"link",to:"/annuaire/"+t.row.author.organization}},[e._v(e._s(t.row.author.name))])]}},{key:"activity",fn:function(t){return[t.row.covid?i("span",{staticClass:"userActivity-action"},[i("font-awesome-icon",{attrs:{icon:t.row.icon}}),e._v(" "+e._s(t.row.action)+" site : "+e._s(t.row.address)+" ")],1):i("span",{staticClass:"userActivity-action"},[i("font-awesome-icon",{attrs:{icon:t.row.icon}}),e._v(" Commentaire sur le territoire : "+e._s(t.row.highCovid.departements.map((function(e){var t=e.code;return t})).join(", "))+" ")],1),i("div",{staticClass:"userActivity-content"},[t.row.covid?i("p",e._l(e.covidTags,(function(s){return!0===t.row.covid[s.prop]?i("span",{class:"rbTag rbTag--"+s.type},[e._v(e._s(s.label))]):e._e()})),0):e._e(),t.row.covid?i("p",[e._v("Date de l'intervention : "+e._s(e.formatDate(t.row.covid.date)))]):e._e(),i("p",{domProps:{innerHTML:e._s(t.row.content)}})])]}}],null,!1,240379794)})],1)]):e._e()],1)])},Qv=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Chargement des données en cours...")])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("hgroup",[i("h3",[e._v("Covid-19")])])}];function Zv(e){return oo("/high-covid-comments",e)}var Kv={components:{NavBar:Qo,Table:ml,SlideNote:Pc},data(){const{user:e}=fo();return{user:e,filter:"all",activities:[],allowedDepartements:[],highCovidComment:{pending:!1,error:null,data:{description:"",departements:[]}},error:null,state:null,covidTags:[{prop:"equipe_maraude",label:"Équipe de maraude",type:"warning"},{prop:"equipe_sanitaire",label:"Équipe sanitaire",type:"warning"},{prop:"equipe_accompagnement",label:"Équipe d'accompagnement",type:"warning"},{prop:"distribution_alimentaire",label:"Distribution d'aide alimentaire",type:"warning"},{prop:"personnes_orientees",label:"Personne(s) orientée(s) vers un centre d'hébergement spécialisé (desserrement)",type:"error"},{prop:"personnes_avec_symptomes",label:"Personne(s) avec des symptômes Covid-19",type:"error"},{prop:"besoin_action",label:"Besoin d'une action prioritaire",type:"error"}]}},computed:{columns(){return[{id:"date",label:"Date"},{id:"author",label:"Auteur"},{id:"activity",label:"Activités"}]},filteredActivities(){return"all"===this.filter?this.activities:this.activities.filter(e=>"regular"===this.filter?null!==e.covid:null!==e.highCovid)},parsedActivities(){return this.filteredActivities.map((e,t)=>({index:t,rawAction:e.action,rawDate:e.date,rawShantytown:e.shantytown,date:App.formatDate(e.date,"d/m/y"),time:App.formatDate(e.date,"h:i"),author:e.author,icon:"comment"===e.entity?"comment":"pencil-alt",shantytown:e.shantytown.id,address:`${e.shantytown.usename}, ${e.shantytown.city}`,action:"Commentaire sur le",content:e.content,comment:e.comment_id,covid:e.covid,highCovid:e.highCovid}))},canSubmitHighComment(){return"nation"!==this.user.organization.location.type&&"nation"!==go("covid_comment.list").geographic_level}},created(){this.load()},methods:{load(){if(-1===[null,"error"].indexOf(this.state))return;let e;switch(this.state="loading",this.error=null,this.user.organization.location.type){default:case"nation":e=Promise.resolve({departements:[]});break;case"region":e=uh(this.user.organization.location.region.code);break;case"epci":e=ph(this.user.organization.location.epci.code);break;case"departement":case"city":e=Promise.resolve({departements:[this.user.organization.location.departement]})}Promise.all([Pv({covid:"1"}),e]).then(([e,{departements:t}])=>{this.activities=e,this.allowedDepartements=t,this.highCovidComment.data.departements=t.map(({code:e})=>e),this.state="loaded"}).catch(({user_message:e})=>{this.error=e,this.state="error"})},retryLoading(){this.load()},formatDate(...e){return window.App.formatDate.apply(window,e)},onRowClick(e){e.shantytown&&this.$router.push("/site/"+e.shantytown)},setFilter(e){this.filter=e},submitHighCovidComment(){this.highCovidComment.pending||(this.highCovidComment.pending=!0,this.highCovidComment.error=null,Zv(this.highCovidComment.data).then(()=>{this.highCovidComment.pending=!1,this.state=null,this.load()}).catch(({user_message:e,fields:t})=>{this.highCovidComment.pending=!1,this.highCovidComment.error={message:e,fields:t}}))}}},Xv=Kv,ef=Xv,tf=(i("a897"),Object(d["a"])(ef,Jv,Qv,!1,null,null,null)),sf=tf.exports,af=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("NavBar"),i("section",{staticClass:"section section-white"},[i("div",{staticClass:"container"},[i("Changelog",{attrs:{log:e.changelog,error:e.error},on:{done:e.markChangelogAsRead}})],1)])],1)},nf=[],of=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"popin"},[i("div",{ref:"wrapper",staticClass:"popin-wrapper"},[i("div",[i("h1",{staticClass:"changelog-title"},[e._v("Des nouveautés sont disponibles sur la plateforme")]),i("h2",{staticClass:"changelog-date"},[e._v(e._s(e.log.date))]),i("section",{staticClass:"changelog-body"},[i("div",{staticClass:"carousel"},[i("div",{ref:"carousel",staticClass:"carousel-container"},e._l(e.log.items,(function(e){return i("img",{attrs:{src:e.image,alt:e.title}})})),0),i("div",{staticClass:"carousel-bullets"},e._l(e.log.items,(function(t,s){return i("span",{staticClass:"carousel-bullet",class:{"carousel-bullet--active":s===e.currentItemIndex}})})),0)]),i("div",{staticClass:"changelog-content"},[i("header",[i("p",{staticClass:"changelog-page"},[i("span",[e._v(e._s(e.currentItemIndex+1))]),e._v(" / "+e._s(e.log.items.length))]),i("h1",{staticClass:"changelog-itemTitle"},[e._v(e._s(e.currentItem.title))])]),i("div",{domProps:{innerHTML:e._s(e.currentItem.description)}})])]),i("footer",{staticClass:"changelog-footer"},[i("p",[i("span",{staticClass:"link",on:{click:e.previous}},[e._v(e._s(e.currentItemIndex>0?"Précédent":""))])]),i("p",[null!==e.dataError?i("span",{staticClass:"error"},[e._v(e._s(e.dataError))]):e._e(),i("br"),i("button",{staticClass:"button",on:{click:e.next}},[e._v(e._s(e.nextLabel))])])])])])])},rf=[],lf={props:{log:{type:Object,required:!0},error:{type:String,required:!1,default:null}},data(){return{dataError:this.error?this.error:null,currentItemIndex:0}},watch:{error(){this.dataError=this.error?this.error:null}},computed:{nextLabel(){return this.currentItemIndex===this.log.items.length-1?"Accéder à la plateforme":"Suite"},currentItem(){return this.log.items[this.currentItemIndex]}},methods:{previous(){this.dataError=null,0!==this.currentItemIndex&&(this.currentItemIndex-=1,this.syncCarousel())},next(){this.dataError=null,this.currentItemIndex!==this.log.items.length-1?(this.currentItemIndex+=1,this.syncCarousel()):this.$emit("done")},syncCarousel(){const e=this.$refs.carousel.firstChild;e.style.marginLeft=-1*e.offsetWidth*this.currentItemIndex+"px"}}},cf=lf,df=cf,uf=(i("7f76"),Object(d["a"])(df,of,rf,!1,null,"5435c2dc",null)),pf=uf.exports,mf={data(){const{changelog:e}=fo();return{error:null,changelog:e}},components:{NavBar:Qo,Changelog:pf},methods:{markChangelogAsRead(){yo(this.changelog.app_version).then(()=>{ho().then(()=>{this.$router.push("/")}).catch(({user_message:e})=>{this.error=e})}).catch(({user_message:e})=>{this.error=e})}}},hf=mf,vf=hf,ff=Object(d["a"])(vf,af,nf,!1,null,null,null),_f=ff.exports,gf=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[i("NavBar"),i("section",{staticClass:"section section-white"},[i("div",{staticClass:"container"},[e._m(0),i("p",[i("strong",[e._v("Avant d'accéder à la plateforme, merci de lire et de valider la "),i("a",{attrs:{href:e.charte.fichier}},[e._v("charte d'engagement")])]),e._v(". Le respect des règles de confidentialité des informations est primordial vis à vis des habitants et de l'action publique.")]),e._m(1),e._m(2),i("p",[e._v("Le non respect de ces règles peut entraîner des avertissements ou la suppression de votre accès à la plateforme numérique.")]),i("p",[i("label",{attrs:{for:"charte"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],staticClass:"input input--checkbox",attrs:{type:"checkbox",id:"charte",value:"1",disabled:"pending"===e.form.status},domProps:{checked:Array.isArray(e.data)?e._i(e.data,"1")>-1:e.data},on:{change:function(t){var i=e.data,s=t.target,a=!!s.checked;if(Array.isArray(i)){var n="1",o=e._i(i,n);s.checked?o<0&&(e.data=i.concat([n])):o>-1&&(e.data=i.slice(0,o).concat(i.slice(o+1)))}else e.data=a}}}),e._v(" Je m’engage à respecter les règles et obligations de la "),i("a",{attrs:{href:e.charte.fichier}},[e._v("charte d’engagement")]),e._v(" auprès des services de l’État, dans le cadre de l’accès à la plateforme Résorption bidonvilles. ")])]),"error"===e.form.status?i("p",{staticClass:"error"},[i("span",{staticClass:"error"},[e._v("Une erreur est survenue :")]),i("br"),i("span",{staticClass:"error"},[e._v(e._s(e.form.error))])]):e._e(),i("p",[i("button",{staticClass:"button",attrs:{disabled:"pending"===e.form.status||!0!==e.data},on:{click:e.submit}},["pending"!==e.form.status?i("span",[e._v("Accéder à la plateforme")]):i("img",{attrs:{src:"/img/spinner_light.svg",width:"20"}})])])])])],1)])},bf=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("header",[i("h1",[e._v("Signature de la charte d'engagement")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",[i("strong",[e._v("Selon la charte d'engagement, l'utilisateur s'engage à :")]),i("ul",[i("li",[e._v("utiliser des paramètres de connexion (identifiants et mots de passe) personnels et confidentiels.")]),i("li",[e._v("exploiter les informations présentes sur la plateforme exclusivement à des fins professionnelles, pour les besoins propres et internes de son organisation.")])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",[i("strong",[e._v("Ainsi, l'utilisateur s'interdit de :")]),i("ul",[i("li",[e._v("transmettre les identifiants et mots de passe à un tiers.")]),i("li",[e._v("communiquer les informations présentes sur la plateforme sous aucune forme (orale, écrite, copie) à un tiers.")])])])}],yf={components:{NavBar:Qo},data(){const{user:{id:e},version_charte_engagement:t}=fo();return{user:e,charte:t,data:!1,form:{status:null,error:null}}},methods:{submit(){"pending"!==this.form.status&&(this.form.status="pending",this.form.error=null,Uo(this.user,this.charte.version).then(()=>{_o("user.charte_engagement_a_jour",!0),this.$router.push("/")}).catch(({user_message:e})=>{this.form.status="error",this.form.error=e}))}}},Cf=yf,wf=Cf,kf=(i("e451"),Object(d["a"])(wf,gf,bf,!1,null,"62aa3c67",null)),xf=kf.exports;let Pf=null;function $f(e,t,i,s){for(let a=0;a<e.length;a+=1){const{checker:n,target:o,saveEntryPoint:r}=e[a];if(!0!==n(t,i))return!1!==r&&(Pf=t),void s(o)}s()}function Sf(e){const{permissions:t}=e.meta;return!t||t.every(e=>bo(e))}function Ef(){const{user:{position:e}}=fo();return""!==e}function Tf(){const{changelog:e}=fo();return null===e}const Af={anonymous:$f.bind(void 0,[{checker:()=>!Po(),target:"/",saveEntryPoint:!1}]),loggedIn:$f.bind(void 0,[{checker:Po,target:"/connexion"}]),loaded:$f.bind(void 0,[{checker:Po,target:"/connexion"},{checker:mo,target:"/launcher"},{checker:Sf,target:"/",saveEntrypoint:!1}]),loadedAndUpgraded:$f.bind(void 0,[{checker:Po,target:"/connexion"},{checker:mo,target:"/launcher"},{checker:Sf,target:"/",saveEntrypoint:!1},{checker:Co,target:"/signature-charte-engagement"},{checker:Ef,target:"/mise-a-niveau"}]),loadedAndUpToDate:$f.bind(void 0,[{checker:Po,target:"/connexion"},{checker:mo,target:"/launcher"},{checker:Sf,target:"/",saveEntrypoint:!1},{checker:Co,target:"/signature-charte-engagement"},{checker:Ef,target:"/mise-a-niveau"},{checker:Tf,target:"/nouvelle-version"}])};function If(){return!0!==Po()?$o()?"/connexion":"/landing":!0!==mo()?"/launcher":"/cartographie"}const Of=new n["a"]({scrollBehavior:e=>e.hash?{selector:e.hash}:{x:0,y:0},routes:[{path:"/",redirect:If,meta:{analyticsIgnore:!0}},{path:"/landing",component:Wn,beforeEnter:Af.anonymous},{path:"/statistiques-publiques",component:Yv,beforeEnter:Af.anonymous},{path:"/connexion",component:Nc,beforeEnter:Af.anonymous},{path:"/contact",component:$d,beforeEnter:Af.anonymous},{path:"/launcher",component:Vu,beforeEnter:Af.loggedIn},{path:"/nouvelle-version",component:_f,beforeEnter:Af.loadedAndUpgraded},{path:"/deconnexion",beforeEnter:(e,t,i)=>{xo(s["default"].prototype.$piwik),i("/")},meta:{analyticsIgnore:!0}},{meta:{group:"townList"},path:"/cartographie",component:ju,beforeEnter:Af.loadedAndUpToDate},{meta:{group:"townList"},path:"/liste-des-sites",component:op,beforeEnter:Af.loadedAndUpToDate},{meta:{group:"townCreation",permissions:["shantytown.create"]},path:"/nouveau-site",component:mp,beforeEnter:Af.loadedAndUpToDate},{meta:{group:"townList"},path:"/site/:id",component:Ep,beforeEnter:Af.loadedAndUpToDate},{path:"/feedback",beforeEnter(e,t,i){window.location.href="mailto:contact@resorption-bidonvilles.beta.gouv.fr",i(!1)}},{path:"/conditions-d-utilisation",beforeEnter(e,t,i){window.open("/doc/CGU_Resorption_Bidonvilles.pdf"),i(!1)}},{path:"/typologie-des-acces",beforeEnter(e,t,i){window.open("/doc/guide_de_l_administrateur.pdf"),i(!1)}},{path:"/charte-d-engagement",beforeEnter(e,t,i){const{version_charte_engagement:{fichier:s}}=fo();window.open(s,"_blank"),i(!1)}},{path:"/mentions-legales",component:Xh},{meta:{group:"account"},path:"/mon-compte",component:Dp,beforeEnter:Af.loadedAndUpToDate},{meta:{group:"users",permissions:["user.list"]},path:"/liste-des-utilisateurs",component:Qp,beforeEnter:Af.loadedAndUpToDate},{meta:{group:"userCreation",permissions:["user.create"]},path:"/nouvel-utilisateur",component:nm,beforeEnter:Af.loadedAndUpToDate},{path:"/signature-charte-engagement",component:xf,beforeEnter:$f.bind(void 0,[{checker:Po,target:"/connexion"},{checker:mo,target:"/launcher"},{checker:Sf,target:"/",saveEntrypoint:!1},{checker(){return!Co()},target:"/"}])},{meta:{group:"users",permissions:["user.activate"]},path:"/nouvel-utilisateur/:id",component:Em,beforeEnter:Af.loadedAndUpToDate},{meta:{group:"users"},path:"/mise-a-niveau",component:Dm,beforeEnter:Af.loaded},{meta:{group:"users"},path:"/nouveau-mot-de-passe",component:Rm,beforeEnter:Af.anonymous},{meta:{group:"users"},path:"/renouveler-mot-de-passe/:token",component:Jm,beforeEnter:Af.anonymous},{meta:{group:"account"},path:"/activer-mon-compte/:token",component:pm,beforeEnter:Af.anonymous},{meta:{group:"plans",permissions:["plan.list"]},path:"/liste-des-dispositifs",component:lh,beforeEnter:Af.loadedAndUpToDate},{meta:{group:"plans",permissions:["plan.create"]},path:"/nouveau-dispositif",component:_h,beforeEnter:Af.loadedAndUpToDate},{meta:{group:"plans",permissions:["plan.update"]},path:"/modifier-dispositif/:id",component:Ih,beforeEnter:Af.loadedAndUpToDate},{meta:{group:"plans",permissions:["plan.read"]},path:"/dispositif/:id",component:xh,beforeEnter:Af.loadedAndUpToDate},{meta:{group:"plans",permissions:["plan.updateMarks"]},path:"/dispositif/:id/indicateurs",component:Fh,beforeEnter:Af.loadedAndUpToDate},{meta:{group:"admin",permissions:["stats.read"]},path:"/statistiques",component:Gh,beforeEnter:Af.loadedAndUpToDate},{meta:{group:"admin",permissions:["shantytown_comment.moderate"]},path:"/historique-des-activites",component:Av,beforeEnter:Af.loadedAndUpToDate},{meta:{group:"covid"},path:"/covid-19",component:sf,beforeEnter:Af.loadedAndUpToDate},{meta:{group:"directory"},path:"/annuaire/:id?",component:wv,beforeEnter:Af.loadedAndUpToDate}]});function qf(){if(null===Pf)return"/";const e=Pf;return Pf=null,e}const Mf=["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"];window.App=Object.freeze({escapeHtml(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},dateDiff(e,t){const i=new Date(e),s=new Date(t);let a;if(a=12*(s.getFullYear()-i.getFullYear()),a-=i.getMonth()+1,a+=s.getMonth(),a=a<=0?0:a,0===a){const e=Math.abs(i.getTime()-s.getTime())/864e5;return`${e} jour${e>1?"s":""}`}if(a<12)return a+" mois";if(12===a)return"1 an";const n=Math.floor(a/12),o=a%12;let r=`${n} an${n>1?"s":""}`;return o>0&&(r+=` ${o} mois`),r},formatDate(e,t="d/m/y"){const i=new Date(1e3*e);return t.replace("d",("0"+i.getDate()).slice(-2)).replace("m",("0"+(i.getMonth()+1)).slice(-2)).replace("y",i.getFullYear()).replace("h",("0"+i.getHours()).slice(-2)).replace("i",("0"+i.getMinutes()).slice(-2)).replace("M",Mf[i.getMonth()])}}),s["default"].component("font-awesome-icon",r["a"]),s["default"].use(o["a"]),s["default"].use(n["a"]),s["default"].use(a["a"]),"true"===Object({VUE_APP_API_URL:"https://api.resorption-bidonvilles.beta.gouv.fr",NODE_ENV:"production",BASE_URL:"/"}).MATOMO_ON&&s["default"].use(os,{host:"https://stats.data.gouv.fr",siteId:86,trackerFileName:"piwik",router:Of,enableLinkTracking:!0,requireConsent:!1,trackInitialView:!0,debug:!0}),is(s["default"]);const Df=new a["a"]({locale:"fr",messages:q});s["default"].createElement=e=>new s["default"](e),s["default"].createElement({el:"#app",router:Of,i18n:Df,render:e=>e(m)})},"7c9e":function(e,t,i){},"7d21":function(e,t,i){},"7f76":function(e,t,i){"use strict";var s=i("6d7c"),a=i.n(s);a.a},"7fa8":function(e,t,i){},8072:function(e,t,i){},8324:function(e,t,i){"use strict";var s=i("0514"),a=i.n(s);a.a},"83c6":function(e,t,i){"use strict";var s=i("42da"),a=i.n(s);a.a},8503:function(e,t,i){e.exports=i.p+"img/resorption-bidonvilles-2.8711730a.jpg"},"85ae":function(e,t,i){e.exports=i.p+"img/before.1c53f4ec.jpg"},"85f4":function(e,t,i){},8683:function(e,t,i){},8922:function(e,t,i){},8950:function(e,t,i){"use strict";var s=i("6382"),a=i.n(s);a.a},8973:function(e,t,i){e.exports=i.p+"img/resorption-bidonvilles-dessin.40bfb99e.png"},"8aa6":function(e,t,i){"use strict";var s=i("1a28"),a=i.n(s);a.a},"8b2f":function(e,t,i){e.exports=i.p+"img/resorption-bidonvilles-5.e5839f75.jpg"},"912c":function(e,t,i){},"983b":function(e){e.exports=JSON.parse('{"title":"Neighbour, citizen, shantytown dweller... Any news? A question ? An alert?","contactUs":"Contact us","email":"Your email","firstname":"First name","lastname":"Last name","requestType":"You want to...","help":"receive support","report":"report","requestHelp":"request help","requestInfo":"request info","requestAccess":"request access","isActor":"Are you involved in shantytown resorption","actorExample":"For example: a State service, an association operator, a local authority, etc.","yes":"Yes","no":"No","whichEstablishment":"Which establishment?","public":"State service, public institution or public organisation","territorialCollectivity":"Territorial collectivity","association":"Association","administration":"Central administration","message":"Your message","legal":"I give my consent to the processing of my personal data.","send":"Send","cancel":"Cancel","error":"Your request contains errors:","share":"Share this page"}')},9934:function(e,t,i){e.exports=i.p+"img/people.9be8d82e.svg"},9985:function(e,t,i){"use strict";var s=i("b3ad"),a=i.n(s);a.a},"9cc2":function(e,t,i){},"9cfe":function(e,t,i){},"9d64":function(e,t,i){e.exports=i.p+"img/RO.3c42c422.svg"},"9ddb":function(e){e.exports=JSON.parse('{"title":"Vecin, cetățean, rezident pe un platz... O informaţie? O întrebare? O alertă?","contactUs":"Contactaţi-ne","email":"E-mailul dumneavoastră","firstname":"Prenume","lastname":"Nume","requestType":"Doriţi","help":"Să ajutaţi","report":"Să semnalaţi","requestHelp":"Să cereţi ajutor","requestInfo":"Să cereţi informații","requestAccess":"Sa solicitați accesul la platformă","isActor":"Sunteţi actor în dizolvarea platzurilor ?","actorExample":"De exemplu: un serviciu de stat, un operator de asociaţie, o colectivitate locală..","yes":"Da","no":"Nu","whichEstablishment":"Care este structura dumneavostră ","public":"Serviciu de stat, instituție sau organism public","territorialCollectivity":"Colectivitate teritorială","association":"Asociaţie","administration":"Administraţie centrală","message":"Mesajul dumneavoastră","legal":"Certific faptul că aceste date cu caracter personal au fost introduse cu consimțământul meu.","send":"Trimite","cancel":"Anulează","error":"Solicitarea dvs. conține erori:","share":"Împărtășeste acestă pagină"}')},"9f1c":function(e,t,i){},a28d:function(e,t,i){},a39e:function(e,t,i){},a605:function(e,t,i){},a897:function(e,t,i){"use strict";var s=i("63fe"),a=i.n(s);a.a},aac4:function(e,t,i){},aaf3:function(e,t,i){"use strict";var s=i("7d21"),a=i.n(s);a.a},ab52:function(e,t,i){e.exports=i.p+"img/before.79688d04.jpg"},ac65:function(e,t,i){e.exports=i.p+"img/BG.d7746f61.svg"},af0d:function(e,t,i){},af21:function(e){e.exports=JSON.parse('{"contact":"Contactez l\'équipe du projet","statistics":"Statistiques","legal":"Mention légales","userAccessGuide":"Guide des accès et de l\'administrateur","userAgreement":"Charte d\'engagement de l\'utilisateur"}')},af3d:function(e){e.exports=JSON.parse('{"header":{"connect":"Sign in","contact":"Contact us"},"hero":{"title":"Taking action for slum clearance","subtitle":"Ask a question or request an access"},"firstSection":{"features":{"position":"Useful information on slums at a glance","actions":"The projects carried out available at any time","exchange":"Facilitating dialogue between parties involved"},"before":"Before","after":"After","context":{"title":"Résorption-bidonvilles,","subtitle":"A platform to boost the resorption of shantytowns","text":"A tool for information, sharing and steering, the platform offers a high-performance and effective solution for slum clearance. It enables the collaboration of all local stakeholders involved in the slum clearance policy."},"feedback":{"1":{"text":"It\'s great because you have the info online, you\'re not faced with an excel spreadsheet with codes you don\'t understand.","author":"Prefecture Seine-Saint-Denis"},"2":{"text":"The platform made the information more reliable because, before the Excel table was not shared. The more collaborative tools we have, the better it is.","author":"City of Poitiers"},"3":{"text":"I was able to direct the family of a person I was accompanying to a solidarity house from the location of their slum.","author":"Haute-Garonne Association"}}},"firstBanner":{"text":"Involved Stakeholders in slum clearance, please share and highlight your projects","cta":"Request access"},"secondSection":{"title":"Reaching slum clearance,","subtitle":"a national objective","data":{"1":{"line1":"More than","line2":"300 slums","line3":"in mainland France"},"2":{"line1":"More than","line2":"16 000 people","line3":"including 5,000 minors"},"3":{"line1":"Mostly","line2":"Europeans","line3":"Romanian and Bulgarian citizens"}},"firstParagraph":"A slum is an area that usually lacks basic services (water, electricity, waste management) and is illegally occupied by several families.","secondParagraph":{"bold":"The government sets a clear objective of shanty town resorption by moving away from an evacuation-centred approach to a global approach.","normal":"combining social inclusion, respect for public order and prevention of resettlement. In all the territories concerned, effective, humane and pragmatic multi-partner actions must be implemented.","link":"More about the shantytown resorption policy"},"video":{"text":"Understanding shantytown clearance in 2 minutes"}},"secondBanner":{"text":"Neighbour, citizen, shantytown dweller... Any news? A question ? An alert?","cta":"Contact us"},"thirdSection":{"title":"Actions in figures","firstParagraph":{"bold":"In 2019, more than 30 slum clearance projects have been carried out by 35 NGOs","normal":"They have been financed 75% by the State, 15% by local authorities and 10% by private or European funds. Families living in slums have been supported in order to access to health, housing, employment, education and sanitation."},"bilan":{"1":{"text":"8,600 beneficiaries of the actions"},"3":{"text":"1,000 people re-housed"},"4":{"text":"1,350 children in school"},"5":{"text":"2,040 beneficiaries","info":"of health support"},"6":{"text":"615 employment contracts signed"}},"cta":"Download the latest report","secondParagraph":{"title":"A project led by the interministerial delegation for access to housing (DIHAL)","body":{"text1":"The digital platform Résorption-bidonvilles, launched in 2018 by the","link1":"DIHAL","text2":"plays a role in transforming public action","text3":"The platform continues to be developed in close collaboration with its users.","text4":"To learn more about the beginning of the project, please visit ","link2":"the official website about Start-up d\'Etat"},"items":{"1":{"link":"General interest entrepreneur","text":"of the Future Investment Program in 2019"},"2":{"link":"European Commission\'s \\"rights, citizenship and equality\\" program","text":"in 2020"},"3":{"link":"State Start-up Acceleration Fund 3","text":"of DINUM in April 2020"},"4":{"link":"French policy transformation fund","text":"of DITP in October 2020"},"title":"The project was the winner of several calls for proposals:"}}},"contactForm":{"email":"Your email","cta":"Contact us"}}')},afa5:function(e,t,i){},b371:function(e,t,i){},b3ad:function(e,t,i){},b64b:function(e,t,i){},b750:function(e,t,i){e.exports=i.p+"img/before.dd41639d.jpg"},b82e:function(e,t,i){"use strict";var s=i("e67e"),a=i.n(s);a.a},b9d6:function(e,t,i){},bafd:function(e,t,i){},bb00:function(e,t,i){e.exports=i.p+"img/after.c33a3716.jpg"},bdf1:function(e,t,i){"use strict";var s=i("74c2"),a=i.n(s);a.a},be9a:function(e,t,i){},c1ab:function(e,t,i){"use strict";var s=i("49bc"),a=i.n(s);a.a},c368:function(e,t,i){},c789:function(e,t,i){"use strict";var s=i("7b35"),a=i.n(s);a.a},c8c7:function(e,t,i){e.exports=i.p+"img/after.4e3125cf.jpg"},cb23:function(e,t,i){"use strict";var s=i("f925"),a=i.n(s);a.a},cbe6:function(e,t,i){e.exports=i.p+"img/after.e9992ef7.jpg"},cda2:function(e){e.exports=JSON.parse('{"header":{"connect":"Вход","contact":"Свържете се с нас"},"hero":{"title":"Действия за закриване на бидонвили","subtitle":"Задайте въпрос или поискайте достъп"},"firstSection":{"features":{"position":"Полезна информация за обектите само с един поглед","actions":"Достъп по всяко време до най-важните дейности","exchange":"Улеснена връзка между участниците"},"context":{"title":"Закриване на бидонвили","subtitle":"Платформа за ускоряване на закриването на бидонвилите","text":"Инструмент за информация, споделяне и управление, платформата предлага работещо и ефикасно решение за закриване на бидонвили. Тя спомага за създаванетона на истинска динамика на сътрудничество между ангажираните участници по места за изпълнение на поставената цел."},"before":"Преди","after":"След ","feedback":{"1":{"text":"Отлично е, защото имате онлайн достъп до информацията, не сте пред екселска таблица с формули, които не разбирате.","author":"Префектура на департамента Сен-Сан-Дени"},"2":{"text":"Платформата предоставя достоверна информация, а екселската таблицата не беше колаборативна. Колкото повече инструменти за съвместна работа, толкова по-добре.","author":"Град Поатие"},"3":{"text":"Успях да насоча семейството на човек, на когото помагам, към социален център според местонаходжението на техния бидонвил","author":"Сдружение от департамента От-Гарон"}}},"firstBanner":{"text":"Дейци в политиката за закриването на бидонвилите, споделете и разпространете информация за вашата дейност","cta":"Искам достъп"},"secondSection":{"title":"Пълното закриване на бидонвилите","subtitle":"национална цел","data":{"1":{"line1":"Над","line2":"300 бидонвила","line3":"в континентална Франция"},"2":{"line1":"Над","line2":"16 000 души","line3":"от които 5 000 непълнолетни"},"3":{"line1":"Предимно","line2":"български и румънски ","line3":"граждани"}},"firstParagraph":"Бидонвилът е изоставен промишлен терен или постройка, обикновено без комунални услуги (вода, ток, събиране на отпадъци), в който са се настанили незаконно няколко семейства.","secondParagraph":{"bold":"През 2018 правителството определи ясна цел за преодоляване на бидонвилите като премине от подхода, сведен nдо евакуация на жителите, към глобален подход,","normal":"съчетаващ социалната интеграция, спазването на обществения ред и предотвратяване на нови бидонвили. Във всички засегнати теротирии трябва да бъдат въведени ефикасни, хуманни и прагматични действия с много партньори.","link":"Научете повече за политиката на закриване на бидонвилите"},"video":{"text":"Разберете закриването на бидонвилите в 2 минути"}},"secondBanner":{"text":"Съсед, гражданин, обитател на бидонвил...Информация? Въпрос? Сигнал?","cta":"Свържете се с нас"},"thirdSection":{"title":"Дейностите в цифри","firstParagraph":{"bold":"Над 30 дейности са извършени през 2019 година от над 35 оператори.","normal":"Те са финансирани 75% от държавата, 15% от местните власти и 10% от частни или европейски източници. Професионални екипи помагат на семействата в бидонвилите, незаконно обитаваните сгради или жилищата във всяко отношение: здраве, жилище, работа, образование, стабилизиране и обезопасяване на обекта."},"bilan":{"1":{"text":"8 600 бенефициенти от проектни дейности"},"3":{"text":"1 000 души с нов дом "},"4":{"text":"1 350 деца, посещаващи училище"},"5":{"text":"2 040 бенефициенти","info":"на здравна подкрепа"},"6":{"text":"615 сключени трудови договори"}},"cta":"Свалете последния доклад","secondParagraph":{"title":"Един проект на Междуведмствената делегация за настаняване и достъп до жилище","body":{"text1":"Цифровата платформа Закриване-бидонвили, стартирана през 2018 година от","link1":"МДНДЖ","text2":"е част от целта за трансформация на дейността на публичната администрация","text3":"Развитието на платформата продължава в тясно сътрудничество с нейните потребители.","text4":"Искате да научите повече за генезиса на проекта? Отидете на съответната страница на","link2":"официалния уебсайт на държавните стартъпи"},"items":{"1":{"link":"Предприемач в обществен интерес на Програмата за инвестиране ","text":"в бъдещето през 2019 година"},"2":{"link":"Програмата „Права, гражданство и равенство“ на Европейската комисия","text":"през първия триместър на 2020 година"},"3":{"link":"Фонд за ускоряване на държавни стартъпи 3","text":"на Междуведомствената дирекция за цифровизация през април 2020 година"},"4":{"link":"Френски фонд за трансформация на политики","text":"от DITP през октомври 2020"},"title":"Проектът е победител в множество отворени покани за проекти:"}}},"contactForm":{"email":"Вашият имейл","cta":"Свържете се с нас"}}')},cfd5:function(e,t,i){e.exports=i.p+"img/map-ro.2a33bfb7.jpg"},d416:function(e,t,i){"use strict";var s=i("0fea"),a=i.n(s);a.a},d507:function(e,t,i){},d67e:function(e,t,i){e.exports=i.p+"img/map-fr.28fc1fb5.jpg"},d89d:function(e,t,i){e.exports=i.p+"img/pin.ee8bc509.svg"},da0f:function(e,t,i){e.exports=i.p+"img/resorption-bidonvilles-3.1ab7f8ed.jpg"},dce0:function(e,t,i){e.exports=i.p+"img/resorption-bidonvilles-1.f2473868.jpg"},dd94:function(e,t,i){e.exports=i.p+"img/before.6c78217d.jpg"},dd98:function(e,t,i){},e072:function(e,t,i){"use strict";var s=i("e93e"),a=i.n(s);a.a},e119:function(e,t,i){"use strict";var s=i("dd98"),a=i.n(s);a.a},e17b:function(e,t,i){},e1d3:function(e,t,i){"use strict";var s=i("27a3"),a=i.n(s);a.a},e438:function(e,t,i){"use strict";var s=i("01b4"),a=i.n(s);a.a},e451:function(e,t,i){"use strict";var s=i("b9d6"),a=i.n(s);a.a},e517:function(e,t,i){"use strict";var s=i("afa5"),a=i.n(s);a.a},e61f:function(e,t,i){e.exports=i.p+"img/logo-commission-europenne.69cc0d29.png"},e67e:function(e,t,i){},e744:function(e,t,i){"use strict";var s=i("af0d"),a=i.n(s);a.a},e93e:function(e,t,i){},e9cc:function(e,t,i){},efa2:function(e,t,i){"use strict";var s=i("8683"),a=i.n(s);a.a},f090:function(e,t,i){"use strict";var s=i("b371"),a=i.n(s);a.a},f12c:function(e,t,i){"use strict";var s=i("a28d"),a=i.n(s);a.a},f276:function(e,t,i){"use strict";var s=i("d507"),a=i.n(s);a.a},f6ce:function(e,t,i){"use strict";var s=i("a39e"),a=i.n(s);a.a},f909:function(e,t,i){"use strict";var s=i("2b2e"),a=i.n(s);a.a},f925:function(e,t,i){},fd3d:function(e){e.exports=JSON.parse('{"header":{"connect":"Pentru a vă conecta","contact":"Contactați-ne"},"hero":{"title":"Acționăm pentru resorbția de bidonville","subtitle":"Puneți o întrebare sau solicitați accesul"},"firstSection":{"features":{"position":"Găsiți informații utile foarterapid pe site","actions":"Esențialul acțiunilor disponibil în orice moment","exchange":"Schimb de informatie rapidă intre participanţi"},"context":{"title":"Resorbția de bidonville,","subtitle":"O platformă pentru a accelera resorbția de bidonville","text":"Un instrument de informare, partajare și ghidare , platforma oferă o soluție puternică și eficientă pentru resorbția de bidonville. Acesta permite crearea unei dinamici reale de colaborare, într-un teritoriu si între actorii dedicați obiectivului de resorbția de bidonville."},"before":"Înainte","after":"După","feedback":{"1":{"text":"Este foarte bine pentru că aveți informațiile online, nu vă confruntați cu un tabel Excel cu coduri pe care nu le înțelegeți.","author":"Prefectura Seine-Saint-Denis"},"2":{"text":"Platforma a făcut informațiile mai accesibile, deoarece tabelul Excelnu era partajat. Cu cât avem mai multeinstrumente de colaborare, cu atât mai bine.","author":"Orașul Poitiers"},"3":{"text":"Am fost în măsură să direcționez familia unei persoane pe care o acomapaniez la o casă de solidaritate de la locația lor situata într-un bidonville.","author":"Asociația din Haute-Garonne"}}},"firstBanner":{"text":"Actori ai resorbției de bidonville, partajați și faceţi cunoscute acțiunile voastre","cta":"Solicitaţi accesul"},"secondSection":{"title":"Dizolvarea platzurilor,","subtitle":"un obiectiv național","data":{"1":{"line1":"Peste","line2":"300 de platzur","line3":"în Franța metropolitană"},"2":{"line1":"Peste","line2":"16 000 de persoane","line3":"inclusiv 5.000 de minori"},"3":{"line1":"Majoritatea","line2":"europeni","line3":"români și bulgari"}},"firstParagraph":"Un bidonville este un teren, un maidan sau o clădire construită care în general e lipsită de servicii de bază (apă, electricitate, gestionarea deșeurilor) și ocupată ilegal de mai multe familii. Un bidonville mai est denumit si „plaț” în limbaj familiar.","secondParagraph":{"bold":"In 2018, Guvernul și-a stabilit un obiectiv clar pentru resorbția de bidonville, depășind abordarea centrată pe evacuare, într-o abordare cuprinzătoare care combină integrarea socială, respectarea ordinii publice și prevenirea reinstralarii.","normal":"În toateteritoriile în cauză, trebuie instituite acțiuni eficiente, umane și pragmatice multi-parteneriale.","link":"Aflați mai multe despre politica de resorbției de bidonville"},"video":{"text":"Înțelegerea resorbției de bidonville în 2 minute"}},"secondBanner":{"text":"Vecin, cetățean, rezident într-un bidonville... O informaţie? O întrebare? O alertă?","cta":"Contactaţi-ne"},"thirdSection":{"title":"Acţiunile desfăşurate in cifre","firstParagraph":{"bold":"Peste 30 de acțiuni desfășurate în 2019 de catre 35 de operatori.","normal":"Acestea sunt 75% finanțate de stat, 15% de autoritățile locale și 10% din fonduri private sau europene. Echipe de profesioniști însoțesc familiile în bidonville, cladirile dezafectate sau în locuință cuprinzând toate aspectele: sănătate, locuința, ocuparea forței de muncă, educație, stabilizare și securitatea locului."},"bilan":{"1":{"text":"8 600 de beneficiari ai acestor actiuni"},"3":{"text":"1 000 de persoane relocate"},"4":{"text":"1 350 elevi"},"5":{"text":"2 040 de beneficiari","info":"de sprijin medical"},"6":{"text":"615 contracte de muncă semnate"}},"cta":"Încarcaţi ultimul bilanţ","secondParagraph":{"title":"Un proiect realizat de Delegația Interministerială privind cazarea și accesul la locuințe","body":{"text1":"Platforma digitală „resorbția de bidonville”, lansată în 2018 de","link1":"Dihal","text2":"face parte dintr-un obiectiv de transformare a acțiunii publice.","text3":"Evoluțiile platformei continuă în strânsă colaborare cu utilizatorii săi.","text4":"Doriți să aflați mai multe despre crearea proiectului? Accesați fişa proiectulu","link2":"pe site-ul oficial:  Start-Up de stat"},"items":{"1":{"link":"Antreprenor de interes general","text":"al Programului de investiții de viitor in2019"},"2":{"link":"rogramul Comisiei Europene \\"drepturi, cetățenie și egalitate\\"","text":"în primul trimestru al anului 2020"},"3":{"link":"Fonduri de Accelerare pentru Start-up de stat 3","text":"de la DINUM în aprilie 2020"},"4":{"link":"Fondul de transformare a politicii franceze","text":"de la DITP în octombrie 2020"},"title":"Proiectul a fost câștigătorul mai multor cereri de proiecte :"}}},"contactForm":{"email":"E-mailul dumneavoastră","cta":"Contactaţi-ne"}}')},ff59:function(e,t,i){}});
//# sourceMappingURL=index.aa3191e4.js.map